{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/typeedit/styles/app.scss","webpack:///./src/typeedit/styles/app/editor.scss","webpack:///./src/typeedit/styles/app/main.scss","webpack:///./src/typeedit/styles/welcome.scss","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./src/editor.ts","webpack:///./src/typeedit/app.ts","webpack:///./src/typeedit/font/font.ts","webpack:///./src/typeedit/font/glyph.ts","webpack:///./src/typeedit/geometry/bezier/curve.ts","webpack:///./src/typeedit/geometry/bezier/point.ts","webpack:///./src/typeedit/geometry/point.ts","webpack:///./src/typeedit/io/export.ts","webpack:///./src/typeedit/io/import.ts","webpack:///./src/typeedit/styles/app.scss?0117","webpack:///./src/typeedit/styles/app/editor.scss?40f5","webpack:///./src/typeedit/styles/app/main.scss?2c16","webpack:///./src/typeedit/styles/welcome.scss?4869","webpack:///./src/typeedit/ui/actionbar.ts","webpack:///./src/typeedit/ui/glyphBar.ts","webpack:///./src/typeedit/ui/glyphList.ts","webpack:///./src/typeedit/ui/toolbar.ts","webpack:///./src/typeedit/ui/viewport.ts","webpack:///./src/typeedit/undo/actions/array.ts","webpack:///./src/typeedit/undo/actions/value.ts","webpack:///./src/typeedit/undo/context.ts","webpack:///./src/typeedit/undo/history.ts","webpack:///./src/typeedit/utils/accelerator.ts","webpack:///./src/typeedit/utils/lerp.ts","webpack:///./src/typeedit/viewport/context/bezier.ts","webpack:///./src/typeedit/viewport/context/glyph.ts","webpack:///./src/typeedit/viewport/coordinates.ts","webpack:///./src/typeedit/viewport/guides/curve.ts","webpack:///./src/typeedit/viewport/guides/grid.ts","webpack:///./src/typeedit/viewport/guides/line.ts","webpack:///./src/typeedit/viewport/guides/point.ts","webpack:///./src/typeedit/viewport/handles/bezierBasePoint.ts","webpack:///./src/typeedit/viewport/handles/bezierControlPoint.ts","webpack:///./src/typeedit/viewport/handles/fontMetric.ts","webpack:///./src/typeedit/viewport/tools/bezierPen.ts","webpack:///./src/typeedit/viewport/tools/ellipse.ts","webpack:///./src/typeedit/viewport/tools/handle.ts","webpack:///./src/typeedit/viewport/tools/rectangle.ts","webpack:///./src/typeedit/viewport/viewport.ts","webpack:///external \"electron\"","webpack:///external \"events\"","webpack:///external \"fs\"","webpack:///external \"opentype.js\"","webpack:///external \"paper\"","webpack:///external \"path\""],"names":[],"mappings":"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;;AC7Fa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,SAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,aAAa;;AAEvG;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,yDAAyD;AACzD,GAAG;;AAEH;;;AAGA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA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","file":"editor.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/editor.ts\");\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"body {\\n  background: #fff;\\n  font-family: \\\"Inter\\\";\\n  user-select: none; }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/typeedit/styles/app.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,gBAAgB;EAEhB,oBAAoB;EAEpB,iBAAiB,EAAA\",\"sourcesContent\":[\"body {\\n    background: #fff;\\n\\n    font-family: \\\"Inter\\\";\\n\\n    user-select: none;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"section.edit {\\n  position: relative;\\n  display: grid;\\n  grid-template-columns: auto 1fr auto;\\n  grid-template-rows: 1fr auto; }\\n  section.edit div.viewport {\\n    position: relative; }\\n    section.edit div.viewport canvas {\\n      position: absolute;\\n      left: 0;\\n      top: 0; }\\n  section.edit aside {\\n    min-width: 320px;\\n    width: 320px;\\n    border-left: 1px solid #ddd;\\n    display: flex;\\n    flex-direction: column; }\\n    section.edit aside nav {\\n      display: flex; }\\n      section.edit aside nav button {\\n        background: transparent;\\n        font-family: \\\"Inter\\\";\\n        font-size: 10pt;\\n        font-weight: 400;\\n        padding: 6px 20px;\\n        border: none;\\n        border-bottom: none;\\n        outline: none;\\n        flex-grow: 1; }\\n        section.edit aside nav button.active {\\n          box-shadow: inset 0px -2px #333; }\\n    section.edit aside div.listContainer {\\n      height: 0;\\n      flex-grow: 1;\\n      overflow-y: scroll; }\\n    section.edit aside div.glyphList {\\n      background: #eee;\\n      display: grid;\\n      grid-template-columns: repeat(4, 1fr);\\n      gap: 1px; }\\n      section.edit aside div.glyphList div.glyph {\\n        max-width: 75px;\\n        background: #fff;\\n        display: flex;\\n        flex-direction: column; }\\n        section.edit aside div.glyphList div.glyph.active label {\\n          background: #6d7599;\\n          color: #fff; }\\n        section.edit aside div.glyphList div.glyph label {\\n          background: #fafafa;\\n          font-size: 9pt;\\n          font-weight: 500;\\n          text-align: center;\\n          white-space: nowrap;\\n          text-overflow: ellipsis;\\n          padding: 2px;\\n          overflow: hidden; }\\n        section.edit aside div.glyphList div.glyph canvas {\\n          width: 100%;\\n          height: auto; }\\n  section.edit div.glyphBar {\\n    font-family: \\\"Inter\\\";\\n    font-size: 24pt;\\n    text-align: center;\\n    border: none;\\n    outline: none;\\n    padding: 6px 20px; }\\n    section.edit div.glyphBar div.ntglyph {\\n      height: 1em;\\n      box-sizing: border-box;\\n      background: #eee;\\n      border-radius: 4px;\\n      border: 1px solid #ddd;\\n      margin: 0px 1px;\\n      display: inline-flex;\\n      align-items: center; }\\n      section.edit div.glyphBar div.ntglyph span {\\n        font-size: 16pt; }\\n  section.edit div.glyphSwitchButtons {\\n    position: absolute;\\n    left: 8px;\\n    right: 8px;\\n    top: 0;\\n    bottom: 0;\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n    pointer-events: none; }\\n  section.edit button.prevGlyph,\\n  section.edit button.nextGlyph {\\n    background: #fff;\\n    font-size: 0;\\n    outline: none;\\n    padding: 6px 8px;\\n    border-radius: 4px;\\n    border: 1px solid #ddd;\\n    box-shadow: 0px 2px 4px #0001;\\n    pointer-events: all;\\n    z-index: 10; }\\n    section.edit button.prevGlyph:hover,\\n    section.edit button.nextGlyph:hover {\\n      background: #eee; }\\n    section.edit button.prevGlyph:active,\\n    section.edit button.nextGlyph:active {\\n      background: #ddd; }\\n    section.edit button.prevGlyph img,\\n    section.edit button.nextGlyph img {\\n      width: 16px;\\n      height: 16px; }\\n  section.edit div.tools {\\n    padding: 8px 2px;\\n    display: flex;\\n    flex-direction: column;\\n    border-right: 1px solid #ddd;\\n    grid-row: 1 / span 2; }\\n    section.edit div.tools button {\\n      background: transparent;\\n      font-size: 0;\\n      border: none;\\n      outline: none;\\n      padding: 7px 8px;\\n      border-radius: 4px; }\\n      section.edit div.tools button:hover {\\n        background: #eee; }\\n      section.edit div.tools button:active {\\n        background: #ddd; }\\n      section.edit div.tools button.active {\\n        background: #eee;\\n        box-shadow: inset 0px 0px 0px 1px #bbb; }\\n      section.edit div.tools button img {\\n        width: 16px;\\n        height: 16px; }\\n  section.edit div.subactionsBar {\\n    position: absolute;\\n    left: 8px;\\n    right: 8px;\\n    top: 8px;\\n    display: flex;\\n    justify-content: flex-start; }\\n  section.edit div.subactions {\\n    background: #fff;\\n    padding: 2px;\\n    border-radius: 4px;\\n    border: 1px solid #bbb;\\n    box-shadow: 0px 2px 4px #0001;\\n    display: flex;\\n    z-index: 10; }\\n    section.edit div.subactions > div:not(:last-child) {\\n      border-right: 1px solid #ddd;\\n      padding-right: 2px; }\\n    section.edit div.subactions > div:not(:first-child) {\\n      padding-left: 2px; }\\n    section.edit div.subactions button {\\n      background: transparent;\\n      font-size: 0;\\n      border: none;\\n      outline: none;\\n      padding: 4px 6px;\\n      border-radius: 2px; }\\n      section.edit div.subactions button:disabled img {\\n        filter: grayscale(1) opacity(0.5); }\\n      section.edit div.subactions button:hover {\\n        background: #eee; }\\n      section.edit div.subactions button:active {\\n        background: #ddd; }\\n      section.edit div.subactions button img {\\n        width: 16px;\\n        height: 16px; }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/typeedit/styles/app/editor.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAkB;EAClB,aAAa;EACb,oCAAoC;EACpC,4BAA4B,EAAA;EAJhC;IAOQ,kBAAkB,EAAA;IAP1B;MAUY,kBAAkB;MAClB,OAAO;MACP,MAAM,EAAA;EAZlB;IAiBQ,gBAAgB;IAChB,YAAY;IAEZ,2BAA2B;IAE3B,aAAa;IACb,sBAAsB,EAAA;IAvB9B;MA0BY,aAAa,EAAA;MA1BzB;QA6BgB,uBAAuB;QAEvB,oBAAoB;QACpB,eAAe;QACf,gBAAgB;QAEhB,iBAAiB;QACjB,YAAY;QACZ,mBAAmB;QACnB,aAAa;QAEb,YAAY,EAAA;QAxC5B;UA2CoB,+BAA+B,EAAA;IA3CnD;MAiDY,SAAS;MAET,YAAY;MACZ,kBAAkB,EAAA;IApD9B;MAwDY,gBAAgB;MAEhB,aAAa;MACb,qCAAqC;MACrC,QAAQ,EAAA;MA5DpB;QA+DgB,eAAe;QAEf,gBAAgB;QAEhB,aAAa;QACb,sBAAsB,EAAA;QApEtC;UAuEoB,mBAAmB;UACnB,WAAW,EAAA;QAxE/B;UA4EoB,mBAAmB;UAEnB,cAAc;UACd,gBAAgB;UAChB,kBAAkB;UAClB,mBAAmB;UACnB,uBAAuB;UAEvB,YAAY;UAEZ,gBAAgB,EAAA;QAtFpC;UA0FoB,WAAW;UACX,YAAY,EAAA;EA3FhC;IAkGQ,oBAAoB;IACpB,eAAe;IACf,kBAAkB;IAElB,YAAY;IACZ,aAAa;IACb,iBAAiB,EAAA;IAxGzB;MA2GY,WAAW;MACX,sBAAsB;MAEtB,gBAAgB;MAChB,kBAAkB;MAClB,sBAAsB;MACtB,eAAe;MAEf,oBAAoB;MACpB,mBAAmB,EAAA;MApH/B;QAuHgB,eAAe,EAAA;EAvH/B;IA6HQ,kBAAkB;IAClB,SAAS;IACT,UAAU;IACV,MAAM;IACN,SAAS;IAET,aAAa;IACb,8BAA8B;IAC9B,mBAAmB;IACnB,oBAAoB,EAAA;EAtI5B;;IA2IQ,gBAAgB;IAEhB,YAAY;IAEZ,aAAa;IACb,gBAAgB;IAChB,kBAAkB;IAClB,sBAAsB;IACtB,6BAA6B;IAE7B,mBAAmB;IACnB,WAAW,EAAA;IAtJnB;;MAyJY,gBAAgB,EAAA;IAzJ5B;;MA6JY,gBAAgB,EAAA;IA7J5B;;MAiKY,WAAW;MACX,YAAY,EAAA;EAlKxB;IAuKQ,gBAAgB;IAEhB,aAAa;IACb,sBAAsB;IAEtB,4BAA4B;IAE5B,oBAAoB,EAAA;IA9K5B;MAiLY,uBAAuB;MAEvB,YAAY;MAEZ,YAAY;MACZ,aAAa;MACb,gBAAgB;MAChB,kBAAkB,EAAA;MAxL9B;QA2LgB,gBAAgB,EAAA;MA3LhC;QA+LgB,gBAAgB,EAAA;MA/LhC;QAmMgB,gBAAgB;QAChB,sCAAsC,EAAA;MApMtD;QAwMgB,WAAW;QACX,YAAY,EAAA;EAzM5B;IA+MQ,kBAAkB;IAClB,SAAS;IACT,UAAU;IACV,QAAQ;IAER,aAAa;IACb,2BAA2B,EAAA;EArNnC;IAyNQ,gBAAgB;IAEhB,YAAY;IACZ,kBAAkB;IAClB,sBAAsB;IAEtB,6BAA6B;IAE7B,aAAa;IACb,WAAW,EAAA;IAlOnB;MAqOY,4BAA4B;MAC5B,kBAAkB,EAAA;IAtO9B;MA0OY,iBAAiB,EAAA;IA1O7B;MA8OY,uBAAuB;MAEvB,YAAY;MAEZ,YAAY;MACZ,aAAa;MACb,gBAAgB;MAChB,kBAAkB,EAAA;MArP9B;QAwPgB,iCAAiC,EAAA;MAxPjD;QA4PgB,gBAAgB,EAAA;MA5PhC;QAgQgB,gBAAgB,EAAA;MAhQhC;QAoQgB,WAAW;QACX,YAAY,EAAA\",\"sourcesContent\":[\"section.edit {\\n    position: relative;\\n    display: grid;\\n    grid-template-columns: auto 1fr auto;\\n    grid-template-rows: 1fr auto;\\n\\n    div.viewport {\\n        position: relative;\\n\\n        canvas {\\n            position: absolute;\\n            left: 0;\\n            top: 0;\\n        }\\n    }\\n\\n    aside {\\n        min-width: 320px;\\n        width: 320px;\\n\\n        border-left: 1px solid #ddd;\\n        \\n        display: flex;\\n        flex-direction: column;\\n\\n        nav {\\n            display: flex;\\n\\n            button {\\n                background: transparent;\\n\\n                font-family: \\\"Inter\\\";\\n                font-size: 10pt;\\n                font-weight: 400;\\n\\n                padding: 6px 20px;\\n                border: none;\\n                border-bottom: none;\\n                outline: none;\\n\\n                flex-grow: 1;\\n\\n                &.active {\\n                    box-shadow: inset 0px -2px #333;\\n                }\\n            }\\n        }\\n\\n        div.listContainer {\\n            height: 0; // WTF???\\n\\n            flex-grow: 1;\\n            overflow-y: scroll;\\n        }\\n\\n        div.glyphList {\\n            background: #eee;\\n\\n            display: grid;\\n            grid-template-columns: repeat(4, 1fr);\\n            gap: 1px;\\n\\n            div.glyph {\\n                max-width: 75px;\\n\\n                background: #fff;\\n\\n                display: flex;\\n                flex-direction: column;\\n\\n                &.active label {\\n                    background: #6d7599;\\n                    color: #fff;\\n                }\\n\\n                label {\\n                    background: #fafafa;\\n\\n                    font-size: 9pt;\\n                    font-weight: 500;\\n                    text-align: center;\\n                    white-space: nowrap;\\n                    text-overflow: ellipsis;\\n                    \\n                    padding: 2px;\\n\\n                    overflow: hidden;\\n                }\\n\\n                canvas {\\n                    width: 100%;\\n                    height: auto;\\n                }\\n            }\\n        }\\n    }\\n\\n    div.glyphBar {\\n        font-family: \\\"Inter\\\";\\n        font-size: 24pt;\\n        text-align: center;\\n\\n        border: none;\\n        outline: none;\\n        padding: 6px 20px;\\n\\n        div.ntglyph {\\n            height: 1em;\\n            box-sizing: border-box;\\n\\n            background: #eee;\\n            border-radius: 4px;\\n            border: 1px solid #ddd;\\n            margin: 0px 1px;\\n\\n            display: inline-flex;\\n            align-items: center;\\n\\n            span {            \\n                font-size: 16pt;\\n            }\\n        }\\n    }\\n\\n    div.glyphSwitchButtons {\\n        position: absolute;\\n        left: 8px;\\n        right: 8px;\\n        top: 0;\\n        bottom: 0;\\n\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        pointer-events: none;\\n    }\\n\\n    button.prevGlyph,\\n    button.nextGlyph {\\n        background: #fff;\\n\\n        font-size: 0;\\n\\n        outline: none;\\n        padding: 6px 8px;\\n        border-radius: 4px;\\n        border: 1px solid #ddd;\\n        box-shadow: 0px 2px 4px #0001;\\n\\n        pointer-events: all;\\n        z-index: 10;\\n\\n        &:hover {\\n            background: #eee;\\n        }\\n\\n        &:active {\\n            background: #ddd;\\n        }\\n\\n        img {\\n            width: 16px;\\n            height: 16px;\\n        }\\n    }\\n\\n    div.tools {\\n        padding: 8px 2px;\\n\\n        display: flex;\\n        flex-direction: column;\\n\\n        border-right: 1px solid #ddd;\\n\\n        grid-row: 1 / span 2;\\n\\n        button {\\n            background: transparent;\\n\\n            font-size: 0;\\n\\n            border: none;\\n            outline: none;\\n            padding: 7px 8px;\\n            border-radius: 4px;\\n\\n            &:hover {\\n                background: #eee;\\n            }\\n\\n            &:active {\\n                background: #ddd;\\n            }\\n\\n            &.active {\\n                background: #eee;\\n                box-shadow: inset 0px 0px 0px 1px #bbb;\\n            }\\n\\n            img {\\n                width: 16px;\\n                height: 16px;\\n            }\\n        }\\n    }\\n\\n    div.subactionsBar {\\n        position: absolute;\\n        left: 8px;\\n        right: 8px;\\n        top: 8px;\\n\\n        display: flex;\\n        justify-content: flex-start;\\n    }\\n\\n    div.subactions {\\n        background: #fff;\\n\\n        padding: 2px;\\n        border-radius: 4px;\\n        border: 1px solid #bbb;\\n\\n        box-shadow: 0px 2px 4px #0001;\\n\\n        display: flex;\\n        z-index: 10;\\n\\n        & > div:not(:last-child) {\\n            border-right: 1px solid #ddd;\\n            padding-right: 2px;\\n        }\\n\\n        & > div:not(:first-child) {\\n            padding-left: 2px;\\n        }\\n\\n        button {\\n            background: transparent;\\n\\n            font-size: 0;\\n\\n            border: none;\\n            outline: none;\\n            padding: 4px 6px;\\n            border-radius: 2px;\\n            \\n            &:disabled img {\\n                filter: grayscale(1) opacity(0.5);\\n            }\\n\\n            &:hover {\\n                background: #eee;\\n            }\\n\\n            &:active {\\n                background: #ddd;\\n            }\\n\\n            img {\\n                width: 16px;\\n                height: 16px;\\n            }\\n        }\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"main {\\n  position: fixed;\\n  left: 0;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  background: #f6f6f6;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-start; }\\n  main > nav {\\n    width: 100%;\\n    padding: 0px;\\n    box-shadow: inset 0px -2px 2px #00000005;\\n    display: flex; }\\n    main > nav div.actions {\\n      display: flex; }\\n      main > nav div.actions button {\\n        background: transparent;\\n        border: none;\\n        outline: none;\\n        padding: 7px 10px;\\n        border-radius: 4px;\\n        margin-bottom: 2px;\\n        display: flex;\\n        align-items: center;\\n        justify-content: center; }\\n        main > nav div.actions button:hover {\\n          background: #ddd; }\\n        main > nav div.actions button:active {\\n          background: #c0c0c0; }\\n        main > nav div.actions button img {\\n          width: 16px;\\n          height: 16px; }\\n    main > nav div.tabs {\\n      display: flex;\\n      flex-grow: 1;\\n      justify-content: center; }\\n      main > nav div.tabs button {\\n        background: transparent;\\n        font-family: \\\"Inter\\\";\\n        font-size: 10pt;\\n        font-weight: 500;\\n        padding: 6px 20px;\\n        border: none;\\n        border-bottom: none;\\n        border-radius: 2px 2px 0px 0px;\\n        outline: none; }\\n        main > nav div.tabs button.active {\\n          background: #fff; }\\n  main section {\\n    position: relative;\\n    background: #fff;\\n    width: 100vw;\\n    flex-grow: 1; }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/typeedit/styles/app/main.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,eAAe;EACf,OAAO;EACP,MAAM;EACN,QAAQ;EACR,SAAS;EAET,mBAAmB;EAEnB,aAAa;EACb,sBAAsB;EACtB,uBAAuB,EAAA;EAX3B;IAcQ,WAAW;IAEX,YAAY;IAEZ,wCAAwC;IACxC,aAAa,EAAA;IAnBrB;MAsBY,aAAa,EAAA;MAtBzB;QAyBgB,uBAAuB;QAEvB,YAAY;QACZ,aAAa;QACb,iBAAiB;QACjB,kBAAkB;QAClB,kBAAkB;QAElB,aAAa;QACb,mBAAmB;QACnB,uBAAuB,EAAA;QAnCvC;UAsCoB,gBAAgB,EAAA;QAtCpC;UA0CoB,mBAAmB,EAAA;QA1CvC;UA8CoB,WAAW;UACX,YAAY,EAAA;IA/ChC;MAqDY,aAAa;MACb,YAAY;MACZ,uBAAuB,EAAA;MAvDnC;QA0DgB,uBAAuB;QAEvB,oBAAoB;QACpB,eAAe;QACf,gBAAgB;QAEhB,iBAAiB;QACjB,YAAY;QACZ,mBAAmB;QACnB,8BAA8B;QAC9B,aAAa,EAAA;QApE7B;UAuEoB,gBAAgB,EAAA;EAvEpC;IA8EQ,kBAAkB;IAElB,gBAAgB;IAEhB,YAAY;IAEZ,YAAY,EAAA\",\"sourcesContent\":[\"main {\\n    position: fixed;\\n    left: 0;\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n\\n    background: #f6f6f6;\\n\\n    display: flex;\\n    flex-direction: column;\\n    align-items: flex-start;\\n\\n    & > nav {\\n        width: 100%;\\n\\n        padding: 0px;\\n\\n        box-shadow: inset 0px -2px 2px #00000005;\\n        display: flex;\\n\\n        div.actions {\\n            display: flex;\\n\\n            button {    \\n                background: transparent;\\n    \\n                border: none;\\n                outline: none;\\n                padding: 7px 10px;\\n                border-radius: 4px;\\n                margin-bottom: 2px;\\n    \\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n    \\n                &:hover {\\n                    background: #ddd;\\n                }\\n    \\n                &:active {\\n                    background: #c0c0c0;\\n                }\\n    \\n                img {\\n                    width: 16px;\\n                    height: 16px;\\n                }\\n            }\\n        }\\n\\n        div.tabs {\\n            display: flex;\\n            flex-grow: 1;\\n            justify-content: center;\\n\\n            button {\\n                background: transparent;\\n    \\n                font-family: \\\"Inter\\\";\\n                font-size: 10pt;\\n                font-weight: 500;\\n    \\n                padding: 6px 20px;\\n                border: none;\\n                border-bottom: none;\\n                border-radius: 2px 2px 0px 0px;\\n                outline: none;\\n    \\n                &.active {\\n                    background: #fff;\\n                }\\n            }\\n        }\\n    }\\n\\n    section {\\n        position: relative;\\n\\n        background: #fff;\\n\\n        width: 100vw;\\n\\n        flex-grow: 1;\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"article.welcome {\\n  display: flex;\\n  justify-content: center;\\n  align-items: flex-start; }\\n  article.welcome > div {\\n    width: 350px;\\n    margin: 60px; }\\n    article.welcome > div div.buttons {\\n      display: grid;\\n      grid-template-columns: repeat(2, 1fr);\\n      gap: 2px; }\\n    article.welcome > div h1 {\\n      font-size: 40pt;\\n      line-height: 1;\\n      margin: 0;\\n      text-align: center; }\\n    article.welcome > div h3 {\\n      font-size: 14pt;\\n      font-weight: 400;\\n      margin: 0px 0px 24px 0px;\\n      text-align: center; }\\n    article.welcome > div h2 {\\n      font-weight: 400;\\n      margin-bottom: 8px; }\\n    article.welcome > div button {\\n      width: 100%;\\n      background: transparent;\\n      font-family: \\\"Inter\\\";\\n      border: none;\\n      outline: none;\\n      padding: 7px 8px;\\n      border: 1px solid #bbb;\\n      border-radius: 4px;\\n      margin-bottom: 2px;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center; }\\n      article.welcome > div button:hover {\\n        background: #eee; }\\n      article.welcome > div button:active {\\n        background: #ddd; }\\n      article.welcome > div button img {\\n        width: 16px;\\n        height: 16px;\\n        margin-right: 8px; }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/typeedit/styles/welcome.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,aAAa;EACb,uBAAuB;EACvB,uBAAuB,EAAA;EAH3B;IAMQ,YAAY;IAEZ,YAAY,EAAA;IARpB;MAWY,aAAa;MACb,qCAAqC;MACrC,QAAQ,EAAA;IAbpB;MAiBY,eAAe;MACf,cAAc;MAEd,SAAS;MAET,kBAAkB,EAAA;IAtB9B;MA0BY,eAAe;MACf,gBAAgB;MAEhB,wBAAwB;MAExB,kBAAkB,EAAA;IA/B9B;MAmCY,gBAAgB;MAEhB,kBAAkB,EAAA;IArC9B;MAyCY,WAAW;MAEX,uBAAuB;MAEvB,oBAAoB;MAEpB,YAAY;MACZ,aAAa;MACb,gBAAgB;MAChB,sBAAsB;MACtB,kBAAkB;MAClB,kBAAkB;MAElB,aAAa;MACb,mBAAmB;MACnB,uBAAuB,EAAA;MAxDnC;QA2DgB,gBAAgB,EAAA;MA3DhC;QA+DgB,gBAAgB,EAAA;MA/DhC;QAmEgB,WAAW;QACX,YAAY;QAEZ,iBAAiB,EAAA\",\"sourcesContent\":[\"article.welcome {\\n    display: flex;\\n    justify-content: center;\\n    align-items: flex-start;\\n\\n    & > div {     \\n        width: 350px;\\n\\n        margin: 60px;\\n\\n        div.buttons {\\n            display: grid;\\n            grid-template-columns: repeat(2, 1fr);\\n            gap: 2px;\\n        }\\n\\n        h1 {\\n            font-size: 40pt;\\n            line-height: 1;\\n\\n            margin: 0;\\n\\n            text-align: center;\\n        }\\n\\n        h3 {\\n            font-size: 14pt;\\n            font-weight: 400;\\n\\n            margin: 0px 0px 24px 0px;\\n\\n            text-align: center;\\n        }\\n\\n        h2 {\\n            font-weight: 400;\\n            \\n            margin-bottom: 8px;\\n        }\\n\\n        button {\\n            width: 100%;\\n\\n            background: transparent;\\n\\n            font-family: \\\"Inter\\\";\\n\\n            border: none;\\n            outline: none;\\n            padding: 7px 8px;\\n            border: 1px solid #bbb;\\n            border-radius: 4px;\\n            margin-bottom: 2px;\\n\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n\\n            &:hover {\\n                background: #eee;\\n            }\\n\\n            &:active {\\n                background: #ddd;\\n            }\\n\\n            img {\\n                width: 16px;\\n                height: 16px;\\n\\n                margin-right: 8px;\\n            }\\n        }\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","import \"./typeedit/styles/app.scss\"\nimport \"./typeedit/styles/app/main.scss\"\nimport \"./typeedit/styles/app/editor.scss\"\n\nimport \"./typeedit/styles/welcome.scss\"\n\nimport app, { currentFont } from \"./typeedit/app\"\nimport paper from \"paper\"\nimport { remote } from \"electron\"\nimport { basename } from \"path\"\nimport { importFont } from \"./typeedit/io/import\"\nimport { Font } from \"./typeedit/font/font\"\nimport { exportFont } from \"./typeedit/io/export\"\n\nconsole.log(remote)\n\nconst scope = new paper.PaperScope()\nscope.install(window)\nscope.setup(new paper.Size(1000, 1000))\n\nconst recentFiles: string[] = JSON.parse(\n    localStorage.getItem(\"recentFiles\")\n) ?? []\n\nrecentFiles.forEach(\n    file => {\n        const btn = document.createElement(\"button\")\n\n        btn.textContent = basename(file)\n        btn.addEventListener(\n            \"click\", () => {\n                importFont(file).then(font => {\n                    const welcome = document.querySelector(\"article.welcome\") as HTMLDivElement\n                    welcome.style.display = \"none\"\n                    \n                    app(font)\n                })\n            }\n        )\n\n        document.querySelector(\"div.recentFiles\").appendChild(btn)\n    }\n)\n\ndocument.querySelectorAll(\"button.newFont\").forEach(\n    btn => btn.addEventListener(\n        \"click\", () => {\n            const welcome = document.querySelector(\"article.welcome\") as HTMLDivElement\n            welcome.style.display = \"none\"\n\n            app(Font.createBlank())\n        }\n    )\n)\n\ndocument.querySelectorAll(\"button.openFont\").forEach(\n    btn => btn.addEventListener(\n        \"click\", () => {\n            remote.dialog.showOpenDialog(\n                remote.getCurrentWindow(),\n                {\n                    filters: [\n                        {\n                            name: \"Fonts\",\n                            extensions: [\"otf\", \"ttf\"]\n                        }\n                    ],\n                    properties: [\"openFile\"]\n                }\n            ).then(result => {\n                if (\n                    result.canceled ||\n                    result.filePaths.length !== 1\n                ) return\n\n                importFont(result.filePaths[0]).then(\n                    font => {\n                        const welcome = document.querySelector(\"article.welcome\") as HTMLDivElement\n                        welcome.style.display = \"none\"\n\n                        app(font)\n\n                        recentFiles.unshift(result.filePaths[0])\n                        localStorage.setItem(\"recentFiles\", JSON.stringify(recentFiles))\n                    }\n                )\n            })\n        }\n    )\n)\n\ndocument.querySelectorAll(\"button.saveFont\").forEach(\n    btn => btn.addEventListener(\n        \"click\", () => {\n            remote.dialog.showSaveDialog(\n                remote.getCurrentWindow(),\n                {\n                    filters: [\n                        {\n                            name: \"Fonts\",\n                            extensions: [\"otf\", \"ttf\"]\n                        }\n                    ],\n                    defaultPath: currentFont.info.fontFamily +\n                                 \"-\" + currentFont.info.fontSubfamily +\n                                 \".otf\"\n                }\n            ).then(result => {\n                if (result.canceled) return\n\n                exportFont(currentFont, result.filePath)\n            })\n        }\n    )\n)\n\n// load(\"test/Inter-Regular.otf\").then(\n//     (font) => {\n//         app(font)\n//     }\n// )","import { BezierPenTool } from \"./viewport/tools/bezierPen\"\nimport { HandleTool } from \"./viewport/tools/handle\"\nimport { GlyphContext } from \"./viewport/context/glyph\"\nimport { updateSubactions } from \"./ui/actionbar\"\nimport { setupViewport } from \"./ui/viewport\"\nimport { prepareGlyphBar } from \"./ui/glyphBar\"\nimport { prepareGlyphList } from \"./ui/glyphList\"\nimport { ITool, ToolSubAction } from \"./viewport/tools/tool\"\nimport { undo, redo } from \"./undo/history\"\nimport { prepareToolbar, setActiveTool } from \"./ui/toolbar\"\nimport { Font } from \"./font/font\"\nimport { RectangleTool } from \"./viewport/tools/rectangle\"\nimport { EllipseTool } from \"./viewport/tools/ellipse\"\n\nexport let currentFont: Font = null\n\nconst globalSubActions: ToolSubAction[] = [\n    {\n        name: \"Undo\",\n        icon: \"undo\",\n        accelerator: \"^KeyZ\",\n        handler: () => {\n            undo()\n        }\n    },\n    {\n        name: \"Redo\",\n        icon: \"redo\",\n        accelerator: \"^+KeyZ\",\n        handler: () => {\n            redo()\n        }\n    },\n]\n\nconst globalTools = [\n    new HandleTool(),\n    new BezierPenTool(),\n    new RectangleTool(),\n    new EllipseTool()\n]\n\nlet currentKeybCallback: (e: KeyboardEvent) => void = null\n\nexport default (font: Font) => {\n    currentFont = font\n\n    document.title = `${font.info.fontFamily} - FTE`\n    prepareGlyphList(font)\n\n    const context = new GlyphContext(\n        \"ABC\".split(\"\").map(\n            chr => font.glyphs.find(g => g.codePoint === chr.codePointAt(0))\n        ), 0\n    )\n\n    const viewport = setupViewport(context)\n    viewport.setTool(new HandleTool())\n    updateSubactions(viewport, [globalSubActions, ...viewport.tool.subactions])\n    \n    prepareToolbar(\n        globalTools,\n        globalTools[0],\n        (tool: ITool) => {\n            viewport.setTool(tool)\n            updateSubactions(\n                viewport,\n                [globalSubActions, ...tool.subactions]\n            )\n        }\n    )\n\n    prepareGlyphBar(viewport)\n\n    viewport.updateViewportSize()\n\n    if (currentKeybCallback)\n        window.removeEventListener(\"keyup\", currentKeybCallback)\n\n    currentKeybCallback = (e: KeyboardEvent) => {\n        if (document.activeElement !== document.body) return // for now\n\n        let accelString = e.code\n        if (e.shiftKey) accelString = \"+\" + accelString\n        if (e.ctrlKey) accelString = \"^\" + accelString\n\n        for (let action of [\n            globalTools,\n            globalSubActions, ...viewport.tool.subactions\n        ].flat()) {\n            if (action.accelerator === accelString) {\n                if (\"handler\" in action) {\n                    action.handler()\n                    viewport.render()\n                    if (viewport.context instanceof GlyphContext)\n                        viewport.context.glyph.emit(\"modified\")\n                } else {\n                    viewport.setTool(action)\n                    updateSubactions(\n                        viewport,\n                        [globalSubActions, ...action.subactions]\n                    )\n                    setActiveTool(globalTools.indexOf(action))\n                }\n                return\n            }\n        }\n    }\n    window.addEventListener(\"keyup\", currentKeybCallback)\n}","import { Glyph } from \"./glyph\"\nimport { Font as OTFont, Glyph as OTGlyph } from \"opentype.js\"\nimport { EventEmitter } from \"events\"\n\nexport type FontMetrics = {\n    ascender: number,\n    descender: number,\n    xHeight: number\n}\n\nexport type FontInfo = {\n    copyright: string,\n    description: string,\n    designer: string,\n    designerURL: string,\n    fontFamily: string,\n    fontSubfamily: string,\n    fullName: string,\n    license: string,\n    licenseURL: string,\n    manufacturer: string,\n    manufacturerURL: string,\n    postScriptName: string,\n    uniqueID: string,\n    version: string\n}\n\nexport class Font extends EventEmitter {\n    constructor(\n        public info: Partial<FontInfo>,\n        public metrics: FontMetrics,\n        public glyphs: Glyph[]\n    ) {\n        super()\n\n        this.info = Object.assign(\n            {\n                copyright: \"\",\n                description: \"\",\n                designer: \"\",\n                designerURL: \"\",\n                fontFamily: \"\",\n                fontSubfamily: \"\",\n                fullName: \"\",\n                license: \"\",\n                licenseURL: \"\",\n                manufacturer: \"\",\n                manufacturerURL: \"\",\n                postScriptName: \"\",\n                uniqueID: \"\",\n                version: \"\"\n            }, this.info\n        )\n    }\n\n    static createBlank() {\n        // Just the base Latin alphanumeric for now\n        const baseCharacterSet = \" 0123456789-=_+!@#$%^&*(){}[]\\\\\\/,.<>?;':\\\"~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\"\n        const specialNames: {\n            [key: string]: string\n        } = {\n            \" \": \"space\",\n            \"'\": \"quote\",\n            \"\\\"\": \"dblquote\",\n            \"!\": \"exclam\",\n            \"@\": \"at\",\n            \"#\": \"hash\",\n            \"$\": \"dollar\",\n            \"%\": \"percent\",\n            \"^\": \"caret\",\n            \"&\": \"ampersand\",\n            \"*\": \"asterisk\"\n        }\n\n        const font = new Font(\n            {\n                fontFamily: \"New font\",\n                fontSubfamily: \"Regular\"\n            },\n            {\n                ascender: -96,\n                descender: 512 + 96,\n                xHeight: 196\n            },\n            []\n        )\n        font.addGlyph(\n            new Glyph(\n                font, \".notdef\", null,\n                {\n                    leftBearing: 0,\n                    rightBearing: 320\n                },\n                []\n            ),\n            ...baseCharacterSet.split(\"\").map(\n                char => {\n                    const name = (char in specialNames) ? specialNames[char] : char\n\n                    return new Glyph(\n                        font, name, char.codePointAt(0),\n                        {\n                            leftBearing: 0,\n                            rightBearing: 320\n                        },\n                        []\n                    )\n                }\n            )\n        )\n\n        return font\n    }\n\n    static fromOTFont(otfont: OTFont) {\n        const glyphs: Glyph[] = [] // For now, don't want to import the entirety of Inter just yet\n        console.log(otfont)\n\n        const scaleFactor = 512 / otfont.tables.os2.sCapHeight\n\n        const info: any = {}\n        const names = otfont.names as any\n\n        Object.keys(otfont.names).forEach(\n            k => {\n                if (!names[k]) info[k] = \"\"\n                info[k] = names[k]?.en ?? \"\"\n            }\n        )\n        \n        return new Font(\n            info as FontInfo,\n            {\n                descender: -otfont.descender * scaleFactor + 512,\n                ascender: -(otfont.ascender - otfont.tables.os2.sCapHeight) * scaleFactor,\n                xHeight: (otfont.tables.os2.sCapHeight - otfont.tables.os2.sxHeight) * scaleFactor\n            },\n            glyphs\n        )\n    }\n\n    addGlyph(...glyphs: Glyph[]) {\n        this.glyphs.push(...glyphs)\n    }\n}","import { EventEmitter } from \"events\"\nimport { Font as OTFont, Glyph as OTGlyph } from \"opentype.js\"\nimport { BezierCurve } from \"../geometry/bezier/curve\"\nimport { generateCurvesFromOTGlyph } from \"../io/import\"\nimport { IDrawable } from \"../viewport/drawable\"\nimport { Font } from \"./font\"\n\nexport type GlyphMetrics = {\n    leftBearing: number,\n    rightBearing: number\n}\n\nexport class Glyph extends EventEmitter {\n    public finalBeziers: BezierCurve[] = []\n\n    constructor(\n        public font: Font,\n        public name: string,\n        public codePoint: number,\n        public metrics: GlyphMetrics,\n        public beziers: BezierCurve[]\n    ) {\n        super()\n\n        if (!name) {\n            this.name = codePoint ?\n                   `uni${codePoint.toString(16).toUpperCase().padStart(4, \"0\")}` :\n                   \".notdef\"\n        }\n        \n        this.beziers.forEach(b => b.glyph = this)\n        this.finalBeziers = beziers // for now\n\n        this.on(\"modified\", () => {\n            this.font.emit(\"glyphModified\", this)\n        })\n    }\n\n    get comparableCodePoint() {\n        if (this.name === \".notdef\") return -2\n        if (this.name === \".null\") return -1\n        return this.codePoint ?? Infinity\n    }\n\n    static fromOTGlyph(font: Font, otfont: OTFont, otglyph: OTGlyph) {\n        const scaleFactor = 512 / otfont.tables.os2.sCapHeight\n        const beziers = generateCurvesFromOTGlyph(otfont, otglyph)\n\n        const glyphMetrics = otglyph.getMetrics()\n\n        return new Glyph(\n            font,\n            otglyph.name,\n            otglyph.unicode,\n            {\n                leftBearing: 0,\n                rightBearing: (\n                    glyphMetrics.rightSideBearing + glyphMetrics.xMax\n                ) * scaleFactor\n            },\n            beziers\n        )\n    }\n\n    updateBeziers() {\n        // Nothing for now\n        // TODO: modifiers\n        this.finalBeziers = this.beziers\n    }\n}","import { EventEmitter } from \"events\"\nimport { Glyph } from \"../../font/glyph\"\nimport { BezierPoint } from \"./point\"\nimport paper from \"paper\"\nimport { Point } from \"../point\"\n\nexport class BezierCurve extends EventEmitter {\n    public points: BezierPoint[] = []\n    public closed = true\n\n    constructor(\n        public glyph?: Glyph\n    ) {\n        super()\n\n        this.on(\"modified\", () => {\n            if (this.glyph) this.glyph.emit(\"modified\")\n        })\n    }\n\n    addPoint(point: BezierPoint) {\n        point.curve = this\n        this.points.push(point)\n        this.emit(\"modified\")\n        this.emit(\"newPoint\", point)\n    }\n\n    // see: https://www.element84.com/blog/determining-the-winding-of-a-polygon-given-as-a-set-of-ordered-points\n    get clockwise() {\n        let sum = 0\n\n        for (let i = 0; i < this.points.length; i++) {\n            const point = this.points[i].base\n            const next = this.points[\n                (i + 1) % this.points.length\n            ].base\n\n            sum += (next.x - point.x) * (next.y - point.y)\n        }\n\n        return sum < 0 // inverted Y axis!\n    }\n\n    reverse() {\n        this.points.forEach(\n            p => p.reverse()\n        )\n        this.points = this.points.reverse()\n    }\n\n    static getPath2D(beziers: BezierCurve[]) {\n        const path = new Path2D()\n\n        for (let bezier of beziers) {\n            for (let i = 0; i < bezier.points.length; i++) {\n                const p1 = bezier.points[i]\n                const p2 = bezier.points[(i + 1) % bezier.points.length]\n                if (i === 0)\n                    path.moveTo(p1.base.x, p1.base.y)\n    \n                path.bezierCurveTo(\n                    p1.after.x, p1.after.y,\n                    p2.before.x, p2.before.y,\n                    p2.base.x, p2.base.y\n                )\n            }\n        }\n\n        return path\n    }\n\n    getPaperPath(): paper.Path {\n        const path = new paper.Path()\n        if (!this.points.length) return path\n        \n        const first = this.points[0].base\n        path.moveTo(new paper.Point(first.x, first.y))\n\n        for (let i = 0; i < this.points.length; i++) {\n            const pt = this.points[i]\n            const next = this.points[\n                (i + 1) % this.points.length\n            ]\n\n            const c1 = pt.after\n            const c2 = next.before\n            const b = next.base\n\n            path.cubicCurveTo(\n                new paper.Point(c1.x, c1.y),\n                new paper.Point(c2.x, c2.y),\n                new paper.Point(b.x, b.y)\n            )\n        }\n\n        path.closePath()\n\n        return path\n    }\n    \n    static fromPaperPath(path: paper.Path): BezierCurve {\n        const curve = new BezierCurve()\n\n        path.segments.forEach(\n            seg => curve.addPoint(\n                new BezierPoint(\n                    new Point(seg.point.x, seg.point.y),\n                    new Point(\n                        seg.point.x + seg.handleIn.x,\n                        seg.point.y + seg.handleIn.y\n                    ),\n                    new Point(\n                        seg.point.x + seg.handleOut.x,\n                        seg.point.y + seg.handleOut.y\n                    )\n                )\n            )\n        )\n\n        return curve\n    }\n\n    static fromPaperPathItem(item: paper.PathItem): BezierCurve[] {\n        if (item instanceof paper.Path)\n            return [BezierCurve.fromPaperPath(item)]\n        else if (item instanceof paper.CompoundPath)\n            return item.children.map(\n                ch => {\n                    if (ch instanceof paper.Path)\n                        return BezierCurve.fromPaperPath(ch)\n                    return null\n                }\n            ).filter(c => c)\n        \n        return []\n    }\n}\n\n","import { EventEmitter } from \"events\"\nimport { Point } from \"../point\"\nimport { BezierCurve } from \"./curve\"\n\nexport enum BezierPointType {\n    free, auto, sharp\n}\n\nexport class BezierPoint extends EventEmitter {\n    public curve: BezierCurve = null\n\n    constructor(\n        public base: Point,\n        public before: Point,\n        public after: Point,\n        public type: BezierPointType = BezierPointType.auto\n    ) {\n        super()\n        \n        this.on(\"modified\", () => {\n            if (this.curve) this.curve.emit(\"modified\")\n        })\n    }\n\n    reverse() {\n        const t = this.before\n        this.before = this.after\n        this.after = t\n    }\n\n    determineType() {\n        const radius1 = this.after.distance(this.base)\n        const radius2 = this.before.distance(this.base)\n\n        if (radius1 < 0.0001 && radius2 < 0.0001) {\n            this.type = BezierPointType.sharp\n            return\n        }\n\n        const angle1 = this.after.angle(this.base)\n        const angle2 = this.before.angle(this.base)\n\n        const angleDiff = Math.abs(angle1 - angle2)\n        const piDiff = angleDiff / Math.PI\n\n        if (Math.abs(piDiff - Math.round(piDiff)) < 0.0001)\n            this.type = BezierPointType.auto\n    }\n\n    movePoint(point: Point, dPos: Point) {\n        if (point === this.base) {\n            this.base.move(dPos.x, dPos.y)\n            this.before.move(dPos.x, dPos.y)\n            this.after.move(dPos.x, dPos.y)\n        } else {\n            const otherPoint = point === this.before ?\n                               this.after : this.before\n            \n            point.move(dPos.x, dPos.y)\n\n            if (this.type === BezierPointType.auto) {\n                const otherRadius = otherPoint.distance(this.base)\n                const angle = point.angle(this.base)\n\n                otherPoint.x = otherRadius * Math.cos(angle + Math.PI) + this.base.x\n                otherPoint.y = otherRadius * Math.sin(angle + Math.PI) + this.base.y\n            }\n        }\n\n        this.curve.emit(\"modified\")\n    }\n}","export class Point {\n    constructor(\n        public x = 0,\n        public y = 0\n    ) {}\n\n    move(dx: number, dy: number) {\n        this.x += dx\n        this.y += dy\n    }\n\n    distance(other: Point) {\n        return Math.hypot(\n            this.x - other.x,\n            this.y - other.y\n        )\n    }\n\n    angle(origin: Point) {\n        return Math.atan2(\n            this.y - origin.y,\n            this.x - origin.x\n        )\n    }\n\n    getDiff(last: Point) {\n        return new Point(\n            this.x - last.x,\n            this.y - last.y\n        )\n    }\n}","import { Font } from \"../font/font\"\nimport {\n    Font as OTFont,\n    Glyph as OTGlyph,\n    Path as OTPath\n} from \"opentype.js\"\nimport { Glyph } from \"../font/glyph\"\nimport { Point } from \"../geometry/point\"\nimport { writeFileSync } from \"fs\"\n\nfunction glyphToOTPath(glyph: Glyph, targetCapHeight = 1000) {\n    const path = new OTPath()\n    const scaleFactor = targetCapHeight / 512\n\n    const conv = (point: Point) => {\n        return {\n            x: (point.x - glyph.metrics.leftBearing) * scaleFactor,\n            y: (512 - point.y) * scaleFactor\n        }\n    }\n\n    for (const bezier of glyph.finalBeziers) {\n        if (!bezier.points.length) continue\n        \n        const first = conv(bezier.points[0].base)\n        path.moveTo(first.x, first.y)\n\n        for (let i = 0; i < bezier.points.length; i++) {\n            const pt = bezier.points[i]\n            const next = bezier.points[\n                (i + 1) % bezier.points.length\n            ]\n\n            const c1 = conv(pt.after)\n            const c2 = conv(next.before)\n            const b = conv(next.base)\n\n            path.curveTo(\n                c1.x, c1.y,\n                c2.x, c2.y,\n                b.x, b.y\n            )\n        }\n\n        path.closePath()\n    }\n\n    return path\n}\n\nexport function exportFont(font: Font, targetFile: string) {\n    const notDef = new OTGlyph({\n        name: \".notdef\",\n        unicode: 0,\n        advanceWidth: 650, // TODO!!!\n        path: new OTPath()\n    })\n\n    const targetCapHeight = 2000\n    const scaleFactor = targetCapHeight / 512\n    \n    const otfont = new OTFont({\n        familyName: font.info.fontFamily,\n        styleName: font.info.fontSubfamily,\n        postScriptName: `${font.info.fontFamily}-${font.info.fontSubfamily}`,\n        unitsPerEm: (font.metrics.descender - font.metrics.ascender) * scaleFactor, // TODO!!\n        ascender: (512 - font.metrics.ascender) * scaleFactor,\n        descender: (512 - font.metrics.descender) * scaleFactor,\n        glyphs: [\n            ...font.glyphs.map(g => new OTGlyph({\n                name: g.name,\n                unicode: g.codePoint,\n                advanceWidth: Math.round((g.metrics.rightBearing - g.metrics.leftBearing) * scaleFactor),\n                path: glyphToOTPath(g, targetCapHeight)\n            })),\n            notDef\n        ],\n        ///@ts-ignore\n        tables: {\n            version: 4,\n            achVendID: \"SFTE\",\n            sCapHeight: targetCapHeight,\n            sxHeight: (512 - font.metrics.xHeight) * scaleFactor,\n            sTypoAscender: (512 - font.metrics.ascender) * scaleFactor,\n            sTypoDescender: (512 - font.metrics.descender) * scaleFactor\n        }\n    })\n\n    const buf = Buffer.from(otfont.toArrayBuffer())\n\n    writeFileSync(targetFile, buf)\n}","import { Font as OTFont, Glyph as OTGlyph, load, PathCommand } from \"opentype.js\";\nimport { Font } from \"../font/font\";\nimport { Glyph } from \"../font/glyph\";\nimport { BezierCurve } from \"../geometry/bezier/curve\";\nimport { BezierPoint, BezierPointType } from \"../geometry/bezier/point\";\nimport { Point } from \"../geometry/point\";\nimport { lerp } from \"../utils/lerp\";\n\nfunction convertOTCoordinates(\n    otfont: OTFont, x: number, y: number\n): {x: number, y: number} {\n    const scaleFactor = 512 / otfont.tables.os2.sCapHeight\n\n    return {\n        x: x * scaleFactor,\n        y: (otfont.tables.os2.sCapHeight - y) * scaleFactor // easier to work with\n    }\n}\n\nexport function generateCurvesFromOTGlyph(\n    otfont: OTFont, otglyph: OTGlyph\n): BezierCurve[] {\n    const curves: BezierCurve[] = []\n    let curve = new BezierCurve()\n\n    const conv = (\n        x: number, y: number\n    ) => convertOTCoordinates(otfont, x, y)\n    \n    ///@ts-ignore\n    otglyph.path.commands.forEach(\n        (cmd: PathCommand) => {\n            switch (cmd.type) {\n                case \"M\": {\n                    if (curve.points.length)\n                        curves.push(curve)\n                    \n                    curve = new BezierCurve()\n                    \n                    const coords = conv(cmd.x, cmd.y)\n                    curve.addPoint(\n                        new BezierPoint(\n                            new Point(coords.x, coords.y),\n                            new Point(coords.x, coords.y),\n                            new Point(coords.x, coords.y),\n                            BezierPointType.free\n                        )\n                    )\n\n                    break\n                }\n                case \"L\": {\n                    const coords = conv(cmd.x, cmd.y)\n                    curve.addPoint(\n                        new BezierPoint(\n                            new Point(coords.x, coords.y),\n                            new Point(coords.x, coords.y),\n                            new Point(coords.x, coords.y)\n                        )\n                    )\n\n                    break\n                }\n                case \"C\": {\n                    const c1coords = conv(cmd.x1, cmd.y1)\n                    const c2coords = conv(cmd.x2, cmd.y2)\n                    const coords = conv(cmd.x, cmd.y)\n\n                    if (!curve.points.length) return // WHO MALFORMED MY OTF\n                    const prevPoint = curve.points[curve.points.length - 1]\n                    prevPoint.after.x = c1coords.x\n                    prevPoint.after.y = c1coords.y\n\n                    curve.addPoint(\n                        new BezierPoint(\n                            new Point(coords.x, coords.y),\n                            new Point(c2coords.x, c2coords.y),\n                            new Point(coords.x, coords.y)\n                        )\n                    )\n\n                    break\n                }\n                case \"Q\": {\n                    const c1coords = conv(cmd.x1, cmd.y1)\n                    const coords = conv(cmd.x, cmd.y)\n\n                    if (!curve.points.length) return // WHO MALFORMED MY OTF\n                    const prevPoint = curve.points[curve.points.length - 1]\n                    prevPoint.after.x = lerp(1/3, c1coords.x, prevPoint.base.x)\n                    prevPoint.after.y = lerp(1/3, c1coords.y, prevPoint.base.y)\n\n                    curve.addPoint(\n                        new BezierPoint(\n                            new Point(coords.x, coords.y),\n                            new Point(\n                                lerp(1/3, c1coords.x, coords.x),\n                                lerp(1/3, c1coords.y, coords.y)\n                            ),\n                            new Point(coords.x, coords.y)\n                        )\n                    )\n\n                    break\n                }\n                case \"Z\": {\n                    if (curve.points.length) {\n                        const first = curve.points[0]\n\n                        if (curve.points.length > 1) {\n                            const last = curve.points[curve.points.length - 1]\n\n                            if (\n                                first.base.x === last.base.x &&\n                                first.base.y === last.base.y\n                            ) {\n                                first.before.x = last.before.x\n                                first.before.y = last.before.y\n\n                                curve.points.splice(curve.points.length - 1, 1)\n                            }\n                        }\n\n                        curve.points.forEach(p => p.determineType())\n                        curves.push(curve)\n                    }\n                    \n                    curve = new BezierCurve()\n                    \n                    break\n                }\n            }\n        }\n    )\n\n    if (curve.points.length) {\n        curve.points.forEach(p => p.determineType())\n        curves.push(curve)\n    }\n\n    return curves\n}\n\nexport async function importFont(filePath: string): Promise<Font> {\n    return new Promise<Font>(\n        (resolve, reject) => {\n            load(filePath, (err, otfont) => {\n                const font = Font.fromOTFont(otfont)\n            \n                const glyphs: Glyph[] = []\n                for (let i = 0; i < otfont.glyphs.length; i++) {\n                    glyphs.push(\n                        Glyph.fromOTGlyph(\n                            font, otfont,\n                            otfont.glyphs.get(i)\n                        )\n                    )\n                }\n                font.addGlyph(...glyphs)\n\n                resolve(font)\n            })\n        }\n    )\n}","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./app.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./editor.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./main.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./welcome.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","import { accelStringToUserFriendly } from \"../utils/accelerator\";\nimport { ToolSubAction } from \"../viewport/tools/tool\";\nimport { Viewport } from \"../viewport/viewport\";\n\nconst subactionContainer = document.querySelector(\"div.subactions\")\n\nexport function updateSubactions(viewport: Viewport, subactionGroups: ToolSubAction[][]) {\n    subactionContainer.innerHTML = \"\"\n\n    for (const group of subactionGroups) {\n        const subactionGroup = document.createElement(\"div\")\n\n        for (const subaction of group) {\n            const button = document.createElement(\"button\")\n            button.title = `${subaction.name}${\n                subaction.accelerator ? ` (${\n                    accelStringToUserFriendly(subaction.accelerator)\n                })` : \"\"\n            }`\n\n            button.addEventListener(\"click\", () => {\n                subaction.handler()\n                viewport.render()\n            })\n\n            button.innerHTML = `\n                <img src=\"res/icons/${subaction.icon}.svg\">\n            `\n\n            subactionGroup.appendChild(button)\n        }\n\n        subactionContainer.appendChild(subactionGroup)\n    }\n}","import { Glyph } from \"../font/glyph\"\nimport { GlyphContext } from \"../viewport/context/glyph\"\nimport { Viewport } from \"../viewport/viewport\"\n\nconst glyphBar = document.querySelector(\"div.glyphBar\") as HTMLDivElement\n\nexport function getGlyphBarGlyphs(allGlyphs: Glyph[]) {\n    const glyphs: Glyph[] = []\n\n    glyphBar.childNodes.forEach(\n        node => {\n            if (node instanceof Text) {\n                glyphs.push(\n                    ...node.textContent.split(\"\").map(\n                        chr => allGlyphs.find(\n                            g => g.codePoint === chr.codePointAt(0)\n                        )\n                    )\n                )\n            } else if (node instanceof HTMLDivElement) {\n                glyphs.push(\n                    allGlyphs.find(g => g.name === node.textContent)\n                )\n            }\n        }\n    )\n\n    return glyphs\n}\n\nexport function appendCharacter(glyph: Glyph) {\n    if (glyph.codePoint >= 32) {\n        glyphBar.append(\n            String.fromCharCode(glyph.codePoint)\n        )\n    } else {\n        const nonTextGlyph = document.createElement(\"div\")\n        nonTextGlyph.className = \"ntglyph\"\n        nonTextGlyph.contentEditable = \"false\"\n\n        nonTextGlyph.innerHTML = `<span>${glyph.name}</span>`\n\n        glyphBar.appendChild(nonTextGlyph)\n    }\n    glyphBar.dispatchEvent(new InputEvent(\"input\"))\n}\n\nexport function prepareGlyphBar(viewport: Viewport) {\n    glyphBar.addEventListener(\"input\", () => {\n        if (!(viewport.context instanceof GlyphContext)) return\n\n        const glyphs = getGlyphBarGlyphs(\n            viewport.context.glyph.font.glyphs\n        )\n        if (!glyphs.length) return\n\n        viewport.context.setGlyphs(glyphs)\n        viewport.tool.updateContext(viewport.context)\n        viewport.render()\n    })\n\n    document.querySelector(\"button.prevGlyph\").addEventListener(\n        \"click\", () => {\n            if (!(viewport.context instanceof GlyphContext)) return\n\n            viewport.context.setGlyphs(\n                null, viewport.context.currentIndex === 0 ?\n                      viewport.context.glyphs.length - 1 :\n                      viewport.context.currentIndex - 1\n            )\n            viewport.tool.updateContext(viewport.context)\n            viewport.render()\n        }\n    )\n    document.querySelector(\"button.nextGlyph\").addEventListener(\n        \"click\", () => {\n        if (!(viewport.context instanceof GlyphContext)) return\n\n            viewport.context.setGlyphs(\n                null, viewport.context.currentIndex === viewport.context.glyphs.length - 1 ?\n                      0 :\n                      viewport.context.currentIndex + 1\n            )\n            viewport.tool.updateContext(viewport.context)\n            viewport.render()\n        }\n    )\n}\n","import { Font } from \"../font/font\"\nimport { Glyph } from \"../font/glyph\"\nimport { BezierCurve } from \"../geometry/bezier/curve\"\nimport { appendCharacter } from \"./glyphBar\"\n\nconst glyphListContainer = document.querySelector(\"div.glyphList\")\n\nfunction drawGlyphPreview(glyph: Glyph) {\n    const canvas: HTMLCanvasElement = glyphListContainer.querySelector(\n        `div[data-name=\"${glyph.name}\"] canvas`\n    )\n    if (!canvas) return\n\n    const ctx = canvas.getContext(\"2d\")\n\n    ctx.resetTransform()\n    ctx.clearRect(0, 0, 90, 90)\n    \n    const path = BezierCurve.getPath2D(\n        glyph.finalBeziers\n    )\n\n    const width = (\n        glyph.metrics.rightBearing - glyph.metrics.leftBearing\n    ) * 50 / 512\n\n    ctx.translate((90 - width) / 2, 20)\n    ctx.scale(50 / 512, 50 / 512)\n    ctx.fillStyle = \"#000\"\n    ctx.fill(path)\n}\n\nexport function setActiveGlyph(glyph: Glyph) {\n    const currentActiveGlyph = glyphListContainer.querySelector(\n        \"div.glyph.active\"\n    )\n    if (currentActiveGlyph)\n        currentActiveGlyph.classList.remove(\"active\")\n    \n    document.querySelector(\n        `div[data-name=\"${glyph.name}\"]`\n    ).classList.add(\"active\")\n}\n\nexport function prepareGlyphList(font: Font) {\n    glyphListContainer.innerHTML = \"\"\n\n    font.glyphs.sort(\n        (g1, g2) => g1.comparableCodePoint - g2.comparableCodePoint\n    ).forEach(\n        glyph => {\n            const glyphDiv = document.createElement(\"div\")\n            glyphDiv.className = \"glyph\"\n            glyphDiv.setAttribute(\"data-name\", glyph.name)\n\n            const glyphLabel = document.createElement(\"label\")\n            glyphLabel.textContent = glyph.name\n            glyphDiv.appendChild(glyphLabel)\n\n            const glyphCanvas = document.createElement(\"canvas\")\n            glyphCanvas.width = 90\n            glyphCanvas.height = 90\n            glyphDiv.appendChild(glyphCanvas)\n\n            glyphListContainer.appendChild(glyphDiv)\n\n            glyphDiv.addEventListener(\"dblclick\", () => {\n                appendCharacter(glyph)\n            })\n\n            drawGlyphPreview(glyph)\n        }\n    )\n\n    font.on(\"glyphModified\", (glyph: Glyph) => {\n        drawGlyphPreview(glyph)\n    })\n}","import { accelStringToUserFriendly } from \"../utils/accelerator\"\nimport { ITool } from \"../viewport/tools/tool\"\n\nexport function setActiveTool(\n    index: number\n) {\n    const toolbar = document.querySelector(\"div.tools\")\n    toolbar.querySelector(\"button.active\").classList.remove(\"active\")\n\n    toolbar.children[index].classList.add(\"active\")\n}\n\nexport function prepareToolbar(\n    tools: ITool[],\n    defaultTool: ITool,\n    callback: (t: ITool) => void\n) {\n    const toolbar = document.querySelector(\"div.tools\")\n    toolbar.innerHTML = \"\"\n\n    tools.forEach(\n        tool => {\n            const button = document.createElement(\"button\")\n\n            button.title = `${tool.name} (${\n                accelStringToUserFriendly(tool.accelerator)\n            })`\n            button.innerHTML = `\n                <img src=\"res/icons/${tool.icon}.svg\">\n            `\n\n            if (tool === defaultTool)\n                button.classList.add(\"active\")\n\n            button.addEventListener(\"click\", () => {\n                toolbar.querySelector(\"button.active\").classList.remove(\n                    \"active\"\n                )\n\n                callback(tool)\n                button.classList.add(\"active\")\n            })\n\n            toolbar.appendChild(button)\n        }\n    )\n}","import { IContext } from \"../viewport/context/context\"\nimport { Viewport } from \"../viewport/viewport\"\n\nexport function setupViewport(context: IContext) {\n    const container = document.querySelector(\"div.viewport\")\n    \n    const prevViewport = container.querySelector(\"canvas\")\n    if (prevViewport) {\n        container.removeChild(prevViewport)\n    }\n\n    const viewport = new Viewport(\n        context, [], null\n    )\n    \n    container.appendChild(viewport.domCanvas)\n    \n    window.addEventListener(\"resize\", () => {\n        viewport.updateViewportSize()\n    })\n\n    return viewport\n}","import { IUndoableAction } from \"./action\"\n\nexport class ArrayAddAction<T> implements IUndoableAction {\n    constructor(\n        private target: T[],\n        private object: T,\n        private index: number\n    ) {}\n\n    undo() {\n        this.target.splice(this.index, 1)\n    }\n\n    redo() {\n        this.target.splice(this.index, 0, this.object)\n    }\n\n    finalize() {}\n}\n\nexport class ArrayRemoveAction<T> implements IUndoableAction {\n    constructor(\n        private target: T[],\n        private object: T,\n        private index: number\n    ) {}\n\n    undo() {\n        this.target.splice(this.index, 0, this.object)\n    }\n\n    redo() {\n        this.target.splice(this.index, 1)\n    }\n\n    finalize() {}\n}","import { EventEmitter } from \"events\"\nimport { IUndoableAction } from \"./action\"\n\ntype VCAObjectState = {\n    [key: string]: any\n}\n\nexport class ValueChangeAction implements IUndoableAction {\n    private beforeState: VCAObjectState = {}\n    private afterState: VCAObjectState = {}\n\n    constructor(\n        private target: any,\n        private keys: string[]\n    ) {\n        this.captureState(this.beforeState)\n    }\n\n    private captureState(stateTarget: VCAObjectState) {\n        this.keys.forEach(\n            key => stateTarget[key] = this.target[key]\n        )\n    }\n\n    undo() {\n        Object.assign(this.target, this.beforeState)\n        if (this.target instanceof EventEmitter)\n            this.target.emit(\"modified\")\n    }\n\n    redo() {\n        Object.assign(this.target, this.afterState)\n        if (this.target instanceof EventEmitter)\n            this.target.emit(\"modified\")\n    }\n\n    finalize() {\n        this.captureState(this.afterState)\n    }\n}","import { IUndoableAction } from \"./actions/action\"\n\n\nexport class UndoContext {\n    public actions: IUndoableAction[] = []\n\n    public name: string = \"Unknown\"\n\n    addAction(...actions: IUndoableAction[]) {\n        this.actions.push(...actions)\n    }\n\n    undo() {\n        for (let i = this.actions.length - 1; i >= 0; i--) {\n            this.actions[i].undo()\n        }\n    }\n\n    redo() {\n        for (let i = 0; i < this.actions.length; i++) {\n            this.actions[i].redo()\n        }\n    }\n\n    finalize(name?: string) {\n        this.actions.forEach(a => a.finalize())\n        if (name) this.name = name\n    }\n}","import { UndoContext } from \"./context\"\n\nlet undoContexts: UndoContext[] = []\nlet redoContexts: UndoContext[] = []\n\nexport let undoContext = new UndoContext()\n\nexport function finalizeUndoContext(name?: string) {\n    if (undoContext.actions.length) {\n        undoContext.finalize(name)\n        undoContexts.push(undoContext)\n\n        if (redoContexts.length)\n            redoContexts = []\n    }\n    undoContext = new UndoContext()\n}\n\nexport function canUndo() {\n    return undoContexts.length > 0\n}\n\nexport function canRedo() {\n    return redoContexts.length > 0\n}\n\nexport function undo() {\n    if (!canUndo()) return\n\n    const ctx = undoContexts.pop()\n    redoContexts.unshift(ctx)\n\n    ctx.undo()\n}\n\nexport function redo() {\n    if (!canRedo()) return\n\n    const ctx = redoContexts.shift()\n    undoContexts.push(ctx)\n\n    ctx.redo()\n}","export function accelStringToUserFriendly(str: string) {\n    return str.replace(\"^\", \"Ctrl-\")\n              .replace(\"+\", \"Shift-\")\n              .replace(\"!\", \"Alt-\")\n              .replace(\"Key\", \"\")\n}","export function lerp(x: number, a: number, b: number) {\n    return a + x * (b - a)\n}\n\nexport function unlerp(X: number, a: number, b: number) {\n    if (a === b) return 0\n    return (X - a) / (b - a)\n}","import { BezierCurve } from \"../../geometry/bezier/curve\";\nimport { IDrawableHandle } from \"../drawable\";\nimport { IGuide } from \"../guides/guide\";\nimport { Viewport } from \"../viewport\";\nimport { IContext } from \"./context\";\n\nexport class BezierContext implements IContext {\n    public handles: IDrawableHandle[] = []\n    public guides: IGuide[] = []\n    public grids: IGuide[] = []\n\n    constructor(\n        public beziers: BezierCurve[]\n    ) {}\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        // Nothing tbh\n    }\n}","import { Glyph } from \"../../font/glyph\";\nimport { BezierCurve } from \"../../geometry/bezier/curve\";\nimport { setActiveGlyph } from \"../../ui/glyphList\";\nimport { CurveGuide } from \"../guides/curve\";\nimport { GridGuide } from \"../guides/grid\";\nimport { HorizontalGuide, VerticalGuide } from \"../guides/line\";\nimport { FontMetricHandle, FontMetricHandleType } from \"../handles/fontMetric\";\nimport { Viewport } from \"../viewport\";\nimport { BezierContext } from \"./bezier\";\n\nexport class GlyphContext extends BezierContext {\n    constructor(\n        public glyphs: Glyph[],\n        public currentIndex: number\n    ) {\n        super(glyphs[currentIndex].beziers)\n\n        this.setupHandlesAndGuides()\n        \n        setActiveGlyph(this.glyph)\n    }\n\n    get glyph() {\n        return this.glyphs[this.currentIndex]\n    }\n\n    setupHandlesAndGuides() {\n        this.handles = [\n            new FontMetricHandle(this.glyph, FontMetricHandleType.leftBearing),\n            new FontMetricHandle(this.glyph, FontMetricHandleType.rightBearing),\n            new FontMetricHandle(this.glyph, FontMetricHandleType.ascender),\n            new FontMetricHandle(this.glyph, FontMetricHandleType.descender),\n            new FontMetricHandle(this.glyph, FontMetricHandleType.xHeight)\n        ]\n\n        this.grids = [\n            new GridGuide(16)\n        ]\n        \n        this.guides = [\n            new HorizontalGuide(0),\n            new HorizontalGuide(512),\n            new HorizontalGuide(() => this.glyph.font.metrics.ascender, this.handles[2]),\n            new HorizontalGuide(() => this.glyph.font.metrics.descender, this.handles[3]),\n            new HorizontalGuide(() => this.glyph.font.metrics.xHeight, this.handles[4]),\n            new VerticalGuide(() => this.glyph.metrics.leftBearing, this.handles[0]),\n            new VerticalGuide(() => this.glyph.metrics.rightBearing, this.handles[1])\n        ]\n\n        this.beziers.forEach(\n            b => this.guides.push(\n                new CurveGuide(b)\n            )\n        )\n\n        // for (let bezier of this.beziers) {\n        //     for (let point of bezier.points) {\n        //         this.guides.push(\n        //             new PointGuide(point.base)\n        //         )\n        //     }\n        // }\n    }\n\n    setGlyphs(glyphs?: Glyph[], currentIndex?: number) {\n        if (glyphs)\n            this.glyphs = glyphs\n        \n        if (typeof currentIndex === \"number\")\n            this.currentIndex = currentIndex\n        else if (this.currentIndex >= this.glyphs.length)\n            this.currentIndex = this.glyphs.length - 1\n        \n        this.beziers = this.glyph.beziers\n        this.setupHandlesAndGuides()\n        \n        setActiveGlyph(this.glyph)\n    }\n\n    renderNonEditableGlyphs(v: Viewport, ctx: CanvasRenderingContext2D) {\n        let currentOffset = 0\n\n        if (this.currentIndex < this.glyphs.length - 1) {\n            for (let i = this.currentIndex + 1; i < this.glyphs.length; i++) {\n                const prevGlyph = this.glyphs[i - 1]\n                const glyph = this.glyphs[i]\n\n                const offset = prevGlyph.metrics.rightBearing -\n                               glyph.metrics.leftBearing\n\n                const path = BezierCurve.getPath2D(\n                    glyph.finalBeziers\n                )\n                \n                ctx.fillStyle = \"#000\"\n                ctx.translate(offset, 0)\n                ctx.fill(path)\n\n                this.renderGlyphIndicator(v, ctx, glyph)\n\n                currentOffset += offset\n            }\n        }\n        ctx.translate(-currentOffset, 0)\n        currentOffset = 0\n\n        if (this.currentIndex > 0) {\n            for (let i = this.currentIndex - 1; i >= 0; i--) {\n                const nextGlyph = this.glyphs[i + 1]\n                const glyph = this.glyphs[i]\n\n                const offset = nextGlyph.metrics.leftBearing -\n                               glyph.metrics.rightBearing\n\n                const path = BezierCurve.getPath2D(\n                    glyph.finalBeziers\n                )\n                \n                ctx.fillStyle = \"#000\"\n                ctx.translate(offset, 0)\n                ctx.fill(path)\n\n                this.renderGlyphIndicator(v, ctx, glyph)\n\n                currentOffset += offset\n\n            }\n        }\n        ctx.translate(-currentOffset, 0)\n        currentOffset = 0\n    }\n\n    renderGlyphIndicator(\n        v: Viewport, ctx: CanvasRenderingContext2D, glyph: Glyph\n    ) {\n        const x = glyph.metrics.leftBearing\n        const w = glyph.metrics.rightBearing - x\n        const y = glyph.font.metrics.ascender - 20 / v.co.scaleFactor\n\n        ctx.fillStyle = (this.glyph === glyph) ? \"#aaa\" : \"#eee\"\n        ctx.fillRect(x, y - 8 / v.co.scaleFactor, w, 8 / v.co.scaleFactor)\n\n        ctx.font = `400 ${20 / v.co.scaleFactor}px Inter`\n        ctx.textAlign = \"center\"\n        ctx.fillStyle = (this.glyph === glyph) ? \"#555\" : \"#aaa\"\n        ctx.fillText(glyph.name, x + w / 2, y - 16 / v.co.scaleFactor)\n    }\n    \n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        this.renderNonEditableGlyphs(v, ctx)\n\n        // Glyph metric lines\n        ctx.strokeStyle = \"#3338\"\n        ctx.lineWidth = 1 / v.co.scaleFactor\n\n        ctx.beginPath()\n\n        ctx.moveTo(-9999, 512) // 512 is the bottom - baseline\n        ctx.lineTo(9999, 512)\n        \n        ctx.moveTo(-9999, 0) // 0 is the top - cap height\n        ctx.lineTo(9999, 0)\n        ctx.stroke()\n\n        ctx.setLineDash(\n            [10 / v.co.scaleFactor, 10 / v.co.scaleFactor]\n        )\n\n        // x-height\n        ctx.beginPath()\n        ctx.moveTo(-9999, this.glyph.font.metrics.xHeight)\n        ctx.lineTo(9999, this.glyph.font.metrics.xHeight)\n\n        // Ascender\n        ctx.moveTo(-9999, this.glyph.font.metrics.ascender)\n        ctx.lineTo(9999, this.glyph.font.metrics.ascender)\n\n        // Descender\n        ctx.moveTo(-9999, this.glyph.font.metrics.descender)\n        ctx.lineTo(9999, this.glyph.font.metrics.descender)\n\n        ctx.moveTo(this.glyph.metrics.leftBearing, -9999)\n        ctx.lineTo(this.glyph.metrics.leftBearing, 9999)\n\n        ctx.moveTo(this.glyph.metrics.rightBearing, -9999)\n        ctx.lineTo(this.glyph.metrics.rightBearing, 9999)\n\n        ctx.stroke()\n\n        // Glyph\n        const workingPath = BezierCurve.getPath2D(\n            this.glyph.beziers\n        )\n        const finalPath = BezierCurve.getPath2D(\n            this.glyph.finalBeziers\n        )\n\n        ctx.fillStyle = \"#888\"\n        ctx.fill(finalPath)\n        \n        ctx.setLineDash([])\n        ctx.strokeStyle = \"#fff\"\n        ctx.lineWidth = 4 / v.co.scaleFactor\n        ctx.stroke(workingPath)\n        ctx.strokeStyle = \"#000\"\n        ctx.lineWidth = 1 / v.co.scaleFactor\n        ctx.stroke(workingPath)\n\n        this.renderGlyphIndicator(v, ctx, this.glyph)\n    }\n}","import { Point } from \"../geometry/point\"\n\nexport class ViewportCoordinates {\n    public dx = 0\n    public dy = 0\n    public scaleFactor = 1\n\n    // dx, dy in screen coordinates\n    translate(dx: number, dy: number) {\n        this.dx += dx\n        this.dy += dy\n    }\n\n    scale(factor: number, ox: number, oy: number) {\n        const newScale = this.scaleFactor * factor\n\n        this.dx = this.dx + this.scaleFactor * ox - newScale * ox\n        this.dy = this.dy + this.scaleFactor * oy - newScale * oy\n\n        this.scaleFactor = newScale\n    }\n\n    transformCanvas(ctx: CanvasRenderingContext2D) {\n        ctx.translate(this.dx, this.dy)\n        ctx.scale(this.scaleFactor, this.scaleFactor)\n    }\n\n    clientToWorld(x: number, y: number): Point {\n        return new Point(\n            (x - this.dx) / this.scaleFactor,\n            (y - this.dy) / this.scaleFactor\n        )\n    }\n\n    worldToClient(x: number, y: number) {\n        return {\n            x: x * this.scaleFactor + this.dx,\n            y: y * this.scaleFactor + this.dy\n        }\n    }\n\n    moveInClientDx(point: Point, dx: number, dy: number) {\n        const pos = this.worldToClient(point.x, point.y)\n        pos.x += dx\n        pos.y += dy\n\n        const {x, y} = this.clientToWorld(pos.x, pos.y)\n        point.x = x\n        point.y = y\n    }\n}","import { BezierCurve } from \"../../geometry/bezier/curve\"\nimport { Point } from \"../../geometry/point\"\nimport { BezierBasePointHandle } from \"../handles/bezierBasePoint\"\nimport { Viewport } from \"../viewport\"\nimport { IGuide } from \"./guide\"\nimport paper from \"paper\"\n\nexport class CurveGuide implements IGuide {\n    public active = false\n    public worldRender = true\n\n    constructor(\n        public source: BezierCurve\n    ) { }\n\n    nudge(v: Viewport, pos: Point, obj?: any) {\n        if (\n            obj instanceof BezierBasePointHandle &&\n            obj.point.curve === this.source\n        )\n            return\n\n        const paperPath = this.source.getPaperPath()\n        const paperPoint = new paper.Point(pos.x, pos.y)\n\n        const nearest = paperPath.getNearestPoint(paperPoint)\n        if (!nearest) {\n            this.active = false\n            return\n        }\n\n        const clientPos = v.co.worldToClient(pos.x, pos.y)\n        const clientTarget = v.co.worldToClient(\n            nearest.x, nearest.y\n        )\n\n        if (Math.hypot(\n            clientPos.x - clientTarget.x,\n            clientPos.y - clientTarget.y\n        ) < 10) {\n            pos.x = nearest.x\n            pos.y = nearest.y\n            this.active = true\n        } else {\n            this.active = false\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        const path = BezierCurve.getPath2D([this.source])\n\n        ctx.lineWidth = 1 / v.co.scaleFactor\n        ctx.strokeStyle = \"#f0f\"\n        ctx.stroke(path)\n    }\n}","import { Point } from \"../../geometry/point\";\nimport { Viewport } from \"../viewport\";\nimport { IGuide } from \"./guide\";\n\nexport class GridGuide implements IGuide {\n    public active = false\n    private lastPoint = new Point(\n        -100000, -100000\n    )\n\n    constructor(\n        private gap: number\n    ) {}\n\n    nudge(v: Viewport, pos: Point, obj?: any) {\n        const target = new Point(\n            Math.round(pos.x / this.gap) * this.gap,\n            Math.round(pos.y / this.gap) * this.gap\n        )\n        const delta = 8 / v.co.scaleFactor\n\n        this.active = false\n\n        this.lastPoint.x = NaN\n        this.lastPoint.y = NaN\n\n        if (Math.abs(pos.x - target.x) < delta) {\n            pos.x = target.x\n\n            this.lastPoint.x = target.x\n            this.active = true\n        }\n        if (Math.abs(pos.y - target.y) < delta) {\n            pos.y = target.y\n\n            this.lastPoint.y = target.y\n            this.active = true\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        const minXY = v.co.clientToWorld(0, 0)\n        const maxXY = v.co.clientToWorld(\n            v.domCanvas.width, v.domCanvas.height\n        )\n\n        minXY.x = Math.round(minXY.x / this.gap) * this.gap\n        minXY.y = Math.round(minXY.y / this.gap) * this.gap\n        maxXY.x = Math.round(maxXY.x / this.gap) * this.gap\n        maxXY.y = Math.round(maxXY.y / this.gap) * this.gap\n\n        ctx.lineWidth = 1\n\n        for (let x = minXY.x; x <= maxXY.x; x += this.gap) {\n            const client = v.co.worldToClient(x, 0)\n\n            ctx.beginPath()\n            ctx.moveTo(Math.round(client.x) + 0.5, -9999)\n            ctx.lineTo(Math.round(client.x) + 0.5, 9999)\n            ctx.strokeStyle = \"#3332\"\n\n            if (\n                this.active && this.lastPoint.x === x\n            )\n                ctx.strokeStyle = \"#f0f\"\n\n            ctx.stroke()\n        }\n        for (let y = minXY.y; y <= maxXY.y; y += this.gap) {\n            const client = v.co.worldToClient(0, y)\n\n            ctx.beginPath()\n            ctx.moveTo(-9999, Math.round(client.y) + 0.5)\n            ctx.lineTo(9999, Math.round(client.y) + 0.5)\n            ctx.strokeStyle = \"#3332\"\n\n            if (\n                this.active && this.lastPoint.y === y\n            )\n                ctx.strokeStyle = \"#f0f\"\n\n            ctx.stroke()\n        }\n        \n    }\n}","import { Point } from \"../../geometry/point\"\nimport { Viewport } from \"../viewport\"\nimport { IGuide } from \"./guide\"\n\nexport class HorizontalGuide implements IGuide {\n    public active = false\n\n    constructor(\n        private valueHandler: number | (() => number),\n        public source?: any\n    ) { }\n\n    get value() {\n        if (this.valueHandler instanceof Function)\n            return this.valueHandler()\n\n        return this.valueHandler\n    }\n\n    nudge(v: Viewport, pos: Point, obj?: any) {\n        if (obj && this.source && obj === this.source) {\n            this.active = false\n            return\n        }\n\n        const clientPos = v.co.worldToClient(pos.x, pos.y)\n        const clientTarget = v.co.worldToClient(pos.x, this.value)\n\n        if (Math.abs(clientPos.y - clientTarget.y) < 8) {\n            pos.y = this.value\n            this.active = true\n        } else {\n            this.active = false\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        const clientPos = v.co.worldToClient(\n            0, this.value\n        )\n        clientPos.y = Math.round(clientPos.y) + 0.5\n\n        ctx.strokeStyle = \"#f0f\"\n        ctx.lineWidth = 1\n\n        ctx.beginPath()\n        ctx.moveTo(-9999, clientPos.y)\n        ctx.lineTo(9999, clientPos.y)\n        ctx.stroke()\n    }\n}\n\nexport class VerticalGuide implements IGuide {\n    public active = false\n\n    constructor(\n        private valueHandler: number | (() => number),\n        public source?: any\n    ) { }\n\n    get value() {\n        if (this.valueHandler instanceof Function)\n            return this.valueHandler()\n\n        return this.valueHandler\n    }\n\n    nudge(v: Viewport, pos: Point, obj?: any) {\n        if (obj && this.source && obj === this.source) {\n            this.active = false\n            return\n        }\n\n        const clientPos = v.co.worldToClient(pos.x, pos.y)\n        const clientTarget = v.co.worldToClient(this.value, pos.y)\n\n        if (Math.abs(clientPos.x - clientTarget.x) < 8) {\n            pos.x = this.value\n            this.active = true\n        } else {\n            this.active = false\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        const clientPos = v.co.worldToClient(\n            this.value, 0\n        )\n        clientPos.x = Math.round(clientPos.x) + 0.5\n\n        ctx.strokeStyle = \"#f0f\"\n        ctx.lineWidth = 1\n\n        ctx.beginPath()\n        ctx.moveTo(clientPos.x, -9999)\n        ctx.lineTo(clientPos.x, 9999)\n        ctx.stroke()\n    }\n}\n","import { Point } from \"../../geometry/point\"\nimport { IDrawableHandle } from \"../drawable\"\nimport { Viewport } from \"../viewport\"\nimport { IGuide } from \"./guide\"\n\nexport class PointGuide implements IGuide {\n    public active = false\n\n    constructor(\n        public source: Point\n    ) { }\n\n    nudge(v: Viewport, pos: Point, obj?: any) {\n        if (\n            obj && this.source &&\n            (\n                obj === this.source ||\n                (\n                    \"position\" in obj &&\n                    obj.position === this.source\n                )\n            )\n        ) {\n            this.active = false\n            return\n        }\n\n        const clientPos = v.co.worldToClient(pos.x, pos.y)\n        const clientTarget = v.co.worldToClient(\n            this.source.x, this.source.y\n        )\n\n        if (Math.hypot(\n            clientPos.x - clientTarget.x,\n            clientPos.y - clientTarget.y\n        ) < 10) {\n            pos.x = this.source.x\n            pos.y = this.source.y\n            this.active = true\n        } else {\n            this.active = false\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        const clientPos = v.co.worldToClient(\n            this.source.x, this.source.y\n        )\n        clientPos.x = Math.round(clientPos.x) + 0.5\n        clientPos.y = Math.round(clientPos.y) + 0.5\n\n        ctx.strokeStyle = \"#f0f\"\n        ctx.lineWidth = 1\n\n        ctx.beginPath()\n        ctx.moveTo(clientPos.x - 16, clientPos.y)\n        ctx.lineTo(clientPos.x + 16, clientPos.y)\n        ctx.moveTo(clientPos.x, clientPos.y - 16)\n        ctx.lineTo(clientPos.x, clientPos.y + 16)\n        ctx.stroke()\n    }\n}\n\nexport class HandleGuide extends PointGuide {\n    constructor(\n        public handle: IDrawableHandle\n    ) {\n        super(handle.position)\n    }\n\n    nudge(v: Viewport, pos: Point, obj?: any) {\n        if (\n            this.handle.selected ||\n            this.handle === obj\n        ) return\n        super.nudge(v, pos, obj)\n    }\n}","import { BezierPoint, BezierPointType } from \"../../geometry/bezier/point\"\nimport { Point } from \"../../geometry/point\"\nimport { UndoContext } from \"../../undo/context\"\nimport { ValueChangeAction } from \"../../undo/actions/value\"\nimport { IDrawableHandle } from \"../drawable\"\nimport { Viewport } from \"../viewport\"\n\nexport class BezierBasePointHandle implements IDrawableHandle {\n    public hitRadius = 10\n    public selected = false\n    public type = \"BezierBasePointHandle\"\n    \n    constructor(\n        public point: BezierPoint\n    ) {}\n\n    get position() {\n        return this.point.base\n    }\n\n    move(\n        v: Viewport, pos: Point, dPos: Point,\n        pivot: IDrawableHandle,\n        e?: MouseEvent\n    ) {\n        this.point.movePoint(this.point.base, dPos)\n    }\n\n    prepareUndo(uc: UndoContext) {\n        uc.addAction(\n            new ValueChangeAction(this.point.base, [\"x\", \"y\"]),\n            new ValueChangeAction(this.point.before, [\"x\", \"y\"]),\n            new ValueChangeAction(this.point.after, [\"x\", \"y\"])\n        )\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        const angle = this.point.after.angle(\n            this.point.base\n        )\n\n        ctx.beginPath()\n        switch (this.point.type) {\n            case BezierPointType.auto:\n                ctx.moveTo(\n                    5 * Math.cos(angle),\n                    5 * Math.sin(angle)\n                )\n                ctx.lineTo(\n                    5 * Math.cos(angle + Math.PI / 2),\n                    5 * Math.sin(angle + Math.PI / 2)\n                )\n                ctx.lineTo(\n                    5 * Math.cos(angle + Math.PI),\n                    5 * Math.sin(angle + Math.PI)\n                )\n                ctx.lineTo(\n                    5 * Math.cos(angle + 3 * Math.PI / 2),\n                    5 * Math.sin(angle + 3 * Math.PI / 2)\n                )\n                break\n            case BezierPointType.sharp:\n                ctx.rect(-4, -4, 8, 8)\n                break\n            default:\n                ctx.arc(0, 0, 5, 0, Math.PI * 2)\n        }\n        ctx.closePath()\n\n        ctx.fillStyle = this.selected ? \"#111\" : \"#fff\"\n        ctx.strokeStyle = \"#111\"\n        ctx.lineWidth = 1\n        ctx.fill()\n        ctx.stroke()\n    }\n}","import { BezierPoint, BezierPointType } from \"../../geometry/bezier/point\"\nimport { Point } from \"../../geometry/point\"\nimport { UndoContext } from \"../../undo/context\"\nimport { ValueChangeAction } from \"../../undo/actions/value\"\nimport { IDrawableHandle } from \"../drawable\"\nimport { Viewport } from \"../viewport\"\n\nexport class BezierControlPointHandle implements IDrawableHandle {\n    public hitRadius = 6\n    public selected = false\n    public type = \"BezierControlPointHandle\"\n    \n    constructor(\n        public point: BezierPoint,\n        private cpoint: Point\n    ) {}\n\n    get position() {\n        return this.cpoint\n    }\n\n    move(\n        v: Viewport, pos: Point, dPos: Point,\n        pivot: IDrawableHandle,\n        e?: MouseEvent\n    ) {\n        // let forceType = null\n        // if (\n        //     this.point.type !== BezierPointType.free &&\n        //     e.altKey\n        // )\n        //     forceType = BezierPointType.free\n\n        this.point.movePoint(this.cpoint, dPos)\n    }\n\n    prepareUndo(uc: UndoContext) {\n        uc.addAction(\n            new ValueChangeAction(this.point.base, [\"x\", \"y\"]),\n            new ValueChangeAction(this.point.before, [\"x\", \"y\"]),\n            new ValueChangeAction(this.point.after, [\"x\", \"y\"])\n        )\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        const basePos = v.co.worldToClient(\n            this.point.base.x, this.point.base.y\n        )\n        const ctrlPos = v.co.worldToClient(\n            this.cpoint.x, this.cpoint.y\n        )\n\n        ctx.strokeStyle = \"#555\"\n        ctx.lineWidth = 1\n        ctx.beginPath()\n        ctx.moveTo(\n            basePos.x - ctrlPos.x,\n            basePos.y - ctrlPos.y\n        )\n        ctx.lineTo(0, 0)\n        ctx.stroke()\n\n        ctx.fillStyle = this.selected ? \"#111\" : \"#555\"\n        ctx.beginPath()\n        ctx.arc(0, 0, 3, 0, 2 * Math.PI)\n        ctx.fill()\n    }\n}","import { Glyph } from \"../../font/glyph\"\nimport { Point } from \"../../geometry/point\"\nimport { UndoContext } from \"../../undo/context\"\nimport { ValueChangeAction } from \"../../undo/actions/value\"\nimport { IDrawableHandle } from \"../drawable\"\nimport { Viewport } from \"../viewport\"\n\nexport enum FontMetricHandleType {\n    leftBearing, rightBearing,\n    ascender, descender, xHeight\n}\n\nenum FontMetricHandleDir {\n    horz, vert\n}\n\nexport class FontMetricHandle implements IDrawableHandle {\n    public hitRadius = 10\n    public selected = false\n    public type = \"FontMetricHandle\"\n\n    private dir = FontMetricHandleDir.horz\n    \n    constructor(\n        private glyph: Glyph,\n        private metric: FontMetricHandleType\n    ) {\n        if (\n            metric === FontMetricHandleType.leftBearing ||\n            metric === FontMetricHandleType.rightBearing\n        )\n            this.dir = FontMetricHandleDir.vert\n    }\n\n    prepareUndo(uc: UndoContext) {\n        let action = null\n\n        switch (this.metric) {\n            case FontMetricHandleType.ascender:\n                action = new ValueChangeAction(this.glyph.font.metrics, [\"ascender\"])\n                break\n            case FontMetricHandleType.descender:\n                action = new ValueChangeAction(this.glyph.font.metrics, [\"descender\"])\n                break\n            case FontMetricHandleType.xHeight:\n                action = new ValueChangeAction(this.glyph.font.metrics, [\"xHeight\"])\n                break\n            \n            case FontMetricHandleType.leftBearing:\n                action = new ValueChangeAction(this.glyph.metrics, [\"leftBearing\"])\n                break\n            case FontMetricHandleType.rightBearing:\n                action = new ValueChangeAction(this.glyph.metrics, [\"rightBearing\"])\n                break\n        }\n\n        if (action) uc.addAction(action)\n    }\n\n    private get value() {\n        switch (this.metric) {\n            case FontMetricHandleType.ascender:\n                return this.glyph.font.metrics.ascender\n            case FontMetricHandleType.descender:\n                return this.glyph.font.metrics.descender\n            case FontMetricHandleType.xHeight:\n                return this.glyph.font.metrics.xHeight\n            \n            case FontMetricHandleType.leftBearing:\n                return this.glyph.metrics.leftBearing\n            case FontMetricHandleType.rightBearing:\n                return this.glyph.metrics.rightBearing\n        }\n\n        return 0\n    }\n\n    private set value(x: number) {\n        switch (this.metric) {\n            case FontMetricHandleType.ascender:\n                this.glyph.font.metrics.ascender = Math.min(x, 0)\n                break\n            case FontMetricHandleType.descender:\n                this.glyph.font.metrics.descender = Math.max(x, 512)\n                break\n            case FontMetricHandleType.xHeight:\n                this.glyph.font.metrics.xHeight = Math.max(Math.min(x, 512), 0)\n                break\n            \n            case FontMetricHandleType.leftBearing:\n                this.glyph.metrics.leftBearing = x\n                break\n            case FontMetricHandleType.rightBearing:\n                this.glyph.metrics.rightBearing = x\n                break\n        }\n\n        this.glyph.emit(\"modified\")\n    }\n\n    get position() {\n        if (this.dir === FontMetricHandleDir.horz)\n            return new Point(-20, this.value)\n        \n        return new Point(this.value, 532)\n    }\n\n    move(\n        v: Viewport, pos: Point, dPos: Point,\n        pivot: IDrawableHandle,\n        e?: MouseEvent\n    ) {\n        if (this.dir === FontMetricHandleDir.horz) {\n            this.value = pos.y\n        } else {\n            this.value = pos.x\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        ctx.beginPath()\n        ctx.arc(0, 0, 5, 0, 2 * Math.PI)\n        ctx.moveTo(0, 0)\n\n        if (this.dir === FontMetricHandleDir.horz)\n            ctx.lineTo(20 * v.co.scaleFactor, 0)\n        else\n            ctx.lineTo(0, -20 * v.co.scaleFactor)\n\n        ctx.fillStyle = this.selected ? \"#111\" : \"#444\"\n        ctx.strokeStyle = \"#111\"\n        ctx.lineWidth = 1\n        ctx.setLineDash([])\n        ctx.stroke()\n        ctx.fill()\n    }\n}","import { Glyph } from \"../../font/glyph\"\nimport { BezierCurve } from \"../../geometry/bezier/curve\"\nimport { BezierPoint, BezierPointType } from \"../../geometry/bezier/point\"\nimport { Point } from \"../../geometry/point\"\nimport { ArrayAddAction } from \"../../undo/actions/array\"\nimport { ValueChangeAction } from \"../../undo/actions/value\"\nimport { finalizeUndoContext, undoContext } from \"../../undo/history\"\nimport { BezierContext } from \"../context/bezier\"\nimport { IContext } from \"../context/context\"\nimport { GlyphContext } from \"../context/glyph\"\nimport { IDrawableHandle } from \"../drawable\"\nimport { IGuide } from \"../guides/guide\"\nimport { PointGuide } from \"../guides/point\"\nimport { BezierBasePointHandle } from \"../handles/bezierBasePoint\"\nimport { BezierControlPointHandle } from \"../handles/bezierControlPoint\"\nimport { Viewport } from \"../viewport\"\nimport { ITool, ToolSubAction } from \"./tool\"\n\nexport class BezierPenTool implements ITool {\n    public name = \"Pen\"\n    public icon = \"beziertool\"\n    public accelerator = \"KeyP\"\n\n    private currentBezier: BezierCurve = null\n    private finalAdjustmentStage = false\n\n    public handles: IDrawableHandle[] = []\n    public guides: IGuide[] = []\n    public supportsForeignHandles = false\n\n    public subactions: ToolSubAction[][] = []\n\n    get currentPoint(): BezierPoint {\n        if (!this.currentBezier) return null\n\n        if (this.finalAdjustmentStage)\n            return this.currentBezier.points[0]\n\n        return this.currentBezier.points[\n            this.currentBezier.points.length - 1\n        ]\n    }\n\n    handleMouseEvent(v: Viewport, e: MouseEvent, x: number, y: number) {\n        if (!(v.context instanceof BezierContext)) return\n\n        const pos = v.co.clientToWorld(\n            x, y\n        )\n        let glyph: Glyph = null\n        if (v.context instanceof GlyphContext)\n            glyph = v.context.glyph\n\n        v.nudgePoint(pos)\n\n        if (\n            e.type === \"mousedown\" && e.buttons & 1\n        ) {\n            if (!this.currentBezier) {\n                this.currentBezier = new BezierCurve(glyph)\n                const length = v.context.beziers.push(\n                    this.currentBezier\n                )\n\n                undoContext.addAction(\n                    new ArrayAddAction(\n                        v.context.beziers,\n                        this.currentBezier,\n                        length - 1\n                    )\n                )\n            }\n\n            const nearHandle = v.nearHandle(\n                pos.x, pos.y, \"BezierBasePointHandle\"\n            )\n            if (\n                nearHandle &&\n                nearHandle instanceof BezierBasePointHandle &&\n                nearHandle.position === this.currentBezier.points[0].base\n            ) {\n                // Forget the curve, but allow last adjustments\n                this.finalAdjustmentStage = true\n                undoContext.addAction(\n                    new ValueChangeAction(\n                        this.currentPoint.base, [\"x\", \"y\"]\n                    ),\n                    new ValueChangeAction(\n                        this.currentPoint.before, [\"x\", \"y\"]\n                    ),\n                    new ValueChangeAction(\n                        this.currentPoint.after, [\"x\", \"y\"]\n                    )\n                )\n            } else {\n                // Add a point\n                const point = new BezierPoint(\n                    new Point(pos.x, pos.y),\n                    new Point(pos.x, pos.y),\n                    new Point(pos.x, pos.y)\n                )\n                this.currentBezier.addPoint(point)\n                undoContext.addAction(\n                    new ArrayAddAction(\n                        this.currentBezier.points,\n                        point,\n                        this.currentBezier.points.length - 1\n                    )\n                )\n\n                const length = this.handles.push(\n                    new BezierControlPointHandle(point, point.before),\n                    new BezierControlPointHandle(point, point.after),\n                    new BezierBasePointHandle(point)\n                )\n                undoContext.addAction(\n                    new ArrayAddAction(\n                        this.handles,\n                        this.handles[length - 3],\n                        length - 3\n                    ),\n                    new ArrayAddAction(\n                        this.handles,\n                        this.handles[length - 2],\n                        length - 2\n                    ),\n                    new ArrayAddAction(\n                        this.handles,\n                        this.handles[length - 1],\n                        length - 1\n                    )\n                )\n            }\n        } else if (\n            e.type === \"mousemove\" && e.buttons & 1 &&\n            this.currentPoint\n        ) {\n            this.currentPoint.after.x = pos.x\n            this.currentPoint.after.y = pos.y\n\n            if (!e.altKey) {\n                this.currentPoint.type = BezierPointType.auto\n                this.currentPoint.before.x = 2 * this.currentPoint.base.x - pos.x\n                this.currentPoint.before.y = 2 * this.currentPoint.base.y - pos.y\n            } else {\n                this.currentPoint.type = BezierPointType.free\n            }\n        } else if (\n            e.type === \"mouseup\"\n        ) {\n            if (this.finalAdjustmentStage) {\n                this.handles = []\n                this.currentBezier = null\n\n                finalizeUndoContext(\"Close curve\")\n            } else if (this.currentBezier.points.length === 1) {\n                finalizeUndoContext(\"Create curve\")\n            } else {\n                finalizeUndoContext(\"Add point\")\n            }\n            this.finalAdjustmentStage = false\n            \n\n            if (v.context instanceof GlyphContext)\n                v.context.glyph.emit(\"modified\")\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n    }\n\n    updateContext(context: IContext) {\n        if (!(context instanceof BezierContext)) return\n\n        this.handles = []\n        this.guides = []\n        \n        for (let bezier of context.beziers) {\n            for (let point of bezier.points) {\n                this.guides.push(\n                    new PointGuide(point.base)\n                )\n            }\n        }\n    }\n}","import { BezierCurve } from \"../../geometry/bezier/curve\"\nimport { BezierPoint } from \"../../geometry/bezier/point\"\nimport { Point } from \"../../geometry/point\"\nimport { ArrayAddAction } from \"../../undo/actions/array\"\nimport { finalizeUndoContext, undoContext } from \"../../undo/history\"\nimport { lerp } from \"../../utils/lerp\"\nimport { BezierContext } from \"../context/bezier\"\nimport { IContext } from \"../context/context\"\nimport { GlyphContext } from \"../context/glyph\"\nimport { IDrawableHandle } from \"../drawable\"\nimport { IGuide } from \"../guides/guide\"\nimport { PointGuide } from \"../guides/point\"\nimport { Viewport } from \"../viewport\"\nimport { ITool, ToolSubAction } from \"./tool\"\n\n// ~ magic number ~\nconst magic = 4 * (Math.SQRT2 - 1) / 3\n\nexport class EllipseTool implements ITool {\n    public name = \"Ellipse\"\n    public icon = \"ellipsetool\"\n    public accelerator = \"KeyE\"\n\n    public handles: IDrawableHandle[] = []\n    public guides: IGuide[] = []\n    public supportsForeignHandles = false\n\n    public subactions: ToolSubAction[][] = []\n\n    private startPoint: Point\n\n    private currentBezier: BezierCurve\n\n    createEllipse(): BezierCurve {\n        const curve = new BezierCurve()\n\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n\n        return curve\n    }\n\n    updateEllipse(pos: Point, e: MouseEvent) {\n        const origin = new Point(\n            this.startPoint.x, this.startPoint.y\n        )\n        let radius = Math.abs(pos.y - origin.y)\n        let scale = Math.abs(\n            (pos.x - origin.x) / (pos.y - origin.y)\n        )\n\n        if (e.shiftKey) {\n            radius = Math.max(\n                radius, Math.abs(pos.x - origin.x)\n            )\n            scale = 1\n        }\n        if (!e.ctrlKey) {\n            radius /= 2\n            origin.x += radius * scale * Math.sign(pos.x - origin.x)\n            origin.y += radius * Math.sign(pos.y - origin.y)\n        }\n\n        this.currentBezier.points[0].base.x = origin.x\n        this.currentBezier.points[0].base.y = origin.y - radius\n        this.currentBezier.points[0].before.x = origin.x - magic * radius * scale\n        this.currentBezier.points[0].before.y = origin.y - radius\n        this.currentBezier.points[0].after.x = origin.x + magic * radius * scale\n        this.currentBezier.points[0].after.y = origin.y - radius\n\n        this.currentBezier.points[1].base.x = origin.x + radius * scale\n        this.currentBezier.points[1].base.y = origin.y\n        this.currentBezier.points[1].before.x = origin.x + radius * scale\n        this.currentBezier.points[1].before.y = origin.y - magic * radius\n        this.currentBezier.points[1].after.x = origin.x + radius * scale\n        this.currentBezier.points[1].after.y = origin.y + magic * radius\n\n        this.currentBezier.points[2].base.x = origin.x\n        this.currentBezier.points[2].base.y = origin.y + radius\n        this.currentBezier.points[2].before.x = origin.x + magic * radius * scale\n        this.currentBezier.points[2].before.y = origin.y + radius\n        this.currentBezier.points[2].after.x = origin.x - magic * radius * scale\n        this.currentBezier.points[2].after.y = origin.y + radius\n\n        this.currentBezier.points[3].base.x = origin.x - radius * scale\n        this.currentBezier.points[3].base.y = origin.y\n        this.currentBezier.points[3].before.x = origin.x - radius * scale\n        this.currentBezier.points[3].before.y = origin.y + magic * radius\n        this.currentBezier.points[3].after.x = origin.x - radius * scale\n        this.currentBezier.points[3].after.y = origin.y - magic * radius\n    }\n    \n    handleMouseEvent(\n        v: Viewport, e: MouseEvent, x: number, y: number\n    ) {\n        if (!(v.context instanceof BezierContext)) return\n\n        const pos = v.co.clientToWorld(\n            x, y\n        )\n        v.nudgePoint(pos)\n\n        if (\n            e.type === \"mousedown\" && e.buttons & 1\n        ) {\n            this.currentBezier = this.createEllipse()\n            this.startPoint = pos\n\n            this.updateEllipse(pos, e)\n\n            v.context.beziers.push(this.currentBezier)\n            \n            undoContext.addAction(\n                new ArrayAddAction(\n                    v.context.beziers, this.currentBezier,\n                    v.context.beziers.length - 1\n                )\n            )\n        } else if (\n            e.type === \"mousemove\" && e.buttons & 1 &&\n            this.startPoint\n        ) {\n            this.updateEllipse(pos, e)\n        } else if (\n            e.type === \"mouseup\"\n        ) {\n            if (this.currentBezier) {\n                finalizeUndoContext(\"Ellipse\")\n\n                this.currentBezier = null\n                this.startPoint = null\n\n                if (v.context instanceof GlyphContext)\n                    v.context.glyph.emit(\"modified\")\n            }\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n    }\n\n    updateContext(context: IContext) {\n        if (!(context instanceof BezierContext)) return\n\n        this.handles = []\n        this.guides = []\n        \n        for (let bezier of context.beziers) {\n            for (let point of bezier.points) {\n                this.guides.push(\n                    new PointGuide(point.base)\n                )\n            }\n        }\n    }\n}","import { BezierCurve } from \"../../geometry/bezier/curve\";\nimport { Point } from \"../../geometry/point\";\nimport { ArrayAddAction, ArrayRemoveAction } from \"../../undo/actions/array\";\nimport { finalizeUndoContext, redo, undo, undoContext } from \"../../undo/history\";\nimport { lerp, unlerp } from \"../../utils/lerp\";\nimport { BezierContext } from \"../context/bezier\";\nimport { IContext } from \"../context/context\";\nimport { GlyphContext } from \"../context/glyph\";\nimport { IDrawableHandle } from \"../drawable\";\nimport { CurveGuide } from \"../guides/curve\";\nimport { IGuide } from \"../guides/guide\";\nimport { HandleGuide } from \"../guides/point\";\nimport { BezierBasePointHandle } from \"../handles/bezierBasePoint\";\nimport { BezierControlPointHandle } from \"../handles/bezierControlPoint\";\nimport { Viewport } from \"../viewport\";\nimport { ITool, ToolSubAction } from \"./tool\";\n\nexport class HandleTool implements ITool {\n    public name = \"Curve edit\"\n    public icon = \"handletool\"\n    public accelerator = \"KeyA\"\n\n    private selecting = false\n    private selectionOrigin: Point\n    private selectionTarget: Point\n\n    private pivotHandle: IDrawableHandle\n\n    public handles: IDrawableHandle[] = []\n    public guides: IGuide[] = []\n    public supportsForeignHandles = true\n\n    private moveStartPoint: Point\n    private moveLastPoint: Point\n\n    private beziers: BezierCurve[] = []\n\n    public subactions: ToolSubAction[][] = [\n        [\n            {\n                name: \"Delete\",\n                icon: \"delete\",\n                accelerator: \"Delete\",\n                handler: () => {\n                    const selected = this.handles.filter(h => h.selected)\n                    const curves = this.getSelectedCurves()\n\n                    selected.forEach(\n                        handle => {\n                            if (!(handle instanceof BezierBasePointHandle))\n                                return\n                            \n                            const point = handle.point\n                            const index = point.curve.points.indexOf(point)\n\n                            point.curve.points.splice(index, 1)\n\n                            const cpHandles = this.handles.filter(\n                                h => h instanceof BezierControlPointHandle &&\n                                     h.point === point\n                            ) // length always = 2\n\n                            const hIndex = this.handles.indexOf(handle)\n                            this.handles.splice(hIndex, 1)\n\n                            const cpIndex0 = this.handles.indexOf(cpHandles[0])\n                            this.handles.splice(cpIndex0, 1)\n\n                            const cpIndex1 = this.handles.indexOf(cpHandles[1])\n                            this.handles.splice(cpIndex1, 1)\n\n                            \n                            undoContext.addAction(\n                                new ArrayRemoveAction(\n                                    point.curve.points, point,\n                                    index\n                                ),\n                                new ArrayRemoveAction(\n                                    this.handles, handle,\n                                    hIndex\n                                ),\n                                new ArrayRemoveAction(\n                                    this.handles, cpHandles[0],\n                                    cpIndex0\n                                ),\n                                new ArrayRemoveAction(\n                                    this.handles, cpHandles[1],\n                                    cpIndex1\n                                )\n                            )\n                        }\n                    )\n\n                    finalizeUndoContext(\"Delete points\")\n                }\n            }\n        ],\n        [\n            {\n                name: \"Select all\",\n                icon: \"allsel\",\n                accelerator: \"^KeyA\",\n                handler: () => {\n                    this.handles.forEach(\n                        handle => handle.selected = true\n                    )\n                }\n            },\n            {\n                name: \"Deselect all\",\n                icon: \"removesel\",\n                accelerator: \"^KeyD\",\n                handler: () => {\n                    this.handles.forEach(\n                        handle => handle.selected = false\n                    )\n                }\n            },\n            {\n                name: \"Invert selection\",\n                icon: \"invertsel\",\n                accelerator: \"^KeyI\",\n                handler: () => {\n                    this.handles.forEach(\n                        handle => handle.selected = !handle.selected\n                    )\n                }\n            },\n            {\n                name: \"Select connected\",\n                icon: \"curvesel\",\n                accelerator: \"^KeyL\",\n                handler: () => {\n                    const curves = this.getSelectedCurves()\n\n                    for (let bezier of curves) {\n                        for (let point of bezier.points) {\n                            const handle = this.handles.find(\n                                h => h instanceof BezierBasePointHandle &&\n                                     h.point === point\n                            )\n                            if (handle) handle.selected = true\n                        }\n                    }\n                }\n            }\n        ],\n        [\n            {\n                name: \"Reverse direction\",\n                icon: \"reversecurve\",\n                accelerator: \"KeyR\",\n                handler: () => {\n                    this.getSelectedCurves().forEach(\n                        c => c.reverse()\n                    )\n                }\n            }\n        ],\n        [\n            {\n                name: \"Union\",\n                icon: \"union\",\n                accelerator: \"\",\n                handler: () => {\n                    this.performCSGOperation(\n                        (out, item) => out.unite(item, {\n                            insert: false\n                        })\n                    )\n\n                    finalizeUndoContext(\"Union\")\n                }\n            },\n            {\n                name: \"Difference\",\n                icon: \"difference\",\n                accelerator: \"\",\n                handler: () => {\n                    this.performCSGOperation(\n                        (out, item) => out.subtract(item, {\n                            insert: false\n                        })\n                    )\n\n                    finalizeUndoContext(\"Difference\")\n                }\n            },\n            {\n                name: \"Intersection\",\n                icon: \"intersection\",\n                accelerator: \"\",\n                handler: () => {\n                    this.performCSGOperation(\n                        (out, item) => out.intersect(item, {\n                            insert: false\n                        })\n                    )\n\n                    finalizeUndoContext(\"Intersection\")\n                }\n            },\n            {\n                name: \"Exclusion\",\n                icon: \"xor\",\n                accelerator: \"\",\n                handler: () => {\n                    this.performCSGOperation(\n                        (out, item) => out.exclude(item, {\n                            insert: false\n                        })\n                    )\n\n                    finalizeUndoContext(\"Exclusion\")\n                }\n            }\n        ],\n        [\n            {\n                name: \"Flip X\",\n                icon: \"flipx\",\n                accelerator: \"\",\n                handler: () => {\n                    const selected = this.handles.filter(h => h.selected)\n                    const bbox = this.getHandlesBBox(selected)\n\n                    this.addHandlesToUndoContext(selected)\n\n                    selected.forEach(handle => {\n                        handle.position.x = lerp(\n                            1 - unlerp(handle.position.x, bbox.left, bbox.right),\n                            bbox.left, bbox.right\n                        )\n                    })\n\n                    finalizeUndoContext(\"Flip X\")\n                }\n            },\n            {\n                name: \"Flip Y\",\n                icon: \"flipy\",\n                accelerator: \"\",\n                handler: () => {\n                    const selected = this.handles.filter(h => h.selected)\n                    const bbox = this.getHandlesBBox(selected)\n\n                    this.addHandlesToUndoContext(selected)\n\n                    selected.forEach(handle => {\n                        handle.position.y = lerp(\n                            1 - unlerp(handle.position.y, bbox.top, bbox.bottom),\n                            bbox.top, bbox.bottom\n                        )\n                    })\n\n                    finalizeUndoContext(\"Flip Y\")\n                }\n            }\n        ],\n        [\n            {\n                name: \"Align to left\",\n                icon: \"alignleft\",\n                accelerator: \"\",\n                handler: () => {\n                    const selected = this.handles.filter(h => h.selected)\n                    const bbox = this.getHandlesBBox(selected)\n\n                    this.addHandlesToUndoContext(selected)\n\n                    selected.forEach(handle => {\n                        handle.position.x = bbox.left\n                    })\n\n                    finalizeUndoContext(\"Align to left\")\n                }\n            },\n            {\n                name: \"Align to right\",\n                icon: \"alignright\",\n                accelerator: \"\",\n                handler: () => {\n                    const selected = this.handles.filter(h => h.selected)\n                    const bbox = this.getHandlesBBox(selected)\n\n                    this.addHandlesToUndoContext(selected)\n\n                    selected.forEach(handle => {\n                        handle.position.x = bbox.right\n                    })\n\n                    finalizeUndoContext(\"Align to right\")\n                }\n            },\n            {\n                name: \"Align to top\",\n                icon: \"aligntop\",\n                accelerator: \"\",\n                handler: () => {\n                    const selected = this.handles.filter(h => h.selected)\n                    const bbox = this.getHandlesBBox(selected)\n\n                    this.addHandlesToUndoContext(selected)\n\n                    selected.forEach(handle => {\n                        handle.position.y = bbox.top\n                    })\n\n                    finalizeUndoContext(\"Align to top\")\n                }\n            },\n            {\n                name: \"Align to bottom\",\n                icon: \"alignbottom\",\n                accelerator: \"\",\n                handler: () => {\n                    const selected = this.handles.filter(h => h.selected)\n                    const bbox = this.getHandlesBBox(selected)\n\n                    this.addHandlesToUndoContext(selected)\n\n                    selected.forEach(handle => {\n                        handle.position.y = bbox.bottom\n                    })\n\n                    finalizeUndoContext(\"Align to bottom\")\n                }\n            },\n            {\n                name: \"Align to center\",\n                icon: \"alignhcenter\",\n                accelerator: \"\",\n                handler: () => {\n                    const selected = this.handles.filter(h => h.selected)\n                    const bbox = this.getHandlesBBox(selected)\n\n                    this.addHandlesToUndoContext(selected)\n\n                    selected.forEach(handle => {\n                        handle.position.y = (bbox.top + bbox.bottom) / 2\n                    })\n\n                    finalizeUndoContext(\"Align to center\")\n                }\n            },\n            {\n                name: \"Align to middle\",\n                icon: \"alignvcenter\",\n                accelerator: \"\",\n                handler: () => {\n                    const selected = this.handles.filter(h => h.selected)\n                    const bbox = this.getHandlesBBox(selected)\n\n                    this.addHandlesToUndoContext(selected)\n\n                    selected.forEach(handle => {\n                        handle.position.x = (bbox.left + bbox.right) / 2\n                    })\n\n                    finalizeUndoContext(\"Align to middle\")\n                }\n            }\n        ]\n    ]\n\n    private performCSGOperation(\n        operation: (\n            out: paper.PathItem, current: paper.PathItem\n        ) => paper.PathItem\n    ) {\n        const curves = this.getSelectedCurves()\n        if (!curves.length) return\n\n        const targetWinding = curves[0].clockwise\n        console.log(this.beziers.map(b => b.clockwise))\n        console.log(curves.map(b => b.clockwise))\n\n        const paperPaths = curves.map(\n            c => c.getPaperPath()\n        )\n        let out: paper.PathItem = paperPaths[0]\n\n        let insertIdx = Math.min(\n            ...curves.map(c => this.beziers.indexOf(c))\n        )\n\n        for (let i = 1; i < paperPaths.length; i++) {\n            out = operation(out, paperPaths[i])\n        }\n\n        const newCurves = BezierCurve.fromPaperPathItem(out)\n        if (newCurves.length) {\n            const referenceWinding = newCurves[0].clockwise\n\n            console.log(targetWinding, referenceWinding)\n\n            newCurves.forEach(\n                c => {\n                    if (referenceWinding !== targetWinding)\n                        c.reverse()\n\n                    this.beziers.splice(insertIdx, 0, c)\n                    undoContext.addAction(\n                        new ArrayAddAction(\n                            this.beziers, c, insertIdx\n                        )\n                    )\n\n                    const gIdx = this.guides.length\n                    const guide = new CurveGuide(c)\n                    \n                    this.guides.push(guide)\n                    undoContext.addAction(\n                        new ArrayAddAction(\n                            this.guides, guide, gIdx\n                        )\n                    )\n\n                    c.points.forEach(\n                        p => {\n                            const index = this.handles.length\n\n                            this.handles.push(\n                                new BezierControlPointHandle(\n                                    p, p.before\n                                ),\n                                new BezierControlPointHandle(\n                                    p, p.after\n                                ),\n                                new BezierBasePointHandle(\n                                    p\n                                )\n                            )\n\n                            undoContext.addAction(\n                                new ArrayAddAction(\n                                    this.handles, this.handles[index],\n                                    index\n                                ),\n                                new ArrayAddAction(\n                                    this.handles, this.handles[index + 1],\n                                    index + 1\n                                ),\n                                new ArrayAddAction(\n                                    this.handles, this.handles[index + 2],\n                                    index + 2\n                                )\n                            )\n                        }\n                    )\n\n                    insertIdx++\n                }\n            )\n        }\n\n        curves.forEach(\n            c => {\n                const index = this.beziers.indexOf(c)\n                this.beziers.splice(index, 1)\n\n                undoContext.addAction(\n                    new ArrayRemoveAction(\n                        this.beziers, c, index\n                    )\n                )\n\n                const gIdx = this.guides.findIndex(\n                    g => g instanceof CurveGuide &&\n                         g.source === c\n                )\n                this.guides.splice(gIdx, 1)\n\n                undoContext.addAction(\n                    new ArrayRemoveAction(\n                        this.guides, this.guides[gIdx],\n                        gIdx\n                    )\n                )\n\n                this.handles.filter(\n                    h => (h instanceof BezierBasePointHandle ||\n                         h instanceof BezierControlPointHandle) &&\n                         h.point.curve === c\n                ).forEach(\n                    h => {\n                        const index = this.handles.indexOf(h)\n                        this.handles.splice(index, 1)\n\n                        undoContext.addAction(\n                            new ArrayRemoveAction(\n                                this.handles, h, index\n                            )\n                        )\n                    }\n                )\n            }\n        )\n\n        console.log(this.beziers.map(b => b.clockwise))\n    }\n\n    private addHandlesToUndoContext(handles: IDrawableHandle[]) {\n        handles.forEach(\n            handle => {\n                if (!(\"prepareUndo\" in handle)) return\n                handle.prepareUndo(undoContext)\n            }\n        )\n    }\n\n    private getHandlesBBox(handles: IDrawableHandle[]): {\n        left: number, top: number,\n        right: number, bottom: number\n    } {\n        const xs = handles.map(h => h.position.x)\n        const ys = handles.map(h => h.position.y)\n\n        return {\n            left: Math.min(...xs),\n            top: Math.min(...ys),\n            right: Math.max(...xs),\n            bottom: Math.max(...ys)\n        }\n    }\n\n    private selectHandleBox(exclusive = true) {\n        const left = Math.min(\n            this.selectionOrigin.x, this.selectionTarget.x\n        )\n        const right = Math.max(\n            this.selectionOrigin.x, this.selectionTarget.x\n        )\n        const top = Math.min(\n            this.selectionOrigin.y, this.selectionTarget.y\n        )\n        const bottom = Math.max(\n            this.selectionOrigin.y, this.selectionTarget.y\n        )\n\n        for (let handle of this.handles) {\n            const selected = handle.position.x >= left &&\n                             handle.position.x < right &&\n                             handle.position.y >= top &&\n                             handle.position.y < bottom\n\n            if (exclusive)\n                handle.selected = selected\n            else\n                handle.selected = selected || handle.selected\n        }\n    }\n\n    private getSelectedCurves(): BezierCurve[] {\n        const curves: BezierCurve[] = []\n        \n        for (let handle of this.handles) {\n            if (\n                !handle.selected ||\n                !(handle instanceof BezierBasePointHandle)\n            )\n                continue\n            \n            if (!curves.includes(handle.point.curve))\n                curves.push(handle.point.curve)\n        }\n\n        return curves\n    }\n\n    restrictAngles(pos: Point, e: MouseEvent) {\n        const dx = Math.abs(pos.x - this.moveStartPoint.x)\n        const dy = Math.abs(pos.y - this.moveStartPoint.y)\n\n        if (e.shiftKey) {\n            if (dx > dy)\n                pos.y = this.moveStartPoint.y\n            else\n                pos.x = this.moveStartPoint.x\n        }\n    }\n\n    handleMouseEvent(v: Viewport, e: MouseEvent, x: number, y: number) {\n        const pos = v.co.clientToWorld(\n            x, y\n        )\n\n        if (this.moveStartPoint) this.restrictAngles(pos, e)\n\n        if (\n            e.type === \"mousedown\" && e.buttons & 1\n        ) {\n            const handle = v.nearHandle(pos.x, pos.y)\n            if (!handle) {\n                this.pivotHandle = null\n                v.selectHandles([], !e.shiftKey)\n\n                this.selecting = true\n                this.selectionOrigin = pos\n                this.selectionTarget = pos\n            } else {\n                this.pivotHandle = handle\n                if (!handle.selected) {\n                    v.selectHandles([handle], !e.shiftKey)\n                }\n\n                this.addHandlesToUndoContext(\n                    v.getSelectedHandles()\n                )\n                \n\n                // First movement - snapping to the cursor\n                // const dPos = pos.getDiff(this.pivotHandle.position)\n                // this.pivotHandle.move(\n                //     v, pos, dPos, this.pivotHandle, e\n                // )\n\n                // for (let handle of this.handles) {\n                //     if (\n                //         handle.selected &&\n                //         handle !== this.pivotHandle &&\n                //         handle.type === this.pivotHandle.type\n                //     )\n                //         handle.move(\n                //             v, pos, dPos, this.pivotHandle, e\n                //         )\n                // }\n\n                this.moveStartPoint = pos\n                this.moveLastPoint = pos\n            }\n        } else if (\n            e.type === \"mousemove\" && e.buttons & 1\n        ) {\n            if (this.selecting) {\n                this.selectionTarget = pos\n            } else {\n                if (!this.pivotHandle) return\n\n                const rawX = pos.x, rawY = pos.y\n                v.nudgePoint(pos, this.pivotHandle)\n\n                const inPointDiff = this.moveLastPoint.getDiff(\n                    this.pivotHandle.position\n                )\n\n                const dPos = pos.getDiff(this.moveLastPoint)\n                this.moveLastPoint = pos\n\n                if (rawX !== pos.x || rawY !== pos.y) {\n                    // Center on cursor when snapping happens\n                    pos.x -= inPointDiff.x\n                    pos.y -= inPointDiff.y\n                }\n\n                // Pivot gets moved first\n                this.pivotHandle.move(\n                    v, pos, dPos, this.pivotHandle, e\n                )\n\n                for (let handle of this.handles) {\n                    if (\n                        handle.selected &&\n                        handle !== this.pivotHandle &&\n                        handle.type === this.pivotHandle.type\n                    )\n                        handle.move(\n                            v, pos, dPos, this.pivotHandle, e\n                        )\n                }\n            }\n        } else if (\n            e.type === \"mouseup\"\n        ) {\n            if (this.selecting) {\n                this.selectHandleBox(!e.shiftKey)\n                this.selecting = false\n            } else {\n                v.disableAllGuides()\n\n                if (v.getSelectedHandles().length)\n                    finalizeUndoContext(\"Move points\")\n            }\n\n            this.moveStartPoint = null\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        if (this.selecting) {\n            ctx.fillStyle = \"#08f3\"\n            ctx.fillRect(\n                this.selectionOrigin.x,\n                this.selectionOrigin.y,\n                this.selectionTarget.x - this.selectionOrigin.x,\n                this.selectionTarget.y - this.selectionOrigin.y\n            )\n        }\n    }\n\n    updateContext(context: IContext) {\n        if (!(context instanceof BezierContext)) return\n\n        this.beziers = context.beziers\n\n        this.handles = []\n        context.beziers.forEach(\n            bezier => {\n                bezier.points.forEach(\n                    p => this.handles.push(\n                        new BezierControlPointHandle(p, p.before),\n                        new BezierControlPointHandle(p, p.after),\n                        new BezierBasePointHandle(p)\n                    )\n                )\n            }\n        )\n\n        this.guides = this.handles.filter(\n            h => h instanceof BezierBasePointHandle\n        ).map(\n            h => new HandleGuide(h)\n        )\n    }\n}","import { BezierCurve } from \"../../geometry/bezier/curve\";\nimport { BezierPoint } from \"../../geometry/bezier/point\";\nimport { Point } from \"../../geometry/point\";\nimport { ArrayAddAction } from \"../../undo/actions/array\";\nimport { finalizeUndoContext, undoContext } from \"../../undo/history\";\nimport { BezierContext } from \"../context/bezier\";\nimport { IContext } from \"../context/context\";\nimport { GlyphContext } from \"../context/glyph\";\nimport { IDrawableHandle } from \"../drawable\";\nimport { IGuide } from \"../guides/guide\";\nimport { PointGuide } from \"../guides/point\";\nimport { Viewport } from \"../viewport\";\nimport { ITool, ToolSubAction } from \"./tool\";\n\nexport class RectangleTool implements ITool {\n    public name = \"Rectangle\"\n    public icon = \"rectangletool\"\n    public accelerator = \"KeyS\"\n\n    public handles: IDrawableHandle[] = []\n    public guides: IGuide[] = []\n    public supportsForeignHandles = false\n\n    public subactions: ToolSubAction[][] = []\n\n    private startPoint: Point\n\n    private currentBezier: BezierCurve\n\n    createRect(): BezierCurve {\n        const curve = new BezierCurve()\n\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n\n        curve.points.forEach(p => p.determineType())\n\n        return curve\n    }\n\n    updateRectangle(pos: Point, e: MouseEvent) {\n        const min = new Point(\n            this.startPoint.x, this.startPoint.y\n        )\n        const max = new Point(pos.x, pos.y)\n\n        if (e.shiftKey) {\n            const w = max.x - min.x\n            const h = max.y - min.y\n\n            const size = Math.min(\n                Math.abs(w), Math.abs(h)\n            )\n\n            max.x = Math.sign(w) * size + min.x\n            max.y = Math.sign(h) * size + min.y\n        }\n        if (e.ctrlKey) {\n            min.x = 2 * min.x - max.x\n            min.y = 2 * min.y - max.y\n        }\n\n        this.currentBezier.points[0].base.x = min.x\n        this.currentBezier.points[0].base.y = min.y\n        this.currentBezier.points[0].before.x = min.x\n        this.currentBezier.points[0].before.y = min.y\n        this.currentBezier.points[0].after.x = min.x\n        this.currentBezier.points[0].after.y = min.y\n\n        this.currentBezier.points[1].base.x = max.x\n        this.currentBezier.points[1].base.y = min.y\n        this.currentBezier.points[1].before.x = max.x\n        this.currentBezier.points[1].before.y = min.y\n        this.currentBezier.points[1].after.x = max.x\n        this.currentBezier.points[1].after.y = min.y\n\n        this.currentBezier.points[2].base.x = max.x\n        this.currentBezier.points[2].base.y = max.y\n        this.currentBezier.points[2].before.x = max.x\n        this.currentBezier.points[2].before.y = max.y\n        this.currentBezier.points[2].after.x = max.x\n        this.currentBezier.points[2].after.y = max.y\n\n        this.currentBezier.points[3].base.x = min.x\n        this.currentBezier.points[3].base.y = max.y\n        this.currentBezier.points[3].before.x = min.x\n        this.currentBezier.points[3].before.y = max.y\n        this.currentBezier.points[3].after.x = min.x\n        this.currentBezier.points[3].after.y = max.y\n    }\n\n    handleMouseEvent(\n        v: Viewport, e: MouseEvent, x: number, y: number\n    ) {\n        if (!(v.context instanceof BezierContext)) return\n\n        const pos = v.co.clientToWorld(\n            x, y\n        )\n        v.nudgePoint(pos)\n\n        if (\n            e.type === \"mousedown\" && e.buttons & 1\n        ) {\n            this.currentBezier = this.createRect()\n            this.startPoint = pos\n\n            this.updateRectangle(pos, e)\n\n            v.context.beziers.push(this.currentBezier)\n            \n            undoContext.addAction(\n                new ArrayAddAction(\n                    v.context.beziers, this.currentBezier,\n                    v.context.beziers.length - 1\n                )\n            )\n        } else if (\n            e.type === \"mousemove\" && e.buttons & 1 &&\n            this.startPoint\n        ) {\n            this.updateRectangle(pos, e)\n        } else if (\n            e.type === \"mouseup\"\n        ) {\n            if (this.currentBezier) {\n                finalizeUndoContext(\"Rectangle\")\n\n                this.currentBezier = null\n                this.startPoint = null\n\n                if (v.context instanceof GlyphContext)\n                    v.context.glyph.emit(\"modified\")\n            }\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n    }\n\n    updateContext(context: IContext) {\n        if (!(context instanceof BezierContext)) return\n\n        this.handles = []\n        this.guides = []\n        \n        for (let bezier of context.beziers) {\n            for (let point of bezier.points) {\n                this.guides.push(\n                    new PointGuide(point.base)\n                )\n            }\n        }\n    }\n}","import { throws } from \"assert\"\nimport { Point } from \"../geometry/point\"\nimport { IContext } from \"./context/context\"\nimport { ViewportCoordinates } from \"./coordinates\"\nimport { IDrawable, IDrawableHandle } from \"./drawable\"\nimport { GridGuide } from \"./guides/grid\"\nimport { ITool } from \"./tools/tool\"\n\nexport class Viewport {\n    public domCanvas = document.createElement(\"canvas\")\n    private ctx = this.domCanvas.getContext(\"2d\")\n\n    public co = new ViewportCoordinates()\n\n    constructor(\n        public context: IContext,\n        public handles: IDrawableHandle[],\n        public tool: ITool\n    ) {\n        this.setupCanvasEvents()\n    }\n\n    dispatchMouseEvent(e: MouseEvent) {\n        const box = this.domCanvas.getBoundingClientRect()\n        if (!this.tool) return\n\n        this.tool.handleMouseEvent(\n            this, e,\n            e.clientX - box.left, e.clientY - box.top\n        )\n        this.render()\n    }\n\n    private setupCanvasEvents() {\n        this.domCanvas.addEventListener(\"click\", (e) => {\n        })\n\n        this.domCanvas.addEventListener(\"mousedown\", (e) => {\n            this.dispatchMouseEvent(e)\n        })\n\n        this.domCanvas.addEventListener(\"mouseup\", (e) => {\n            this.dispatchMouseEvent(e)\n        })\n\n        this.domCanvas.addEventListener(\"mousemove\", (e) => {\n            if (e.buttons & 4) { // Middle Button\n                this.co.translate(e.movementX, e.movementY)\n                this.render()\n            } else {\n                this.dispatchMouseEvent(e)\n            }\n        })\n\n        this.domCanvas.addEventListener(\"wheel\", (e) => {\n            if (e.buttons & 4 || e.ctrlKey) { // Middle Button\n                const box = this.domCanvas.getBoundingClientRect()\n                const pos = this.co.clientToWorld(\n                    e.clientX - box.left, e.clientY - box.top\n                )\n\n                this.co.scale(\n                    1.2 ** Math.sign(-e.deltaY),\n                    pos.x, pos.y\n                )\n                this.render()\n            } else {\n                if (e.shiftKey && !e.deltaX) {\n                    this.co.translate(\n                        -e.deltaY, 0\n                    )\n                } else {\n                    this.co.translate(\n                        -e.deltaX, -e.deltaY\n                    )\n                }\n                this.render()\n            }\n        })\n    }\n\n    nearHandle(\n        x: number, y: number,\n        type?: string\n    ): IDrawableHandle {\n        const handles = [\n            ...this.context.handles,\n            ...this.tool.handles\n        ]\n\n        for (let i = handles.length - 1; i >= 0; i--) {\n            const handle = handles[i]\n\n            if (type && handle.type !== type)\n                continue\n\n            const dist = Math.hypot(\n                handle.position.x - x,\n                handle.position.y - y\n            )\n\n            if (dist < handle.hitRadius / this.co.scaleFactor)\n                return handle\n        }\n\n        return null\n    }\n\n    selectHandles(\n        select: IDrawableHandle[],\n        exclusive = true\n    ) {\n        const handles = [\n            ...this.context.handles,\n            ...this.tool.handles\n        ]\n\n        if (exclusive) {\n            for (let handle of handles) {\n                handle.selected = false\n            }\n        }\n\n        for (let handle of select) {\n            handle.selected = true\n        }\n    }\n\n    getSelectedHandles() {\n        const handles = [\n            ...this.context.handles,\n            ...this.tool.handles\n        ]\n\n        return handles.filter(h => h.selected)\n    }\n\n    purgeHandles() {\n        this.handles = []\n    }\n\n    updateViewportSize() {\n        const parent = this.domCanvas.parentElement\n        if (!parent) return\n\n        const rect = parent.getBoundingClientRect()\n\n        this.domCanvas.width = rect.width\n        this.domCanvas.height = rect.height\n\n        this.render()\n    }\n\n    drawHandles(handles: IDrawableHandle[]) {\n        for (let handle of handles) {\n            const clientPos = this.co.worldToClient(\n                handle.position.x, handle.position.y\n            )\n\n            this.ctx.resetTransform()\n            this.ctx.translate(\n                Math.round(clientPos.x) + 0.5,\n                Math.round(clientPos.y) + 0.5\n            )\n\n            handle.render(this, this.ctx)\n        }\n    }\n\n    nudgePoint(pos: Point, obj?: any) {\n        this.context.grids.forEach(\n            g => g.nudge(this, pos, obj)\n        )\n        this.context.guides.forEach(\n            g => g.nudge(this, pos, obj)\n        )\n        this.tool.guides.forEach(\n            g => g.nudge(this, pos, obj)\n        )\n    }\n\n    disableAllGuides() {\n        this.context.grids.forEach(\n            g => g.active = false\n        )\n        this.context.guides.forEach(\n            g => g.active = false\n        )\n        this.tool.guides.forEach(\n            g => g.active = false\n        )\n    }\n\n    render() {\n        this.ctx.resetTransform()\n        this.ctx.clearRect(\n            0, 0, this.domCanvas.width, this.domCanvas.height\n        )\n\n        this.co.transformCanvas(this.ctx)\n\n        this.context.render(this, this.ctx)\n        \n        this.ctx.resetTransform()\n        \n        this.context.grids.forEach(\n            g => g.render(this, this.ctx)\n        )\n\n        Array(\n            ...this.context.guides,\n            ...this.tool.guides\n        ).forEach(\n            guide => {\n                if (guide.active || guide instanceof GridGuide) {\n                    this.ctx.resetTransform()\n                    if (guide.worldRender)\n                        this.co.transformCanvas(this.ctx)\n                        \n                    guide.render(this, this.ctx)\n                }\n            }\n        )\n\n        if (this.tool && this.tool.supportsForeignHandles) {\n            this.drawHandles(this.context.handles)\n            this.drawHandles(this.handles)\n        }\n        if (this.tool) {\n            this.drawHandles(this.tool.handles)\n        }\n\n        this.ctx.resetTransform()\n        this.co.transformCanvas(this.ctx)\n        if (this.tool)\n            this.tool.render(this, this.ctx)\n    }\n\n    setTool(tool: ITool) {\n        this.tool = tool\n        this.tool.updateContext(this.context)\n        this.disableAllGuides()\n        this.render()\n    }\n}","module.exports = require(\"electron\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"opentype.js\");","module.exports = require(\"paper\");","module.exports = require(\"path\");"],"sourceRoot":""}
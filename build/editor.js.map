{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/typeedit/styles/app.scss","webpack:///./src/typeedit/styles/app/controls.scss","webpack:///./src/typeedit/styles/app/editor.scss","webpack:///./src/typeedit/styles/app/main.scss","webpack:///./src/typeedit/styles/app/panel.scss","webpack:///./src/typeedit/styles/welcome.scss","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./src/editor.ts","webpack:///./src/typeedit/app.ts","webpack:///./src/typeedit/font/font.ts","webpack:///./src/typeedit/font/glyph.ts","webpack:///./src/typeedit/geometry/bezier/curve.ts","webpack:///./src/typeedit/geometry/bezier/point.ts","webpack:///./src/typeedit/geometry/point.ts","webpack:///./src/typeedit/io/ftex/ftex.ts","webpack:///./src/typeedit/io/io.ts","webpack:///./src/typeedit/io/opentype.js/export.ts","webpack:///./src/typeedit/io/opentype.js/import.ts","webpack:///./src/typeedit/io/otfcc/import.ts","webpack:///./src/typeedit/settings/defaults.ts","webpack:///./src/typeedit/settings/proxy.ts","webpack:///./src/typeedit/settings/settings.ts","webpack:///./src/typeedit/styles/app.scss?0117","webpack:///./src/typeedit/styles/app/controls.scss?3218","webpack:///./src/typeedit/styles/app/editor.scss?40f5","webpack:///./src/typeedit/styles/app/main.scss?2c16","webpack:///./src/typeedit/styles/app/panel.scss?aa71","webpack:///./src/typeedit/styles/welcome.scss?4869","webpack:///./src/typeedit/ui/actionbar.ts","webpack:///./src/typeedit/ui/glyphBar.ts","webpack:///./src/typeedit/ui/glyphList.ts","webpack:///./src/typeedit/ui/panel.ts","webpack:///./src/typeedit/ui/panel/controls/accordion.ts","webpack:///./src/typeedit/ui/panel/controls/buttonGroup.ts","webpack:///./src/typeedit/ui/panel/controls/checkbox.ts","webpack:///./src/typeedit/ui/panel/controls/grid.ts","webpack:///./src/typeedit/ui/panel/controls/label.ts","webpack:///./src/typeedit/ui/panel/controls/numberInput.ts","webpack:///./src/typeedit/ui/panel/controls/row.ts","webpack:///./src/typeedit/ui/panel/controls/textInput.ts","webpack:///./src/typeedit/ui/panel/controls/toggleButton.ts","webpack:///./src/typeedit/ui/panel/fontInfo.ts","webpack:///./src/typeedit/ui/panel/snapping.ts","webpack:///./src/typeedit/ui/theme.ts","webpack:///./src/typeedit/ui/toolbar.ts","webpack:///./src/typeedit/ui/viewport.ts","webpack:///./src/typeedit/undo/actions/array.ts","webpack:///./src/typeedit/undo/actions/value.ts","webpack:///./src/typeedit/undo/context.ts","webpack:///./src/typeedit/undo/history.ts","webpack:///./src/typeedit/utils/accelerator.ts","webpack:///./src/typeedit/utils/lerp.ts","webpack:///./src/typeedit/utils/preview.ts","webpack:///./src/typeedit/utils/wrappedDist.ts","webpack:///./src/typeedit/viewport/context/bezier.ts","webpack:///./src/typeedit/viewport/context/glyph.ts","webpack:///./src/typeedit/viewport/coordinates.ts","webpack:///./src/typeedit/viewport/guides/curve.ts","webpack:///./src/typeedit/viewport/guides/grid.ts","webpack:///./src/typeedit/viewport/guides/line.ts","webpack:///./src/typeedit/viewport/guides/point.ts","webpack:///./src/typeedit/viewport/handles/bezierBasePoint.ts","webpack:///./src/typeedit/viewport/handles/bezierControlPoint.ts","webpack:///./src/typeedit/viewport/handles/fontMetric.ts","webpack:///./src/typeedit/viewport/tools/bezierPen.ts","webpack:///./src/typeedit/viewport/tools/ellipse.ts","webpack:///./src/typeedit/viewport/tools/handle.ts","webpack:///./src/typeedit/viewport/tools/rectangle.ts","webpack:///./src/typeedit/viewport/viewport.ts","webpack:///external \"child_process\"","webpack:///external \"electron\"","webpack:///external \"events\"","webpack:///external \"fs\"","webpack:///external \"opentype.js\"","webpack:///external \"paper\"","webpack:///external \"path\"","webpack:///external \"smart-buffer\"","webpack:///external \"zlib\""],"names":[],"mappings":"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AC;;;;;;;;;;;;;ACN1B;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;;AAEA;AACA,4CAA4C,qBAAqB;AACjE;;AAEA;AACA,KAAK;AACL,IAAI;AACJ;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,qBAAqB,iBAAiB;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,qBAAqB;AACzC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,8BAA8B;;AAE9B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,CAAC;;;AAGD;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA,C;;;;;;;;;;;;AC7Fa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,SAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA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","file":"editor.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/editor.ts\");\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root {\\n  --var-large-bg: #fff;\\n  --var-panel-bg: #f6f6f6;\\n  --var-text-fg: #000;\\n  --var-panel-sep: #d1d1d1;\\n  --var-button-bg: #fff;\\n  --var-button-hover: #eee;\\n  --var-button-active: #c0c0c0;\\n  --var-glist-label: #fafafa;\\n  --var-glist-activeLabel: #6d7599;\\n  --var-ctrl-editbg: #eee;\\n  --var-ctrl-border: #ccc;\\n  --var-ctrl-focus: #08f;\\n  --var-ctrl-selected: #bbb;\\n  --var-ctrl-header: #eee; }\\n\\nbody {\\n  background: var(--var-large-bg);\\n  color: var(--var-text-fg);\\n  font-family: \\\"Inter\\\";\\n  user-select: none; }\\n\\n*::-webkit-scrollbar {\\n  width: 12px; }\\n\\n*::-webkit-scrollbar-track {\\n  background: var(--var-panel-sep); }\\n\\n*::-webkit-scrollbar-thumb {\\n  background: var(--var-large-bg); }\\n\\nbody[data-theme=dark] {\\n  --var-large-bg: #222;\\n  --var-panel-bg: #161616;\\n  --var-text-fg: #fff;\\n  --var-panel-sep: #000;\\n  --var-button-bg: #111;\\n  --var-button-hover: #333;\\n  --var-button-active: #555;\\n  --var-glist-label: #2b2b2b;\\n  --var-glist-activeLabel: #232c53;\\n  --var-ctrl-editbg: #000;\\n  --var-ctrl-border: #444;\\n  --var-ctrl-focus: #08f;\\n  --var-ctrl-selected: #444;\\n  --var-ctrl-header: #2b2b2b; }\\n  body[data-theme=dark] button > img {\\n    filter: invert(1) hue-rotate(180deg); }\\n  body[data-theme=dark] div.glyphList canvas {\\n    filter: invert(1); }\\n\\nbutton > img {\\n  width: 16px;\\n  height: 16px; }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/typeedit/styles/app.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,oBAAe;EACf,uBAAe;EACf,mBAAc;EAEd,wBAAgB;EAEhB,qBAAgB;EAChB,wBAAmB;EACnB,4BAAoB;EAEpB,0BAAkB;EAClB,gCAAwB;EAExB,uBAAkB;EAClB,uBAAkB;EAClB,sBAAiB;EACjB,yBAAoB;EACpB,uBAAkB,EAAA;;AAGtB;EACI,+BAA+B;EAC/B,yBAAyB;EAEzB,oBAAoB;EAEpB,iBAAiB,EAAA;;AAGrB;EACI,WAAW,EAAA;;AAGf;EACI,gCAAgC,EAAA;;AAGpC;EACI,+BAA+B,EAAA;;AAGnC;EACI,oBAAe;EACf,uBAAe;EACf,mBAAc;EAEd,qBAAgB;EAEhB,qBAAgB;EAChB,wBAAmB;EACnB,yBAAoB;EAEpB,0BAAkB;EAClB,gCAAwB;EAExB,uBAAkB;EAClB,uBAAkB;EAClB,sBAAiB;EACjB,yBAAoB;EACpB,0BAAkB,EAAA;EAlBtB;IAqBQ,oCAAoC,EAAA;EArB5C;IAyBQ,iBAAiB,EAAA;;AAIzB;EACI,WAAW;EACX,YAAY,EAAA\",\"sourcesContent\":[\":root {\\n    --var-large-bg: #fff;\\n    --var-panel-bg: #f6f6f6;\\n    --var-text-fg: #000;\\n\\n    --var-panel-sep: #d1d1d1;\\n\\n    --var-button-bg: #fff;\\n    --var-button-hover: #eee;\\n    --var-button-active: #c0c0c0;\\n\\n    --var-glist-label: #fafafa;\\n    --var-glist-activeLabel: #6d7599;\\n\\n    --var-ctrl-editbg: #eee;\\n    --var-ctrl-border: #ccc;\\n    --var-ctrl-focus: #08f;\\n    --var-ctrl-selected: #bbb;\\n    --var-ctrl-header: #eee;\\n}\\n\\nbody {\\n    background: var(--var-large-bg);\\n    color: var(--var-text-fg);\\n\\n    font-family: \\\"Inter\\\";\\n\\n    user-select: none;\\n}\\n\\n*::-webkit-scrollbar {\\n    width: 12px;\\n}\\n\\n*::-webkit-scrollbar-track {\\n    background: var(--var-panel-sep);\\n}\\n\\n*::-webkit-scrollbar-thumb {\\n    background: var(--var-large-bg);\\n}\\n\\nbody[data-theme=dark] {\\n    --var-large-bg: #222;\\n    --var-panel-bg: #161616;\\n    --var-text-fg: #fff;\\n\\n    --var-panel-sep: #000;\\n\\n    --var-button-bg: #111;\\n    --var-button-hover: #333;\\n    --var-button-active: #555;\\n\\n    --var-glist-label: #2b2b2b;\\n    --var-glist-activeLabel: #232c53;\\n\\n    --var-ctrl-editbg: #000;\\n    --var-ctrl-border: #444;\\n    --var-ctrl-focus: #08f;\\n    --var-ctrl-selected: #444;\\n    --var-ctrl-header: #2b2b2b;\\n\\n    button > img {\\n        filter: invert(1) hue-rotate(180deg);\\n    }\\n\\n    div.glyphList canvas {\\n        filter: invert(1);\\n    }\\n}\\n \\nbutton > img {\\n    width: 16px;\\n    height: 16px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"div.panelContents div.content {\\n  display: grid;\\n  grid-template-columns: 1fr;\\n  gap: 4px; }\\n\\ndiv.panelContents div.accordion {\\n  border-bottom: 1px solid var(--var-panel-sep); }\\n  div.panelContents div.accordion > header {\\n    background: var(--var-ctrl-header);\\n    font-size: 9pt;\\n    font-weight: 400;\\n    text-transform: uppercase;\\n    letter-spacing: 1px;\\n    padding: 4px 12px;\\n    display: flex;\\n    align-items: center;\\n    justify-content: space-between; }\\n  div.panelContents div.accordion > div.content {\\n    padding: 6px 12px; }\\n\\ndiv.panelContents input[type=checkbox] {\\n  width: 20px;\\n  height: 12px;\\n  background: var(--var-large-bg);\\n  border: 1px solid var(--var-panel-sep);\\n  border-radius: 6px;\\n  outline: none;\\n  appearance: none; }\\n  div.panelContents input[type=checkbox]:checked {\\n    background: var(--var-ctrl-focus); }\\n\\ndiv.panelContents button {\\n  background: var(--var-large-bg);\\n  color: var(--var-text-fg);\\n  border: none;\\n  outline: none;\\n  padding: 7px 8px;\\n  border: 1px solid var(--var-panel-sep);\\n  margin-bottom: 2px;\\n  border-radius: 4px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center; }\\n  div.panelContents button:hover {\\n    background: var(--var-button-hover); }\\n  div.panelContents button:active {\\n    background: var(--var-button-active); }\\n  div.panelContents button.active {\\n    background: var(--var-ctrl-selected); }\\n\\ndiv.panelContents div.buttonGroup {\\n  display: flex; }\\n  div.panelContents div.buttonGroup > button {\\n    border-radius: 0px;\\n    flex-grow: 1; }\\n    div.panelContents div.buttonGroup > button:not(:last-child) {\\n      border-right: none; }\\n    div.panelContents div.buttonGroup > button:first-child {\\n      border-radius: 4px 0px 0px 4px; }\\n    div.panelContents div.buttonGroup > button:last-child {\\n      border-radius: 0px 4px 4px 0px; }\\n\\ndiv.panelContents label {\\n  font-size: 10pt; }\\n\\ndiv.panelContents div.row {\\n  display: flex;\\n  align-items: center; }\\n  div.panelContents div.row label {\\n    margin-right: 8px; }\\n  div.panelContents div.row *:last-child {\\n    flex-grow: 1; }\\n\\ndiv.panelContents div.grid {\\n  display: grid;\\n  gap: 12px; }\\n  div.panelContents div.grid.g-2i {\\n    grid-template-columns: repeat(2, 1fr); }\\n\\ndiv.panelContents input[type=number],\\ndiv.panelContents input[type=text] {\\n  background: var(--var-ctrl-editbg);\\n  color: var(--var-text-fg);\\n  font-family: \\\"Inter\\\";\\n  font-size: 10pt;\\n  outline: none;\\n  border: 1px solid var(--var-ctrl-border);\\n  border-radius: 4px;\\n  padding: 4px 10px; }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/typeedit/styles/app/controls.scss\"],\"names\":[],\"mappings\":\"AAAA;EAEQ,aAAa;EACb,0BAA0B;EAC1B,QAAQ,EAAA;;AAJhB;EAQQ,6CAA6C,EAAA;EARrD;IAWY,kCAAkC;IAElC,cAAc;IACd,gBAAgB;IAChB,yBAAyB;IACzB,mBAAmB;IAEnB,iBAAiB;IAEjB,aAAa;IACb,mBAAmB;IACnB,8BAA8B,EAAA;EAtB1C;IA0BY,iBAAiB,EAAA;;AA1B7B;EA+BQ,WAAW;EACX,YAAY;EACZ,+BAA+B;EAE/B,sCAAsC;EACtC,kBAAkB;EAClB,aAAa;EAEb,gBAAgB,EAAA;EAvCxB;IA0CY,iCAAiC,EAAA;;AA1C7C;EA+CQ,+BAA+B;EAC/B,yBAAyB;EAEzB,YAAY;EACZ,aAAa;EACb,gBAAgB;EAChB,sCAAsC;EACtC,kBAAkB;EAClB,kBAAkB;EAElB,aAAa;EACb,mBAAmB;EACnB,uBAAuB,EAAA;EA3D/B;IA8DY,mCAAmC,EAAA;EA9D/C;IAkEY,oCAAoC,EAAA;EAlEhD;IAsEY,oCAAoC,EAAA;;AAtEhD;EA2EQ,aAAa,EAAA;EA3ErB;IA8EY,kBAAkB;IAElB,YAAY,EAAA;IAhFxB;MAmFgB,kBAAkB,EAAA;IAnFlC;MAuFgB,8BAA8B,EAAA;IAvF9C;MA2FgB,8BAA8B,EAAA;;AA3F9C;EAiGQ,eAAe,EAAA;;AAjGvB;EAqGQ,aAAa;EACb,mBAAmB,EAAA;EAtG3B;IAyGY,iBAAiB,EAAA;EAzG7B;IA6GY,YAAY,EAAA;;AA7GxB;EAkHQ,aAAa;EACb,SAAS,EAAA;EAnHjB;IAsHY,qCAAqC,EAAA;;AAtHjD;;EA4HQ,kCAAkC;EAClC,yBAAyB;EAEzB,oBAAoB;EACpB,eAAe;EAEf,aAAa;EACb,wCAAwC;EACxC,kBAAkB;EAClB,iBAAiB,EAAA\",\"sourcesContent\":[\"div.panelContents {\\n    div.content {\\n        display: grid;\\n        grid-template-columns: 1fr;\\n        gap: 4px;\\n    }\\n\\n    div.accordion {\\n        border-bottom: 1px solid var(--var-panel-sep);\\n\\n        & > header {\\n            background: var(--var-ctrl-header);\\n            \\n            font-size: 9pt;\\n            font-weight: 400;\\n            text-transform: uppercase;\\n            letter-spacing: 1px;\\n\\n            padding: 4px 12px;\\n\\n            display: flex;\\n            align-items: center;\\n            justify-content: space-between;\\n        }\\n\\n        & > div.content {\\n            padding: 6px 12px;\\n        }\\n    }\\n\\n    input[type=checkbox] {\\n        width: 20px;\\n        height: 12px;\\n        background: var(--var-large-bg);\\n\\n        border: 1px solid var(--var-panel-sep);\\n        border-radius: 6px;\\n        outline: none;\\n\\n        appearance: none;\\n\\n        &:checked {\\n            background: var(--var-ctrl-focus);\\n        }\\n    }\\n        \\n    button {\\n        background: var(--var-large-bg);\\n        color: var(--var-text-fg);\\n\\n        border: none;\\n        outline: none;\\n        padding: 7px 8px;\\n        border: 1px solid var(--var-panel-sep);\\n        margin-bottom: 2px;\\n        border-radius: 4px;\\n\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n\\n        &:hover {\\n            background: var(--var-button-hover);\\n        }\\n    \\n        &:active {\\n            background: var(--var-button-active);\\n        }\\n\\n        &.active {\\n            background: var(--var-ctrl-selected);\\n        }\\n    }\\n\\n    div.buttonGroup {\\n        display: flex;\\n\\n        & > button {\\n            border-radius: 0px;\\n            \\n            flex-grow: 1;\\n\\n            &:not(:last-child) {\\n                border-right: none;\\n            }\\n\\n            &:first-child {\\n                border-radius: 4px 0px 0px 4px;\\n            }\\n    \\n            &:last-child {\\n                border-radius: 0px 4px 4px 0px;\\n            }\\n        }\\n    }\\n\\n    label {\\n        font-size: 10pt;\\n    }\\n\\n    div.row {\\n        display: flex;\\n        align-items: center;\\n\\n        label {\\n            margin-right: 8px;\\n        }\\n\\n        & *:last-child {\\n            flex-grow: 1;\\n        }\\n    }\\n\\n    div.grid {\\n        display: grid;\\n        gap: 12px;\\n\\n        &.g-2i {\\n            grid-template-columns: repeat(2, 1fr);\\n        }\\n    }\\n\\n    input[type=number],\\n    input[type=text] {\\n        background: var(--var-ctrl-editbg);\\n        color: var(--var-text-fg);\\n\\n        font-family: \\\"Inter\\\";\\n        font-size: 10pt;\\n\\n        outline: none;\\n        border: 1px solid var(--var-ctrl-border);\\n        border-radius: 4px;\\n        padding: 4px 10px;\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"section.edit {\\n  position: relative;\\n  border-top: 1px solid var(--var-panel-sep);\\n  display: grid;\\n  grid-template-columns: auto 1fr;\\n  grid-template-rows: 1fr auto; }\\n  section.edit div.viewport {\\n    position: relative; }\\n    section.edit div.viewport canvas {\\n      position: absolute;\\n      left: 0;\\n      top: 0; }\\n  section.edit div.glyphBar {\\n    color: var(--var-text-fg);\\n    font-family: \\\"Inter\\\";\\n    font-size: 24pt;\\n    text-align: center;\\n    border: none;\\n    outline: none;\\n    padding: 6px 20px; }\\n    section.edit div.glyphBar div.ntglyph {\\n      height: 1em;\\n      box-sizing: border-box;\\n      background: var(--var-button-hover);\\n      border-radius: 4px;\\n      border: 1px solid #ddd;\\n      margin: 0px 1px;\\n      display: inline-flex;\\n      align-items: center; }\\n      section.edit div.glyphBar div.ntglyph span {\\n        font-size: 16pt; }\\n  section.edit div.glyphSwitchButtons {\\n    position: absolute;\\n    left: 8px;\\n    right: 8px;\\n    top: 0;\\n    bottom: 0;\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n    pointer-events: none; }\\n  section.edit button.prevGlyph,\\n  section.edit button.nextGlyph {\\n    background: var(--var-button-bg);\\n    font-size: 0;\\n    outline: none;\\n    padding: 6px 8px;\\n    border-radius: 4px;\\n    border: 1px solid var(--var-panel-sep);\\n    box-shadow: 0px 2px 4px #0001;\\n    pointer-events: all;\\n    z-index: 10; }\\n    section.edit button.prevGlyph:hover,\\n    section.edit button.nextGlyph:hover {\\n      background: var(--var-button-hover); }\\n    section.edit button.prevGlyph:active,\\n    section.edit button.nextGlyph:active {\\n      background: var(--var-button-active); }\\n  section.edit div.tools {\\n    background: var(--var-panel-bg);\\n    padding: 2px;\\n    display: flex;\\n    flex-direction: column;\\n    border-right: 1px solid var(--var-panel-sep);\\n    grid-row: 1 / span 2; }\\n    section.edit div.tools button {\\n      background: transparent;\\n      font-size: 0;\\n      border: none;\\n      outline: none;\\n      padding: 7px 8px;\\n      border-radius: 4px; }\\n      section.edit div.tools button:hover {\\n        background: var(--var-button-hover); }\\n      section.edit div.tools button:active {\\n        background: var(--var-button-active); }\\n      section.edit div.tools button.active {\\n        background: var(--var-panel-sep); }\\n\\ndiv.subactions {\\n  display: flex; }\\n  div.subactions div {\\n    border-left: 1px solid var(--var-panel-sep);\\n    display: flex; }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/typeedit/styles/app/editor.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAkB;EAElB,0CAA0C;EAE1C,aAAa;EACb,+BAA+B;EAC/B,4BAA4B,EAAA;EAPhC;IAUQ,kBAAkB,EAAA;IAV1B;MAaY,kBAAkB;MAClB,OAAO;MACP,MAAM,EAAA;EAflB;IAoBQ,yBAAyB;IAEzB,oBAAoB;IACpB,eAAe;IACf,kBAAkB;IAElB,YAAY;IACZ,aAAa;IACb,iBAAiB,EAAA;IA5BzB;MA+BY,WAAW;MACX,sBAAsB;MAEtB,mCAAmC;MACnC,kBAAkB;MAClB,sBAAsB;MACtB,eAAe;MAEf,oBAAoB;MACpB,mBAAmB,EAAA;MAxC/B;QA2CgB,eAAe,EAAA;EA3C/B;IAiDQ,kBAAkB;IAClB,SAAS;IACT,UAAU;IACV,MAAM;IACN,SAAS;IAET,aAAa;IACb,8BAA8B;IAC9B,mBAAmB;IACnB,oBAAoB,EAAA;EA1D5B;;IA+DQ,gCAAgC;IAEhC,YAAY;IAEZ,aAAa;IACb,gBAAgB;IAChB,kBAAkB;IAClB,sCAAsC;IACtC,6BAA6B;IAE7B,mBAAmB;IACnB,WAAW,EAAA;IA1EnB;;MA6EY,mCAAmC,EAAA;IA7E/C;;MAiFY,oCAAoC,EAAA;EAjFhD;IAsFQ,+BAA+B;IAE/B,YAAY;IAEZ,aAAa;IACb,sBAAsB;IAEtB,4CAA4C;IAE5C,oBAAoB,EAAA;IA/F5B;MAkGY,uBAAuB;MAEvB,YAAY;MAEZ,YAAY;MACZ,aAAa;MACb,gBAAgB;MAChB,kBAAkB,EAAA;MAzG9B;QA4GgB,mCAAmC,EAAA;MA5GnD;QAgHgB,oCAAoC,EAAA;MAhHpD;QAoHgB,gCAAgC,EAAA;;AAMhD;EACI,aAAa,EAAA;EADjB;IAIQ,2CAA2C;IAC3C,aAAa,EAAA\",\"sourcesContent\":[\"section.edit {\\n    position: relative;\\n\\n    border-top: 1px solid var(--var-panel-sep);\\n\\n    display: grid;\\n    grid-template-columns: auto 1fr;\\n    grid-template-rows: 1fr auto;\\n\\n    div.viewport {\\n        position: relative;\\n\\n        canvas {\\n            position: absolute;\\n            left: 0;\\n            top: 0;\\n        }\\n    }\\n\\n    div.glyphBar {\\n        color: var(--var-text-fg);\\n\\n        font-family: \\\"Inter\\\";\\n        font-size: 24pt;\\n        text-align: center;\\n\\n        border: none;\\n        outline: none;\\n        padding: 6px 20px;\\n\\n        div.ntglyph {\\n            height: 1em;\\n            box-sizing: border-box;\\n\\n            background: var(--var-button-hover);\\n            border-radius: 4px;\\n            border: 1px solid #ddd;\\n            margin: 0px 1px;\\n\\n            display: inline-flex;\\n            align-items: center;\\n\\n            span {            \\n                font-size: 16pt;\\n            }\\n        }\\n    }\\n\\n    div.glyphSwitchButtons {\\n        position: absolute;\\n        left: 8px;\\n        right: 8px;\\n        top: 0;\\n        bottom: 0;\\n\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        pointer-events: none;\\n    }\\n\\n    button.prevGlyph,\\n    button.nextGlyph {\\n        background: var(--var-button-bg);\\n\\n        font-size: 0;\\n\\n        outline: none;\\n        padding: 6px 8px;\\n        border-radius: 4px;\\n        border: 1px solid var(--var-panel-sep);\\n        box-shadow: 0px 2px 4px #0001;\\n\\n        pointer-events: all;\\n        z-index: 10;\\n    \\n        &:hover {\\n            background: var(--var-button-hover);\\n        }\\n    \\n        &:active {\\n            background: var(--var-button-active);\\n        }\\n    }\\n\\n    div.tools {\\n        background: var(--var-panel-bg);\\n\\n        padding: 2px;\\n\\n        display: flex;\\n        flex-direction: column;\\n\\n        border-right: 1px solid var(--var-panel-sep);\\n\\n        grid-row: 1 / span 2;\\n\\n        button {\\n            background: transparent;\\n\\n            font-size: 0;\\n\\n            border: none;\\n            outline: none;\\n            padding: 7px 8px;\\n            border-radius: 4px;\\n    \\n            &:hover {\\n                background: var(--var-button-hover);\\n            }\\n    \\n            &:active {\\n                background: var(--var-button-active);\\n            }\\n\\n            &.active {\\n                background: var(--var-panel-sep);\\n            }\\n        }\\n    }\\n}\\n\\ndiv.subactions {    \\n    display: flex;\\n\\n    div {\\n        border-left: 1px solid var(--var-panel-sep); \\n        display: flex;\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"main {\\n  position: fixed;\\n  left: 0;\\n  top: 0;\\n  right: 320px;\\n  bottom: 0;\\n  background: var(--var-panel-bg);\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-start; }\\n  main > nav {\\n    width: 100%;\\n    padding: 0px;\\n    display: flex; }\\n    main > nav div.actions {\\n      display: flex; }\\n      main > nav div.actions button {\\n        background: transparent;\\n        border: none;\\n        outline: none;\\n        padding: 7px 10px;\\n        border-radius: 4px;\\n        margin-bottom: 2px;\\n        display: flex;\\n        align-items: center;\\n        justify-content: center; }\\n        main > nav div.actions button:hover {\\n          background: var(--var-button-hover); }\\n        main > nav div.actions button:active {\\n          background: var(--var-button-active); }\\n    main > nav div.tabs {\\n      display: flex;\\n      flex-grow: 1;\\n      justify-content: center; }\\n      main > nav div.tabs button {\\n        background: transparent;\\n        font-family: \\\"Inter\\\";\\n        font-size: 10pt;\\n        font-weight: 500;\\n        padding: 6px 20px;\\n        border: none;\\n        border-bottom: none;\\n        border-radius: 2px 2px 0px 0px;\\n        outline: none; }\\n        main > nav div.tabs button.active {\\n          background: #fff; }\\n  main section {\\n    position: relative;\\n    background: var(--var-large-bg);\\n    width: 100%;\\n    flex-grow: 1; }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/typeedit/styles/app/main.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,eAAe;EACf,OAAO;EACP,MAAM;EACN,YAAY;EACZ,SAAS;EAET,+BAA+B;EAE/B,aAAa;EACb,sBAAsB;EACtB,uBAAuB,EAAA;EAX3B;IAcQ,WAAW;IAEX,YAAY;IAEZ,aAAa,EAAA;IAlBrB;MAqBY,aAAa,EAAA;MArBzB;QAwBgB,uBAAuB;QAEvB,YAAY;QACZ,aAAa;QACb,iBAAiB;QACjB,kBAAkB;QAClB,kBAAkB;QAElB,aAAa;QACb,mBAAmB;QACnB,uBAAuB,EAAA;QAlCvC;UAqCoB,mCAAmC,EAAA;QArCvD;UAyCoB,oCAAoC,EAAA;IAzCxD;MA+CY,aAAa;MACb,YAAY;MACZ,uBAAuB,EAAA;MAjDnC;QAoDgB,uBAAuB;QAEvB,oBAAoB;QACpB,eAAe;QACf,gBAAgB;QAEhB,iBAAiB;QACjB,YAAY;QACZ,mBAAmB;QACnB,8BAA8B;QAC9B,aAAa,EAAA;QA9D7B;UAiEoB,gBAAgB,EAAA;EAjEpC;IAwEQ,kBAAkB;IAElB,+BAA+B;IAE/B,WAAW;IAEX,YAAY,EAAA\",\"sourcesContent\":[\"main {\\n    position: fixed;\\n    left: 0;\\n    top: 0;\\n    right: 320px;\\n    bottom: 0;\\n\\n    background: var(--var-panel-bg);\\n\\n    display: flex;\\n    flex-direction: column;\\n    align-items: flex-start;\\n\\n    & > nav {\\n        width: 100%;\\n\\n        padding: 0px;\\n\\n        display: flex;\\n\\n        div.actions {\\n            display: flex;\\n\\n            button {    \\n                background: transparent;\\n    \\n                border: none;\\n                outline: none;\\n                padding: 7px 10px;\\n                border-radius: 4px;\\n                margin-bottom: 2px;\\n    \\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n    \\n                &:hover {\\n                    background: var(--var-button-hover);\\n                }\\n    \\n                &:active {\\n                    background: var(--var-button-active);\\n                }\\n            }\\n        }\\n\\n        div.tabs {\\n            display: flex;\\n            flex-grow: 1;\\n            justify-content: center;\\n\\n            button {\\n                background: transparent;\\n    \\n                font-family: \\\"Inter\\\";\\n                font-size: 10pt;\\n                font-weight: 500;\\n    \\n                padding: 6px 20px;\\n                border: none;\\n                border-bottom: none;\\n                border-radius: 2px 2px 0px 0px;\\n                outline: none;\\n    \\n                &.active {\\n                    background: #fff;\\n                }\\n            }\\n        }\\n    }\\n\\n    section {\\n        position: relative;\\n\\n        background: var(--var-large-bg);\\n\\n        width: 100%;\\n\\n        flex-grow: 1;\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"aside {\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  min-width: 320px;\\n  width: 320px;\\n  box-sizing: border-box;\\n  border-left: 1px solid var(--var-panel-sep);\\n  display: flex;\\n  flex-direction: column; }\\n  aside nav {\\n    background: var(--var-panel-bg);\\n    box-shadow: inset 0px -1px var(--var-panel-sep);\\n    display: flex;\\n    justify-content: center; }\\n    aside nav button {\\n      background: transparent;\\n      color: var(--var-text-fg);\\n      font-family: \\\"Inter\\\";\\n      font-size: 10pt;\\n      font-weight: 400;\\n      padding: 7px 20px;\\n      border: none;\\n      border-bottom: none;\\n      outline: none; }\\n      aside nav button.tool {\\n        background: linear-gradient(transparent, #293844); }\\n      aside nav button:hover {\\n        background: var(--var-button-hover); }\\n      aside nav button:active {\\n        background: var(--var-button-active); }\\n      aside nav button.active {\\n        background: var(--var-panel-sep);\\n        box-shadow: inset 0px -2px var(--var-text-fg); }\\n  aside div.listContainer {\\n    height: 0;\\n    flex-grow: 1;\\n    overflow-y: auto; }\\n  aside div.panelContents:not(.active) {\\n    display: none; }\\n  aside div.glyphList {\\n    background: var(--var-panel-bg);\\n    display: grid;\\n    grid-template-columns: repeat(4, 1fr);\\n    gap: 1px; }\\n    aside div.glyphList div.glyph {\\n      max-width: 75px;\\n      background: var(--var-large-bg);\\n      display: flex;\\n      flex-direction: column; }\\n      aside div.glyphList div.glyph.active label {\\n        background: var(--var-glist-activeLabel);\\n        color: #fff; }\\n      aside div.glyphList div.glyph label {\\n        background: var(--var-glist-label);\\n        font-size: 9pt;\\n        font-weight: 500;\\n        text-align: center;\\n        white-space: nowrap;\\n        text-overflow: ellipsis;\\n        padding: 2px;\\n        overflow: hidden; }\\n      aside div.glyphList div.glyph canvas {\\n        width: 100%;\\n        height: auto; }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/typeedit/styles/app/panel.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,eAAe;EACf,MAAM;EACN,QAAQ;EACR,SAAS;EACT,gBAAgB;EAChB,YAAY;EACZ,sBAAsB;EAEtB,2CAA2C;EAE3C,aAAa;EACb,sBAAsB,EAAA;EAZ1B;IAeQ,+BAA+B;IAE/B,+CAA+C;IAE/C,aAAa;IACb,uBAAuB,EAAA;IApB/B;MAuBY,uBAAuB;MACvB,yBAAyB;MAEzB,oBAAoB;MACpB,eAAe;MACf,gBAAgB;MAEhB,iBAAiB;MACjB,YAAY;MACZ,mBAAmB;MACnB,aAAa,EAAA;MAjCzB;QAoCgB,iDAEC,EAAA;MAtCjB;QA0CgB,mCAAmC,EAAA;MA1CnD;QA8CgB,oCAAoC,EAAA;MA9CpD;QAkDgB,gCAAgC;QAChC,6CAA6C,EAAA;EAnD7D;IAyDQ,SAAS;IAET,YAAY;IACZ,gBAAgB,EAAA;EA5DxB;IAgEQ,aAAa,EAAA;EAhErB;IAoEQ,+BAA+B;IAE/B,aAAa;IACb,qCAAqC;IACrC,QAAQ,EAAA;IAxEhB;MA2EY,eAAe;MAEf,+BAA+B;MAE/B,aAAa;MACb,sBAAsB,EAAA;MAhFlC;QAmFgB,wCAAwC;QACxC,WAAW,EAAA;MApF3B;QAwFgB,kCAAkC;QAElC,cAAc;QACd,gBAAgB;QAChB,kBAAkB;QAClB,mBAAmB;QACnB,uBAAuB;QAEvB,YAAY;QAEZ,gBAAgB,EAAA;MAlGhC;QAsGgB,WAAW;QACX,YAAY,EAAA\",\"sourcesContent\":[\"aside {\\n    position: fixed;\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n    min-width: 320px;\\n    width: 320px;\\n    box-sizing: border-box;\\n\\n    border-left: 1px solid var(--var-panel-sep);\\n    \\n    display: flex;\\n    flex-direction: column;\\n\\n    nav {\\n        background: var(--var-panel-bg);\\n\\n        box-shadow: inset 0px -1px var(--var-panel-sep);\\n\\n        display: flex;\\n        justify-content: center;\\n\\n        button {\\n            background: transparent;\\n            color: var(--var-text-fg);\\n\\n            font-family: \\\"Inter\\\";\\n            font-size: 10pt;\\n            font-weight: 400;\\n\\n            padding: 7px 20px;\\n            border: none;\\n            border-bottom: none;\\n            outline: none;\\n\\n            &.tool {\\n                background: linear-gradient(\\n                    transparent, rgb(41, 56, 68)\\n                );\\n            }\\n    \\n            &:hover {\\n                background: var(--var-button-hover);\\n            }\\n    \\n            &:active {\\n                background: var(--var-button-active);\\n            }\\n\\n            &.active {\\n                background: var(--var-panel-sep);\\n                box-shadow: inset 0px -2px var(--var-text-fg);\\n            }\\n        }\\n    }\\n\\n    div.listContainer {\\n        height: 0; // WTF???\\n\\n        flex-grow: 1;\\n        overflow-y: auto;\\n    }\\n\\n    div.panelContents:not(.active) {\\n        display: none;\\n    }\\n\\n    div.glyphList {\\n        background: var(--var-panel-bg);\\n\\n        display: grid;\\n        grid-template-columns: repeat(4, 1fr);\\n        gap: 1px;\\n\\n        div.glyph {\\n            max-width: 75px;\\n\\n            background: var(--var-large-bg);\\n\\n            display: flex;\\n            flex-direction: column;\\n\\n            &.active label {\\n                background: var(--var-glist-activeLabel);\\n                color: #fff;\\n            }\\n\\n            label {\\n                background: var(--var-glist-label);\\n\\n                font-size: 9pt;\\n                font-weight: 500;\\n                text-align: center;\\n                white-space: nowrap;\\n                text-overflow: ellipsis;\\n                \\n                padding: 2px;\\n\\n                overflow: hidden;\\n            }\\n\\n            canvas {\\n                width: 100%;\\n                height: auto;\\n            }\\n        }\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"article.welcome {\\n  display: flex;\\n  justify-content: center;\\n  align-items: flex-start; }\\n  article.welcome > div {\\n    width: 350px;\\n    height: calc(100vh - 80px);\\n    margin: 60px;\\n    display: flex;\\n    flex-direction: column; }\\n    article.welcome > div div.recentFiles {\\n      flex-grow: 1;\\n      overflow-y: auto; }\\n    article.welcome > div div.buttons {\\n      display: grid;\\n      grid-template-columns: repeat(2, 1fr);\\n      gap: 2px; }\\n    article.welcome > div h1 {\\n      font-size: 40pt;\\n      line-height: 1;\\n      margin: 0;\\n      text-align: center; }\\n    article.welcome > div h3 {\\n      font-size: 14pt;\\n      font-weight: 400;\\n      margin: 0px 0px 24px 0px;\\n      text-align: center; }\\n    article.welcome > div h2 {\\n      font-weight: 400;\\n      margin-bottom: 8px; }\\n    article.welcome > div button {\\n      width: 100%;\\n      background: var(--var-panel-bg);\\n      color: var(--var-text-fg);\\n      font-family: \\\"Inter\\\";\\n      border: none;\\n      outline: none;\\n      padding: 7px 8px;\\n      border: 1px solid var(--var-panel-sep);\\n      border-radius: 4px;\\n      margin-bottom: 2px;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center; }\\n      article.welcome > div button.recent {\\n        flex-direction: column;\\n        justify-content: flex-start; }\\n      article.welcome > div button label.name {\\n        font-size: 12pt;\\n        font-weight: 500; }\\n      article.welcome > div button label.path {\\n        opacity: 0.6; }\\n      article.welcome > div button:hover {\\n        background: var(--var-button-hover); }\\n      article.welcome > div button:active {\\n        background: var(--var-button-active); }\\n      article.welcome > div button img {\\n        margin-right: 8px; }\\n        article.welcome > div button img.preview {\\n          width: 332px;\\n          height: auto;\\n          margin: 0; }\\n  article.welcome canvas.previewGenerator {\\n    position: absolute;\\n    pointer-events: none;\\n    opacity: 0; }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/typeedit/styles/welcome.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,aAAa;EACb,uBAAuB;EACvB,uBAAuB,EAAA;EAH3B;IAMQ,YAAY;IACZ,0BAA0B;IAE1B,YAAY;IAEZ,aAAa;IACb,sBAAsB,EAAA;IAZ9B;MAeY,YAAY;MACZ,gBAAgB,EAAA;IAhB5B;MAoBY,aAAa;MACb,qCAAqC;MACrC,QAAQ,EAAA;IAtBpB;MA0BY,eAAe;MACf,cAAc;MAEd,SAAS;MAET,kBAAkB,EAAA;IA/B9B;MAmCY,eAAe;MACf,gBAAgB;MAEhB,wBAAwB;MAExB,kBAAkB,EAAA;IAxC9B;MA4CY,gBAAgB;MAEhB,kBAAkB,EAAA;IA9C9B;MAkDY,WAAW;MAEX,+BAA+B;MAC/B,yBAAyB;MAEzB,oBAAoB;MAEpB,YAAY;MACZ,aAAa;MACb,gBAAgB;MAChB,sCAAsC;MACtC,kBAAkB;MAClB,kBAAkB;MAElB,aAAa;MACb,mBAAmB;MACnB,uBAAuB,EAAA;MAlEnC;QAqEgB,sBAAsB;QACtB,2BAA2B,EAAA;MAtE3C;QA0EgB,eAAe;QACf,gBAAgB,EAAA;MA3EhC;QA+EgB,YAAY,EAAA;MA/E5B;QAmFgB,mCAAmC,EAAA;MAnFnD;QAuFgB,oCAAoC,EAAA;MAvFpD;QA2FgB,iBAAiB,EAAA;QA3FjC;UA8FoB,YAAY;UACZ,YAAY;UAEZ,SAAS,EAAA;EAjG7B;IAwGQ,kBAAkB;IAClB,oBAAoB;IACpB,UAAU,EAAA\",\"sourcesContent\":[\"article.welcome {\\n    display: flex;\\n    justify-content: center;\\n    align-items: flex-start;\\n\\n    & > div {\\n        width: 350px;\\n        height: calc(100vh - 80px);\\n\\n        margin: 60px;\\n\\n        display: flex;\\n        flex-direction: column;\\n\\n        div.recentFiles {\\n            flex-grow: 1;\\n            overflow-y: auto;\\n        }\\n\\n        div.buttons {\\n            display: grid;\\n            grid-template-columns: repeat(2, 1fr);\\n            gap: 2px;\\n        }\\n\\n        h1 {\\n            font-size: 40pt;\\n            line-height: 1;\\n\\n            margin: 0;\\n\\n            text-align: center;\\n        }\\n\\n        h3 {\\n            font-size: 14pt;\\n            font-weight: 400;\\n\\n            margin: 0px 0px 24px 0px;\\n\\n            text-align: center;\\n        }\\n\\n        h2 {\\n            font-weight: 400;\\n            \\n            margin-bottom: 8px;\\n        }\\n\\n        button {\\n            width: 100%;\\n\\n            background: var(--var-panel-bg);\\n            color: var(--var-text-fg);\\n\\n            font-family: \\\"Inter\\\";\\n\\n            border: none;\\n            outline: none;\\n            padding: 7px 8px;\\n            border: 1px solid var(--var-panel-sep);\\n            border-radius: 4px;\\n            margin-bottom: 2px;\\n\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n\\n            &.recent {\\n                flex-direction: column;\\n                justify-content: flex-start;\\n            }\\n\\n            label.name {\\n                font-size: 12pt;\\n                font-weight: 500;\\n            }\\n\\n            label.path {\\n                opacity: 0.6;\\n            }\\n    \\n            &:hover {\\n                background: var(--var-button-hover);\\n            }\\n        \\n            &:active {\\n                background: var(--var-button-active);\\n            }\\n\\n            img {\\n                margin-right: 8px;\\n\\n                &.preview {\\n                    width: 332px;\\n                    height: auto;\\n\\n                    margin: 0;\\n                }\\n            }\\n        }\\n    }\\n\\n    canvas.previewGenerator {\\n        position: absolute;\\n        pointer-events: none;\\n        opacity: 0;\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","import \"./typeedit/styles/app.scss\"\nimport \"./typeedit/styles/app/main.scss\"\nimport \"./typeedit/styles/app/panel.scss\"\nimport \"./typeedit/styles/app/editor.scss\"\nimport \"./typeedit/styles/app/controls.scss\"\n\nimport \"./typeedit/styles/welcome.scss\"\n\nimport app, { currentFont } from \"./typeedit/app\"\nimport paper from \"paper\"\nimport { remote } from \"electron\"\nimport { basename, extname } from \"path\"\nimport { importFont_opentype } from \"./typeedit/io/opentype.js/import\"\nimport { Font } from \"./typeedit/font/font\"\nimport { exportFont_opentype } from \"./typeedit/io/opentype.js/export\"\nimport { existsSync, readFileSync, writeFileSync } from \"fs\"\nimport { setOtfccPath } from \"./typeedit/io/otfcc/import\"\nimport { createFontPreview } from \"./typeedit/utils/preview\"\nimport { FTEX1 } from \"./typeedit/io/ftex/ftex\"\nimport { SmartBuffer } from \"smart-buffer\"\nimport { openFont, saveFont } from \"./typeedit/io/io\"\nimport { prepareFontSettings, prepareTabbedPanel } from \"./typeedit/ui/panel\"\n\nconsole.log(remote)\n\nconst scope = new paper.PaperScope()\nscope.install(window)\nscope.setup(new paper.Size(1000, 1000))\n\ntype RecentFile = {\n    filePath: string\n    fontName: string\n    thumbnail: string\n}\n\nconst recentFiles: RecentFile[] = JSON.parse(\n    localStorage.getItem(\"recentFiles\")\n) ?? []\n\nif (existsSync(\"./otfcc_test\")) {\n    // There are otfcc binaries\n    // NOTE: still testing this part, so they aren't included in the repo\n    setOtfccPath(\"./otfcc_test\")\n}\n\nrecentFiles.forEach(\n    file => {\n        if (!file || !file.filePath) return\n        \n        const btn = document.createElement(\"button\")\n        btn.classList.add(\"recent\")\n\n        const fontPreview = document.createElement(\"img\")\n        fontPreview.classList.add(\"preview\")\n        fontPreview.src = file.thumbnail\n        btn.appendChild(fontPreview)\n\n        const fontNameLabel = document.createElement(\"label\")\n        fontNameLabel.classList.add(\"name\")\n        fontNameLabel.textContent = file.fontName\n        btn.appendChild(fontNameLabel)\n\n        const filePathLabel = document.createElement(\"label\")\n        filePathLabel.classList.add(\"path\")\n        filePathLabel.textContent = basename(file.filePath)\n        btn.appendChild(filePathLabel)\n\n        btn.addEventListener(\n            \"click\", () => {\n                const font = openFont(file.filePath)\n                \n                const welcome = document.querySelector(\"article.welcome\") as HTMLDivElement\n                welcome.style.display = \"none\"\n                    \n                app(font)\n\n                const index = recentFiles.findIndex(\n                    p => p.filePath === file.filePath\n                )\n                if (index >= 0) {\n                    const item = recentFiles[index]\n                    recentFiles.splice(index, 1)\n                    recentFiles.unshift(item)\n\n                    localStorage.setItem(\n                        \"recentFiles\",\n                        JSON.stringify(\n                            recentFiles.slice(0, 8)\n                        )\n                    )\n                }\n            }\n        )\n\n        document.querySelector(\"div.recentFiles\").appendChild(btn)\n    }\n)\n\ndocument.querySelectorAll(\"button.newFont\").forEach(\n    btn => btn.addEventListener(\n        \"click\", () => {\n            const welcome = document.querySelector(\"article.welcome\") as HTMLDivElement\n            welcome.style.display = \"none\"\n\n            app(Font.createBlank())\n        }\n    )\n)\n\ndocument.querySelectorAll(\"button.openFont\").forEach(\n    btn => btn.addEventListener(\n        \"click\", () => {\n            remote.dialog.showOpenDialog(\n                remote.getCurrentWindow(),\n                {\n                    filters: [\n                        {\n                            name: \"Supported fonts\",\n                            extensions: [\n                                \"ftex\", \"otf\", \"ttf\"\n                            ]\n                        },\n                        {\n                            name: \"FTEX project file\",\n                            extensions: [\"ftex\"]\n                        },\n                        {\n                            name: \"OpenType fonts\",\n                            extensions: [\"otf\"]\n                        },\n                        {\n                            name: \"TrueType fonts\",\n                            extensions: [\"ttf\"]\n                        }\n                    ],\n                    properties: [\"openFile\"]\n                }\n            ).then(result => {\n                if (\n                    result.canceled ||\n                    result.filePaths.length !== 1\n                ) return\n\n                try {\n                    const font = openFont(result.filePaths[0])\n\n                    const welcome = document.querySelector(\"article.welcome\") as HTMLDivElement\n                    welcome.style.display = \"none\"\n\n                    app(font)\n\n                    const index = recentFiles.findIndex(\n                        p => p.filePath === result.filePaths[0]\n                    )\n                    if (index >= 0) recentFiles.splice(index, 1)\n\n                    recentFiles.unshift(\n                        {\n                            filePath: result.filePaths[0],\n                            fontName: font.info.fontFamily + \" \" +\n                                      font.info.fontSubfamily,\n                            thumbnail: createFontPreview(font)\n                        }\n                    )\n                    localStorage.setItem(\n                        \"recentFiles\",\n                        JSON.stringify(\n                            recentFiles.slice(0, 8)\n                        )\n                    )\n                } catch(e) {\n                    // Well, error!\n                    console.error(e)\n                    alert(\"Couldn't load the font file.\")\n                }\n            })\n        }\n    )\n)\n\ndocument.querySelectorAll(\"button.saveFont\").forEach(\n    btn => btn.addEventListener(\n        \"click\", () => {\n            remote.dialog.showSaveDialog(\n                remote.getCurrentWindow(),\n                {\n                    filters: [\n                        {\n                            name: \"FTEX project file\",\n                            extensions: [\"ftex\"]\n                        },\n                        {\n                            name: \"OpenType fonts\",\n                            extensions: [\"otf\"]\n                        },\n                        {\n                            name: \"TrueType fonts\",\n                            extensions: [\"ttf\"]\n                        }\n                    ],\n                    defaultPath: currentFont.info.fontFamily +\n                                 \"-\" + currentFont.info.fontSubfamily\n                }\n            ).then(result => {\n                if (result.canceled) return\n\n                saveFont(currentFont, result.filePath)\n            })\n        }\n    )\n)\n\ndocument.body.addEventListener(\"keydown\", (e) => {\n    if (e.code === \"KeyZ\" && e.ctrlKey) {\n        e.preventDefault()\n    }\n})\n\ndocument.addEventListener(\"drop\", (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n\n    if (!e.dataTransfer.files.length) return\n\n    try {\n        const path = e.dataTransfer.files.item(0).path\n        const font = openFont(path)\n        if (!font) return\n        \n        const welcome = document.querySelector(\"article.welcome\") as HTMLDivElement\n        welcome.style.display = \"none\"\n\n        app(font)\n\n        const index = recentFiles.findIndex(\n            p => p.filePath === path\n        )\n        if (index >= 0) recentFiles.splice(index, 1)\n\n        recentFiles.unshift(\n            {\n                filePath: path,\n                fontName: font.info.fontFamily + \" \" +\n                          font.info.fontSubfamily,\n                thumbnail: createFontPreview(font)\n            }\n        )\n        localStorage.setItem(\n            \"recentFiles\",\n            JSON.stringify(\n                recentFiles.slice(0, 8)\n            )\n        )\n    } catch (e) {\n        // Well, error!\n        console.error(e)\n        alert(\"Couldn't load the font file.\")\n    }\n})\n\ndocument.addEventListener(\"dragover\", (e) => { \n    e.preventDefault()\n    e.stopPropagation()\n}); \n\nprepareTabbedPanel()\n\n// load(\"test/Inter-Regular.otf\").then(\n//     (font) => {\n//         app(font)\n//     }\n// )","import { BezierPenTool } from \"./viewport/tools/bezierPen\"\nimport { HandleTool } from \"./viewport/tools/handle\"\nimport { GlyphContext } from \"./viewport/context/glyph\"\nimport { updateSubactions } from \"./ui/actionbar\"\nimport { setupViewport } from \"./ui/viewport\"\nimport { prepareGlyphBar } from \"./ui/glyphBar\"\nimport { prepareGlyphList } from \"./ui/glyphList\"\nimport { ITool, ToolSubAction } from \"./viewport/tools/tool\"\nimport { undo, redo } from \"./undo/history\"\nimport { prepareToolbar, setActiveTool } from \"./ui/toolbar\"\nimport { Font } from \"./font/font\"\nimport { RectangleTool } from \"./viewport/tools/rectangle\"\nimport { EllipseTool } from \"./viewport/tools/ellipse\"\nimport { addFontSettingsEvents, prepareFontSettings } from \"./ui/panel\"\nimport { prepareSnappingPanel } from \"./ui/panel/snapping\"\nimport { prepareFontInfoPanel } from \"./ui/panel/fontInfo\"\n\nexport let currentFont: Font = null\n\nconst globalSubActions: ToolSubAction[] = [\n    {\n        name: \"Undo\",\n        icon: \"undo\",\n        accelerator: \"^KeyZ\",\n        handler: () => {\n            undo()\n        }\n    },\n    {\n        name: \"Redo\",\n        icon: \"redo\",\n        accelerator: \"^+KeyZ\",\n        handler: () => {\n            redo()\n        }\n    },\n]\n\nconst globalTools = [\n    new HandleTool(),\n    new BezierPenTool(),\n    new RectangleTool(),\n    new EllipseTool()\n]\n\nlet currentKeybCallback: (e: KeyboardEvent) => void = null\n\nexport default (font: Font) => {\n    currentFont = font\n\n    document.title = `${font.info.fontFamily} - FTE`\n    prepareGlyphList(font)\n\n    prepareFontSettings()\n    addFontSettingsEvents()\n    \n    prepareFontInfoPanel(font)\n    prepareSnappingPanel(font)\n\n    const context = new GlyphContext(\n        \"ABC\".split(\"\").map(\n            chr => font.glyphs.find(g => g.codePoint === chr.codePointAt(0))\n        ), 0\n    )\n\n    const viewport = setupViewport(context)\n    viewport.setTool(new HandleTool())\n    updateSubactions(viewport, [globalSubActions, ...viewport.tool.subactions.map(s => s.subactions)])\n    \n    prepareToolbar(\n        globalTools,\n        globalTools[0],\n        (tool: ITool) => {\n            viewport.setTool(tool)\n            updateSubactions(\n                viewport,\n                [globalSubActions, ...tool.subactions.map(s => s.subactions)]\n            )\n        }\n    )\n\n    prepareGlyphBar(viewport)\n\n    viewport.updateViewportSize(false)\n    viewport.co.translate(\n        (viewport.domCanvas.width - context.glyph.metrics.rightBearing) / 2,\n        (viewport.domCanvas.height - 512) / 2\n    )\n    viewport.render()\n\n    font.on(\"settingChanged\", () => viewport.render())\n\n    if (currentKeybCallback)\n        window.removeEventListener(\"keyup\", currentKeybCallback)\n\n    currentKeybCallback = (e: KeyboardEvent) => {\n        if (document.activeElement !== document.body) return // for now\n\n        let accelString = e.code\n        if (e.shiftKey) accelString = \"+\" + accelString\n        if (e.ctrlKey) accelString = \"^\" + accelString\n\n        for (let action of [\n            globalTools,\n            globalSubActions, ...viewport.tool.subactions.map(s => s.subactions)\n        ].flat()) {\n            if (action.accelerator === accelString) {\n                if (\"handler\" in action) {\n                    action.handler()\n                    viewport.render()\n                    if (viewport.context instanceof GlyphContext)\n                        viewport.context.glyph.emit(\"modified\")\n                } else {\n                    viewport.setTool(action)\n                    updateSubactions(\n                        viewport,\n                        [globalSubActions, ...action.subactions.map(s => s.subactions)]\n                    )\n                    setActiveTool(globalTools.indexOf(action))\n                }\n                e.preventDefault()\n                return false\n            }\n        }\n    }\n    window.addEventListener(\"keyup\", currentKeybCallback)\n}","import { Glyph } from \"./glyph\"\nimport { EventEmitter } from \"events\"\nimport { createFontSettings, FontSettings } from \"../settings/settings\"\n\nexport type FontMetrics = {\n    ascender: number,\n    descender: number,\n    xHeight: number\n}\n\nexport type FontInfo = {\n    copyright: string,\n    description: string,\n    designer: string,\n    designerURL: string,\n    fontFamily: string,\n    fontSubfamily: string,\n    fullName: string,\n    license: string,\n    licenseURL: string,\n    manufacturer: string,\n    manufacturerURL: string,\n    postScriptName: string,\n    uniqueID: string,\n    version: string,\n    trademark: string,\n    compatibleFullName: string\n}\n\nexport type FontColors = {\n    red: number,\n    green: number,\n    blue: number\n}\n\nexport class Font extends EventEmitter {\n    public palette: FontColors[] = []\n\n    public ownSettings: Partial<FontSettings> = {}\n    public settings: FontSettings\n\n    public info: FontInfo\n\n    constructor(\n        info: Partial<FontInfo>,\n        public metrics: FontMetrics,\n        public glyphs: Glyph[]\n    ) {\n        super()\n\n        this.settings = createFontSettings(this, this.ownSettings)\n\n        this.info = Object.assign(\n            {\n                copyright: \"\",\n                description: \"\",\n                designer: \"\",\n                designerURL: \"\",\n                fontFamily: \"\",\n                fontSubfamily: \"\",\n                fullName: \"\",\n                license: \"\",\n                licenseURL: \"\",\n                manufacturer: \"\",\n                manufacturerURL: \"\",\n                postScriptName: \"\",\n                uniqueID: \"\",\n                version: \"\",\n                trademark: \"\",\n                compatibleFullName: \"\"\n            }, info\n        )\n    }\n\n    static createBlank() {\n        // Just the base Latin alphanumeric for now\n        const baseCharacterSet = \" 0123456789-=_+!@#$%^&*(){}[]\\\\\\/,.<>?;':\\\"~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\"\n        const specialNames: {\n            [key: string]: string\n        } = {\n            \" \": \"space\",\n            \"'\": \"quote\",\n            \"\\\"\": \"dblquote\",\n            \"!\": \"exclam\",\n            \"@\": \"at\",\n            \"#\": \"hash\",\n            \"$\": \"dollar\",\n            \"%\": \"percent\",\n            \"^\": \"caret\",\n            \"&\": \"ampersand\",\n            \"*\": \"asterisk\"\n        }\n\n        const font = new Font(\n            {\n                fontFamily: \"New font\",\n                fontSubfamily: \"Regular\"\n            },\n            {\n                ascender: -96,\n                descender: 512 + 96,\n                xHeight: 196\n            },\n            []\n        )\n        font.addGlyph(\n            new Glyph(\n                font, \".notdef\", null,\n                {\n                    leftBearing: 0,\n                    rightBearing: 320\n                },\n                []\n            ),\n            ...baseCharacterSet.split(\"\").map(\n                char => {\n                    const name = (char in specialNames) ? specialNames[char] : char\n\n                    return new Glyph(\n                        font, name, char.codePointAt(0),\n                        {\n                            leftBearing: 0,\n                            rightBearing: 320\n                        },\n                        []\n                    )\n                }\n            )\n        )\n\n        return font\n    }\n\n    addGlyph(...glyphs: Glyph[]) {\n        this.glyphs.push(...glyphs)\n    }\n}","import { EventEmitter } from \"events\"\nimport { BezierCurve } from \"../geometry/bezier/curve\"\nimport { Font } from \"./font\"\n\nexport type GlyphMetrics = {\n    leftBearing: number,\n    rightBearing: number\n}\n\nexport class Glyph extends EventEmitter {\n    public finalBeziers: BezierCurve[] = []\n\n    constructor(\n        public font: Font,\n        public name: string,\n        public codePoint: number,\n        public metrics: GlyphMetrics,\n        public beziers: BezierCurve[]\n    ) {\n        super()\n\n        if (!name) {\n            this.name = codePoint ?\n                   `uni${codePoint.toString(16).toUpperCase().padStart(4, \"0\")}` :\n                   \".notdef\"\n        }\n        \n        this.beziers.forEach(b => b.glyph = this)\n        this.finalBeziers = beziers // for now\n\n        this.on(\"modified\", () => {\n            this.font.emit(\"glyphModified\", this)\n        })\n    }\n\n    get comparableCodePoint() {\n        if (this.name === \".notdef\") return -2\n        if (this.name === \".null\") return -1\n        return this.codePoint ?? Infinity\n    }\n\n    updateBeziers() {\n        // Nothing for now\n        // TODO: modifiers\n        this.finalBeziers = this.beziers\n    }\n}","import { EventEmitter } from \"events\"\nimport { Glyph } from \"../../font/glyph\"\nimport { BezierPoint } from \"./point\"\nimport paper from \"paper\"\nimport { Point } from \"../point\"\nimport { lerp } from \"../../utils/lerp\"\n\nexport class BezierCurve extends EventEmitter {\n    public points: BezierPoint[] = []\n    public closed = true\n\n    constructor(\n        public glyph?: Glyph\n    ) {\n        super()\n\n        if (this.glyph) this.glyph.emit(\"modified\")\n        this.on(\"modified\", () => {\n            if (this.glyph) this.glyph.emit(\"modified\")\n        })\n    }\n\n    addPoint(point: BezierPoint) {\n        point.curve = this\n        this.points.push(point)\n        this.emit(\"modified\")\n        this.emit(\"newPoint\", point)\n    }\n\n    lineTo(x: number, y: number) {\n        this.addPoint(\n            new BezierPoint(\n                new Point(x, y),\n                new Point(x, y),\n                new Point(x, y)\n            )\n        )\n    }\n\n    cubicCurveTo(\n        c1x: number, c1y: number,\n        c2x: number, c2y: number,\n        x: number, y: number\n    ) {\n        if (!this.points.length) return\n\n        const prev = this.points[this.points.length - 1]\n\n        prev.after.x = c1x\n        prev.after.y = c1y\n\n        this.addPoint(\n            new BezierPoint(\n                new Point(x, y),\n                new Point(c2x, c2y),\n                new Point(x, y)\n            )\n        )\n    }\n\n    quadraticCurveTo(\n        cx: number, cy: number,\n        x: number, y: number\n    ) {\n        if (!this.points.length) return\n\n        const prev = this.points[this.points.length - 1]\n\n        prev.after.x = lerp(2 / 3, prev.base.x, cx)\n        prev.after.y = lerp(2 / 3, prev.base.y, cy)\n\n        this.addPoint(\n            new BezierPoint(\n                new Point(x, y),\n                new Point(\n                    lerp(1 / 3, cx, x),\n                    lerp(1 / 3, cy, y)\n                ),\n                new Point(x, y)\n            )\n        )\n    }\n\n    // see: https://www.element84.com/blog/determining-the-winding-of-a-polygon-given-as-a-set-of-ordered-points\n    get clockwise() {\n        let sum = 0\n\n        for (let i = 0; i < this.points.length; i++) {\n            const point = this.points[i].base\n            const next = this.points[\n                (i + 1) % this.points.length\n            ].base\n\n            sum += (next.x - point.x) * (next.y - point.y)\n        }\n\n        return sum < 0 // inverted Y axis!\n    }\n\n    reverse() {\n        this.points.forEach(\n            p => p.reverse()\n        )\n        this.points = this.points.reverse()\n    }\n\n    static getPath2D(beziers: BezierCurve[]) {\n        const path = new Path2D()\n\n        for (let bezier of beziers) {\n            for (let i = 0; i < bezier.points.length; i++) {\n                const p1 = bezier.points[i]\n                const p2 = bezier.points[(i + 1) % bezier.points.length]\n                if (i === 0)\n                    path.moveTo(p1.base.x, p1.base.y)\n    \n                path.bezierCurveTo(\n                    p1.after.x, p1.after.y,\n                    p2.before.x, p2.before.y,\n                    p2.base.x, p2.base.y\n                )\n            }\n        }\n\n        return path\n    }\n\n    getPaperPath(): paper.Path {\n        const path = new paper.Path()\n        if (!this.points.length) return path\n        \n        const first = this.points[0].base\n        path.moveTo(new paper.Point(first.x, first.y))\n\n        for (let i = 0; i < this.points.length; i++) {\n            const pt = this.points[i]\n            const next = this.points[\n                (i + 1) % this.points.length\n            ]\n\n            const c1 = pt.after\n            const c2 = next.before\n            const b = next.base\n\n            path.cubicCurveTo(\n                new paper.Point(c1.x, c1.y),\n                new paper.Point(c2.x, c2.y),\n                new paper.Point(b.x, b.y)\n            )\n        }\n\n        path.closePath()\n\n        return path\n    }\n    \n    static fromPaperPath(path: paper.Path): BezierCurve {\n        const curve = new BezierCurve()\n\n        path.segments.forEach(\n            seg => curve.addPoint(\n                new BezierPoint(\n                    new Point(seg.point.x, seg.point.y),\n                    new Point(\n                        seg.point.x + seg.handleIn.x,\n                        seg.point.y + seg.handleIn.y\n                    ),\n                    new Point(\n                        seg.point.x + seg.handleOut.x,\n                        seg.point.y + seg.handleOut.y\n                    )\n                )\n            )\n        )\n\n        return curve\n    }\n\n    static fromPaperPathItem(item: paper.PathItem): BezierCurve[] {\n        if (item instanceof paper.Path)\n            return [BezierCurve.fromPaperPath(item)]\n        else if (item instanceof paper.CompoundPath)\n            return item.children.map(\n                ch => {\n                    if (ch instanceof paper.Path)\n                        return BezierCurve.fromPaperPath(ch)\n                    return null\n                }\n            ).filter(c => c)\n        \n        return []\n    }\n}\n\n","import { EventEmitter } from \"events\"\nimport { Point } from \"../point\"\nimport { BezierCurve } from \"./curve\"\n\nexport enum BezierPointType {\n    free, auto, sharp\n}\n\nexport class BezierPoint extends EventEmitter {\n    public curve: BezierCurve = null\n\n    constructor(\n        public base: Point,\n        public before: Point,\n        public after: Point,\n        public type: BezierPointType = BezierPointType.auto\n    ) {\n        super()\n        \n        this.on(\"modified\", () => {\n            if (this.curve) this.curve.emit(\"modified\")\n        })\n    }\n\n    reverse() {\n        const t = this.before\n        this.before = this.after\n        this.after = t\n    }\n\n    determineType() {\n        const radius1 = this.after.distance(this.base)\n        const radius2 = this.before.distance(this.base)\n\n        if (radius1 < 0.0001 && radius2 < 0.0001) {\n            this.type = BezierPointType.sharp\n            return\n        }\n\n        const angle1 = this.after.angle(this.base)\n        const angle2 = this.before.angle(this.base)\n\n        const angleDiff = Math.abs(angle1 - angle2)\n        const piDiff = angleDiff / Math.PI\n\n        if (Math.abs(piDiff - Math.round(piDiff)) < 0.0001)\n            this.type = BezierPointType.auto\n    }\n\n    movePoint(point: Point, dPos: Point) {\n        if (point === this.base) {\n            this.base.move(dPos.x, dPos.y)\n            this.before.move(dPos.x, dPos.y)\n            this.after.move(dPos.x, dPos.y)\n        } else {\n            const otherPoint = point === this.before ?\n                               this.after : this.before\n            \n            point.move(dPos.x, dPos.y)\n\n            if (this.type === BezierPointType.auto) {\n                const otherRadius = otherPoint.distance(this.base)\n                const angle = point.angle(this.base)\n\n                otherPoint.x = otherRadius * Math.cos(angle + Math.PI) + this.base.x\n                otherPoint.y = otherRadius * Math.sin(angle + Math.PI) + this.base.y\n            }\n        }\n\n        this.curve.emit(\"modified\")\n    }\n}","export class Point {\n    constructor(\n        public x = 0,\n        public y = 0\n    ) {}\n\n    move(dx: number, dy: number) {\n        this.x += dx\n        this.y += dy\n    }\n\n    distance(other: Point) {\n        return Math.hypot(\n            this.x - other.x,\n            this.y - other.y\n        )\n    }\n\n    angle(origin: Point) {\n        return Math.atan2(\n            this.y - origin.y,\n            this.x - origin.x\n        )\n    }\n\n    getDiff(last: Point) {\n        return new Point(\n            this.x - last.x,\n            this.y - last.y\n        )\n    }\n\n    copy(ref: Point) {\n        this.x = ref.x\n        this.y = ref.y\n    }\n}","import { SmartBuffer } from \"smart-buffer\"\nimport { deflateSync, inflateSync } from \"zlib\"\nimport { Font } from \"../../font/font\"\nimport { Glyph } from \"../../font/glyph\"\nimport { BezierCurve } from \"../../geometry/bezier/curve\"\nimport { BezierPoint } from \"../../geometry/bezier/point\"\nimport { Point } from \"../../geometry/point\"\nimport { FontSettings } from \"../../settings/settings\"\n\nconst fontInfoIndices = [\n    \"copyright\",\n    \"description\",\n    \"designer\",\n    \"designerURL\",\n    \"fontFamily\",\n    \"fontSubfamily\",\n    \"fullName\",\n    \"license\",\n    \"licenseURL\",\n    \"manufacturer\",\n    \"manufacturerURL\",\n    \"postScriptName\",\n    \"uniqueID\",\n    \"version\",\n    \"trademark\",\n    \"compatibleFullName\"\n]\n\ntype FMET = {\n    ascender: number,\n    descender: number,\n    xHeight: number\n}\n\ntype OUTLEntry = {\n    handles: {\n        type: number,\n        base: number[],\n        before: number[],\n        after: number[]\n    }[],\n    startIndices: number[]\n}\n\ntype GLPHEntry = {\n    codePoint: number,\n    name: string,\n    leftSide: number,\n    rightSide: number,\n    outlines: number[]\n}\n\nenum FTESEntryType {\n    boolean = 1, number, string\n}\n\ntype FTESEntry = {\n    setting: string,\n    type: FTESEntryType,\n    value: boolean | number | string\n}\n\nexport class FTEX1 {\n    protected ftexVersion = 1\n\n    protected fmet: FMET\n    \n    protected outl: OUTLEntry[] = []\n    protected glph: GLPHEntry[] = []\n    protected fnam: {\n        index: number,\n        name: string\n    }[] = []\n    protected ftes: FTESEntry[] = []\n    protected defl: Buffer[] = []\n\n    get tableCount() {\n        let count = 0\n\n        if (this.fnam.length) count++\n        if (this.fmet) count++\n        if (this.outl.length) count++\n        if (this.glph.length) count++\n        if (this.ftes.length) count++\n\n        return count\n    }\n\n    static fromFont(font: Font) {\n        const ftex = new FTEX1()\n\n        ftex.setFMET(font)\n        ftex.setGLPH(font)\n        ftex.setFNAM(font)\n        ftex.setFTES(font)\n\n        return ftex\n    }\n\n    getFont(): Font {\n        if (this.tableCount < 4) return null\n\n        const info: any = {}\n        this.fnam.forEach(\n            name => info[fontInfoIndices[name.index]] = name.name\n        )\n\n        const metrics = this.fmet\n\n        const font = new Font(info, metrics, [])\n\n        this.ftes.forEach(\n            s => {\n                (font.settings as any)[s.setting] = s.value\n            }\n        )\n\n        this.glph.forEach(\n            g => {\n                if (!g.outlines.length) return\n\n                font.addGlyph(\n                    new Glyph(\n                        font,\n                        g.name,\n                        (g.codePoint === 0) ? undefined : g.codePoint,\n                        {\n                            leftBearing: g.leftSide,\n                            rightBearing: g.rightSide\n                        },\n                        this.getCurvesFromOUTL(\n                            this.outl[g.outlines[0]]\n                        )\n                    )\n                )\n            }\n        )\n\n        return font\n    }\n\n    getCurvesFromOUTL(outl: OUTLEntry): BezierCurve[] {\n        return outl.startIndices.map(\n            (index, i) => {\n                const handles = (i === outl.startIndices.length - 1) ?\n                                outl.handles.slice(index) :\n                                outl.handles.slice(index, outl.startIndices[i + 1])\n                const curve = new BezierCurve()\n\n                handles.forEach(\n                    h => {\n                        const point = new BezierPoint(\n                            new Point(h.base[0], h.base[1]),\n                            new Point(h.before[0], h.before[1]),\n                            new Point(h.after[0], h.after[1])\n                        )\n                        point.type = h.type\n\n                        curve.addPoint(point)\n                    }\n                )\n                \n                return curve\n            }\n        )\n    }\n\n    encode(): SmartBuffer {\n        const buf = new SmartBuffer()\n        this.encodeFTEXHeader(buf)\n\n        // The OUTL table will be compressed by default\n        const outlData = new SmartBuffer()\n        this.encodeOUTL(outlData)\n        this.compressTable(outlData)\n\n        this.encodeDEFL(buf)\n\n        if (this.fnam.length) this.encodeFNAM(buf)\n        if (this.fmet) this.encodeFMET(buf)\n        if (this.glph.length) this.encodeGLPH(buf)\n        if (this.ftes.length) this.encodeFTES(buf)\n\n        return buf\n    }\n\n    decode(buffer: SmartBuffer) {\n        if (\n            buffer.readString(4, \"ascii\") !== \"FTEX\"\n        )\n            throw new Error(\"Not a supported FTEX file.\")\n        if (\n            buffer.readUInt8() !== this.ftexVersion\n        )\n            throw new Error(\"Not a supported FTEX version.\")\n    \n        const numTables = buffer.readUInt16LE()\n        const requiredTables = [\n            \"OUTL\", \"GLPH\", \"FMET\", \"FNAM\"\n        ]\n        const supportedTables = [\n            ...requiredTables, \"DEFL\", \"FTES\"\n        ]\n\n        for (let i = 0; i < numTables; i++) {\n            const tag = buffer.readString(4, \"ascii\")\n            \n            if (!supportedTables.includes(tag))\n                throw new Error(`Unsupported table: ${tag}.`)\n\n            const index = requiredTables.indexOf(tag)\n            if (index >= 0)\n                requiredTables.splice(index, 1)\n            \n            this.decodeTable(tag, buffer)\n        }\n\n        this.defl.forEach(\n            buf => {\n                const tableBuffer = this.decompressTable(buf)\n\n                const tag = tableBuffer.readString(4, \"ascii\")\n\n                if (!supportedTables.includes(tag))\n                    throw new Error(`Unsupported table: ${tag}.`)\n\n                const index = requiredTables.indexOf(tag)\n                \n                if (index >= 0)\n                    requiredTables.splice(index, 1)\n\n                this.decodeTable(tag, tableBuffer)\n            }\n        )\n\n        if (requiredTables.length)\n            throw new Error(\n                `The following required tables were not found: ${requiredTables.join(\", \")}.`\n            )\n    }\n\n    decodeTable(tag: string, buffer: SmartBuffer) {\n        switch (tag) {\n            case \"DEFL\":\n                this.decodeDEFL(buffer)\n                break\n            case \"FMET\":\n                this.decodeFMET(buffer)\n                break\n            case \"FNAM\":\n                this.decodeFNAM(buffer)\n                break\n            case \"OUTL\":\n                this.decodeOUTL(buffer)\n                break\n            case \"GLPH\":\n                this.decodeGLPH(buffer)\n                break\n            case \"FTES\":\n                this.decodeFTES(buffer)\n                break\n        }\n    }\n\n    encodeVString(buf: SmartBuffer, str: string) {\n        buf.writeUInt16LE(str.length)\n        buf.writeString(str, \"utf-8\")\n    }\n\n    decodeVString(buf: SmartBuffer): string {\n        const length = buf.readUInt16LE()\n        return buf.readString(length, \"utf-8\")\n    }\n\n    // FTEX - File Header\n    encodeFTEXHeader(buffer: SmartBuffer) {\n        buffer.writeString(\"FTEX\", \"ascii\")\n        buffer.writeUInt8(this.ftexVersion)\n        buffer.writeUInt16LE(this.tableCount)\n    }\n\n    // DEFL - Compressed Tables\n    compressTable(table: SmartBuffer) {\n        const buf = table.toBuffer()\n\n        this.defl.push(\n            deflateSync(buf)\n        )\n    }\n\n    decompressTable(defl: Buffer): SmartBuffer {\n        return SmartBuffer.fromBuffer(\n            inflateSync(defl)\n        )\n    }\n\n    encodeDEFL(buffer: SmartBuffer) {\n        buffer.writeString(\"DEFL\", \"ascii\")\n        buffer.writeUInt16LE(this.defl.length)\n\n        this.defl.forEach(\n            buf => {\n                buffer.writeUInt32LE(buf.length)\n                buffer.writeBuffer(buf)\n            }\n        )\n    }\n\n    decodeDEFL(buffer: SmartBuffer) {\n        const count = buffer.readUInt16LE()\n\n        for (let i = 0; i < count; i++) {\n            const length = buffer.readUInt32LE()\n\n            this.defl.push(\n                buffer.readBuffer(length)\n            )\n        }\n    }\n\n    // FMET - Font Vertical Metrics\n    setFMET(font: Font) {\n        this.fmet = font.metrics\n    }\n\n    encodeFMET(buffer: SmartBuffer) {\n        buffer.writeString(\"FMET\", \"ascii\")\n        buffer.writeFloatLE(this.fmet.ascender)\n        buffer.writeFloatLE(this.fmet.descender)\n        buffer.writeFloatLE(this.fmet.xHeight)\n    }\n\n    decodeFMET(buffer: SmartBuffer) {\n        this.fmet = {\n            ascender: buffer.readFloatLE(),\n            descender: buffer.readFloatLE(),\n            xHeight: buffer.readFloatLE()\n        }\n    }\n\n    // OUTL - Outlines\n    addOUTL(beziers: BezierCurve[]) {\n        const handles = beziers.map(\n            b => b.points\n        ).flat().map(\n            p => {\n                return {\n                    type: p.type,\n                    base: [p.base.x, p.base.y],\n                    before: [p.before.x, p.before.y],\n                    after: [p.after.x, p.after.y]\n                }\n            }\n        )\n        const startIndices: number[] = []\n\n        let acc = 0\n        beziers.forEach(\n            b => {\n                startIndices.push(acc)\n                acc += b.points.length\n            }\n        )\n\n        return this.outl.push(\n            {\n                handles,\n                startIndices\n            }\n        ) - 1\n    }\n\n    encodeOUTL(buffer: SmartBuffer) {\n        buffer.writeString(\"OUTL\", \"ascii\")\n        buffer.writeUInt32LE(this.outl.length)\n\n        this.outl.forEach(\n            outl => {\n                buffer.writeUInt16LE(outl.handles.length)\n                buffer.writeUInt16LE(outl.startIndices.length)\n\n                outl.handles.forEach(\n                    h => {\n                        buffer.writeUInt8(h.type)\n                        buffer.writeFloatLE(h.base[0])\n                        buffer.writeFloatLE(h.base[1])\n                        buffer.writeFloatLE(h.before[0])\n                        buffer.writeFloatLE(h.before[1])\n                        buffer.writeFloatLE(h.after[0])\n                        buffer.writeFloatLE(h.after[1])\n                    }\n                )\n                outl.startIndices.forEach(\n                    idx => buffer.writeUInt16LE(idx)\n                )\n            }\n        )\n    }\n\n    decodeOUTL(buffer: SmartBuffer) {\n        const count = buffer.readUInt32LE()\n\n        for (let i = 0; i < count; i++) {\n            const handleCount = buffer.readInt16LE()\n            const curveCount = buffer.readInt16LE()\n\n            const handles: {\n                type: number,\n                base: number[],\n                before: number[],\n                after: number[]\n            }[] = []\n            const startIndices: number[] = []\n\n            for (let j = 0; j < handleCount; j++) {\n                handles.push(\n                    {\n                        type: buffer.readUInt8(),\n                        base: [\n                            buffer.readFloatLE(),\n                            buffer.readFloatLE()\n                        ],\n                        before: [\n                            buffer.readFloatLE(),\n                            buffer.readFloatLE()\n                        ],\n                        after: [\n                            buffer.readFloatLE(),\n                            buffer.readFloatLE()\n                        ]\n                    }\n                )\n            }\n\n            for (let j = 0; j < curveCount; j++) {\n                startIndices.push(buffer.readUInt16LE())\n            }\n\n            this.outl.push(\n                {\n                    handles, startIndices\n                }\n            )\n        }\n    }\n\n    // GLPH - Glyphs\n    setGLPH(font: Font) {\n        font.glyphs.forEach(\n            g => {\n                const outlines = [g.beziers].map(\n                    beziers => this.addOUTL(beziers)\n                )\n\n                this.glph.push(\n                    {\n                        codePoint: g.codePoint,\n                        leftSide: g.metrics.leftBearing,\n                        rightSide: g.metrics.rightBearing,\n                        name: g.name,\n                        outlines\n                    }\n                )\n            }\n        )\n    }\n\n    encodeGLPH(buffer: SmartBuffer) {\n        buffer.writeString(\"GLPH\", \"ascii\")\n        buffer.writeUInt32LE(this.glph.length)\n\n        this.glph.forEach(\n            g => {\n                buffer.writeUInt32LE(g.codePoint ?? 0)\n                this.encodeVString(buffer, g.name)\n                buffer.writeFloatLE(g.leftSide)\n                buffer.writeFloatLE(g.rightSide)\n                buffer.writeUInt16LE(g.outlines.length)\n\n                g.outlines.forEach(\n                    idx => buffer.writeUInt32LE(idx)\n                )\n            }\n        )\n    }\n\n    decodeGLPH(buffer: SmartBuffer) {\n        const count = buffer.readUInt32LE()\n\n        for (let i = 0; i < count; i++) {\n            const outlines: number[] = []\n            const glyph: GLPHEntry = {\n                codePoint: buffer.readUInt32LE(),\n                name: this.decodeVString(buffer),\n                leftSide: buffer.readFloatLE(),\n                rightSide: buffer.readFloatLE(),\n                outlines\n            }\n\n            const outlineCount = buffer.readUInt16LE()\n            for (let j = 0; j < outlineCount; j++) {\n                outlines.push(\n                    buffer.readUInt32LE()\n                )\n            }\n\n            this.glph.push(glyph)\n        }\n    }\n\n    // FNAM - Font Names\n    setFNAM(font: Font) {\n        Object.keys(font.info).forEach(\n            key => {\n                const index = fontInfoIndices.indexOf(key)\n                if (index < 0) return\n\n                this.fnam.push(\n                    {\n                        index,\n                        name: (font.info as any)[key]\n                    }\n                )\n            }\n        )\n    }\n\n    encodeFNAM(buffer: SmartBuffer) {\n        buffer.writeString(\"FNAM\", \"ascii\")\n        buffer.writeUInt8(this.fnam.length)\n\n        this.fnam.forEach(\n            n => {\n                buffer.writeUInt8(n.index)\n                this.encodeVString(buffer, n.name)\n            }\n        )\n    }\n\n    decodeFNAM(buffer: SmartBuffer) {\n        const count = buffer.readUInt8()\n\n        for (let i = 0; i < count; i++) {\n            const type = buffer.readUInt8()\n            const str = this.decodeVString(buffer)\n\n            this.fnam.push(\n                {\n                    index: type,\n                    name: str\n                }\n            )\n        }\n    }\n\n    // FTES - FTE Settings\n    setFTES(font: Font) {\n        Object.keys(font.ownSettings).forEach(\n            (key: keyof FontSettings)  => {\n                const v = font.ownSettings[key] as (boolean | number | string)\n\n                if (typeof v === \"boolean\")\n                    this.ftes.push({\n                        setting: key,\n                        type: FTESEntryType.boolean,\n                        value: v\n                    })\n                else if (typeof v === \"number\")\n                    this.ftes.push({\n                        setting: key,\n                        type: FTESEntryType.number,\n                        value: v\n                    })\n                else if (typeof v === \"string\")\n                    this.ftes.push({\n                        setting: key,\n                        type: FTESEntryType.string,\n                        value: v\n                    })\n            }\n        )\n    }\n\n    encodeFTES(buffer: SmartBuffer) {\n        buffer.writeString(\"FTES\", \"ascii\")\n        buffer.writeUInt16LE(this.ftes.length)\n\n        this.ftes.forEach(\n            setting => {\n                this.encodeVString(buffer, setting.setting)\n                buffer.writeUInt8(setting.type)\n\n                if (setting.type === FTESEntryType.boolean)\n                    buffer.writeUInt8(setting.value ? 1 : 0)\n                else if (setting.type === FTESEntryType.number)\n                    buffer.writeFloatLE(+setting.value)\n                else if (setting.type === FTESEntryType.string)\n                    this.encodeVString(buffer, setting.value.toString())\n            }\n        )\n    }\n\n    decodeFTES(buffer: SmartBuffer) {\n        const count = buffer.readUInt16LE()\n\n        for (let i = 0; i < count; i++) {\n            const setting = this.decodeVString(buffer)\n            const type: FTESEntryType = buffer.readUInt8()\n\n            let value: (boolean | number | string)\n\n            if (type === FTESEntryType.boolean)\n                value = !!buffer.readUInt8()\n            else if (type === FTESEntryType.number)\n                value = buffer.readFloatLE()\n            else if (type === FTESEntryType.string)\n                value = this.decodeVString(buffer)\n\n            this.ftes.push({\n                setting, type, value\n            })\n        }\n    }\n}","import { readFileSync, writeFileSync } from \"fs\";\nimport { extname } from \"path\";\nimport { SmartBuffer } from \"smart-buffer\";\nimport { Font } from \"../font/font\";\nimport { FTEX1 } from \"./ftex/ftex\";\nimport { exportFont_opentype } from \"./opentype.js/export\";\nimport { importFont_opentype } from \"./opentype.js/import\";\n\nexport function openFont(filePath: string): Font {\n    const ext = extname(filePath.toLowerCase())\n\n    if (ext === \".ftex\") {\n        // FTE Font\n        const ftex = new FTEX1()\n        ftex.decode(\n            SmartBuffer.fromBuffer(readFileSync(filePath))\n        )\n\n        return ftex.getFont()\n    } else {\n        // Opentype.js, take over\n        return importFont_opentype(filePath)\n    }\n}\n\nexport function saveFont(font: Font, filePath: string) {\n    const ext = extname(filePath.toLowerCase())\n\n    if (ext === \".ftex\") {\n        // FTE Font\n        const ftex = FTEX1.fromFont(font)\n        const buf = ftex.encode().toBuffer()\n\n        writeFileSync(filePath, buf)\n    } else if (ext === \".ttf\" || ext === \".otf\") {\n        // Opentype.js\n        exportFont_opentype(font, filePath)\n    }\n}","import { Font } from \"../../font/font\"\nimport {\n    Font as OTFont,\n    Glyph as OTGlyph,\n    Path as OTPath\n} from \"opentype.js\"\nimport { Glyph } from \"../../font/glyph\"\nimport { Point } from \"../../geometry/point\"\nimport { writeFileSync } from \"fs\"\n\nfunction glyphToOTPath(glyph: Glyph, targetCapHeight = 1000) {\n    const path = new OTPath()\n    const scaleFactor = targetCapHeight / 512\n\n    const conv = (point: Point) => {\n        return {\n            x: (point.x - glyph.metrics.leftBearing) * scaleFactor,\n            y: (512 - point.y) * scaleFactor\n        }\n    }\n\n    for (const bezier of glyph.finalBeziers) {\n        if (!bezier.points.length) continue\n        \n        const first = conv(bezier.points[0].base)\n        path.moveTo(first.x, first.y)\n\n        for (let i = 0; i < bezier.points.length; i++) {\n            const pt = bezier.points[i]\n            const next = bezier.points[\n                (i + 1) % bezier.points.length\n            ]\n\n            const c1 = conv(pt.after)\n            const c2 = conv(next.before)\n            const b = conv(next.base)\n\n            path.curveTo(\n                c1.x, c1.y,\n                c2.x, c2.y,\n                b.x, b.y\n            )\n        }\n\n        path.closePath()\n    }\n\n    return path\n}\n\nexport function exportFont_opentype(font: Font, targetFile: string) {\n    const notDef = new OTGlyph({\n        name: \".notdef\",\n        unicode: 0,\n        advanceWidth: 650, // TODO!!!\n        path: new OTPath()\n    })\n\n    const targetCapHeight = 2000\n    const scaleFactor = targetCapHeight / 512\n    \n    const otfont = new OTFont({\n        familyName: font.info.fontFamily,\n        styleName: font.info.fontSubfamily,\n        postScriptName: `${font.info.fontFamily}-${font.info.fontSubfamily}`,\n        unitsPerEm: (font.metrics.descender - font.metrics.ascender) * scaleFactor, // TODO!!\n        ascender: (512 - font.metrics.ascender) * scaleFactor,\n        descender: (512 - font.metrics.descender) * scaleFactor,\n        glyphs: [\n            ...font.glyphs.filter(\n                g => g.finalBeziers.length\n            ).map(g => new OTGlyph({\n                name: g.name,\n                unicode: g.codePoint,\n                advanceWidth: Math.round((g.metrics.rightBearing - g.metrics.leftBearing) * scaleFactor),\n                path: glyphToOTPath(g, targetCapHeight)\n            })),\n            notDef\n        ],\n        ///@ts-ignore\n        tables: {\n            version: 4,\n            achVendID: \"SFTE\",\n            sCapHeight: targetCapHeight,\n            sxHeight: (512 - font.metrics.xHeight) * scaleFactor,\n            sTypoAscender: (512 - font.metrics.ascender) * scaleFactor,\n            sTypoDescender: (512 - font.metrics.descender) * scaleFactor\n        }\n    })\n\n    const buf = Buffer.from(otfont.toArrayBuffer())\n\n    writeFileSync(targetFile, buf)\n}","import { Font as OTFont, Glyph as OTGlyph, load, loadSync, PathCommand } from \"opentype.js\";\nimport { Font, FontInfo } from \"../../font/font\";\nimport { Glyph } from \"../../font/glyph\";\nimport { BezierCurve } from \"../../geometry/bezier/curve\";\nimport { BezierPoint, BezierPointType } from \"../../geometry/bezier/point\";\nimport { Point } from \"../../geometry/point\";\nimport { lerp } from \"../../utils/lerp\";\n\nfunction convertOTCoordinates(\n    otfont: OTFont, x: number, y: number\n): {x: number, y: number} {\n    const scaleFactor = 512 / otfont.tables.os2.sCapHeight\n\n    return {\n        x: x * scaleFactor,\n        y: (otfont.tables.os2.sCapHeight - y) * scaleFactor // easier to work with\n    }\n}\n\nfunction generateCurvesFromOTGlyph(\n    otfont: OTFont, otglyph: OTGlyph\n): BezierCurve[] {\n    const curves: BezierCurve[] = []\n    let curve = new BezierCurve()\n\n    const conv = (\n        x: number, y: number\n    ) => convertOTCoordinates(otfont, x, y)\n    \n    ///@ts-ignore\n    otglyph.path.commands.forEach(\n        (cmd: PathCommand) => {\n            switch (cmd.type) {\n                case \"M\": {\n                    if (curve.points.length)\n                        curves.push(curve)\n                    \n                    curve = new BezierCurve()\n                    \n                    const coords = conv(cmd.x, cmd.y)\n                    curve.addPoint(\n                        new BezierPoint(\n                            new Point(coords.x, coords.y),\n                            new Point(coords.x, coords.y),\n                            new Point(coords.x, coords.y),\n                            BezierPointType.free\n                        )\n                    )\n\n                    break\n                }\n                case \"L\": {\n                    const coords = conv(cmd.x, cmd.y)\n                    curve.addPoint(\n                        new BezierPoint(\n                            new Point(coords.x, coords.y),\n                            new Point(coords.x, coords.y),\n                            new Point(coords.x, coords.y)\n                        )\n                    )\n\n                    break\n                }\n                case \"C\": {\n                    const c1coords = conv(cmd.x1, cmd.y1)\n                    const c2coords = conv(cmd.x2, cmd.y2)\n                    const coords = conv(cmd.x, cmd.y)\n\n                    if (!curve.points.length) return // WHO MALFORMED MY OTF\n                    const prevPoint = curve.points[curve.points.length - 1]\n                    prevPoint.after.x = c1coords.x\n                    prevPoint.after.y = c1coords.y\n\n                    curve.addPoint(\n                        new BezierPoint(\n                            new Point(coords.x, coords.y),\n                            new Point(c2coords.x, c2coords.y),\n                            new Point(coords.x, coords.y)\n                        )\n                    )\n\n                    break\n                }\n                case \"Q\": {\n                    const c1coords = conv(cmd.x1, cmd.y1)\n                    const coords = conv(cmd.x, cmd.y)\n\n                    if (!curve.points.length) return // WHO MALFORMED MY OTF\n                    const prevPoint = curve.points[curve.points.length - 1]\n                    prevPoint.after.x = lerp(1/3, c1coords.x, prevPoint.base.x)\n                    prevPoint.after.y = lerp(1/3, c1coords.y, prevPoint.base.y)\n\n                    curve.addPoint(\n                        new BezierPoint(\n                            new Point(coords.x, coords.y),\n                            new Point(\n                                lerp(1/3, c1coords.x, coords.x),\n                                lerp(1/3, c1coords.y, coords.y)\n                            ),\n                            new Point(coords.x, coords.y)\n                        )\n                    )\n\n                    break\n                }\n                case \"Z\": {\n                    if (curve.points.length) {\n                        const first = curve.points[0]\n\n                        if (curve.points.length > 1) {\n                            const last = curve.points[curve.points.length - 1]\n\n                            if (\n                                first.base.x === last.base.x &&\n                                first.base.y === last.base.y\n                            ) {\n                                first.before.x = last.before.x\n                                first.before.y = last.before.y\n\n                                curve.points.splice(curve.points.length - 1, 1)\n                            }\n                        }\n\n                        curve.points.forEach(p => p.determineType())\n                        curves.push(curve)\n                    }\n                    \n                    curve = new BezierCurve()\n                    \n                    break\n                }\n            }\n        }\n    )\n\n    if (curve.points.length) {\n        curve.points.forEach(p => p.determineType())\n        curves.push(curve)\n    }\n\n    return curves\n}\n\nfunction fteGlyphFromOTGlyph(font: Font, otfont: OTFont, otglyph: OTGlyph) {\n    const scaleFactor = 512 / otfont.tables.os2.sCapHeight\n    const beziers = generateCurvesFromOTGlyph(otfont, otglyph)\n\n    const glyphMetrics = otglyph.getMetrics()\n\n    return new Glyph(\n        font,\n        otglyph.name,\n        otglyph.unicode,\n        {\n            leftBearing: 0,\n            rightBearing: (\n                glyphMetrics.rightSideBearing + glyphMetrics.xMax\n            ) * scaleFactor\n        },\n        beziers\n    )\n}\n\nfunction fteFontFromOTFont(otfont: OTFont) {\n    const glyphs: Glyph[] = [] // For now, don't want to import the entirety of Inter just yet\n\n    const scaleFactor = 512 / otfont.tables.os2.sCapHeight\n\n    const info: any = {}\n    const names = otfont.names as any\n\n    Object.keys(otfont.names).forEach(\n        k => {\n            if (!names[k]) info[k] = \"\"\n            info[k] = names[k]?.en ?? \"\"\n        }\n    )\n        \n    return new Font(\n        info as FontInfo,\n        {\n            descender: -otfont.descender * scaleFactor + 512,\n            ascender: -(otfont.ascender - otfont.tables.os2.sCapHeight) * scaleFactor,\n            xHeight: (otfont.tables.os2.sCapHeight - otfont.tables.os2.sxHeight) * scaleFactor\n        },\n        glyphs\n    )\n}\n\nexport function importFont_opentype(filePath: string): Font {\n    const otfont = loadSync(filePath)\n\n    const font = fteFontFromOTFont(otfont)\n\n    const glyphs: Glyph[] = []\n    for (let i = 0; i < otfont.glyphs.length; i++) {\n        glyphs.push(\n            fteGlyphFromOTGlyph(\n                font, otfont,\n                otfont.glyphs.get(i)\n            )\n        )\n    }\n    font.addGlyph(...glyphs)\n\n    return font\n}","import { exec, execSync } from \"child_process\"\nimport { join } from \"path\"\nimport { Font } from \"../../font/font\"\nimport { Glyph } from \"../../font/glyph\"\nimport { undo } from \"../../undo/history\"\nimport { GLYFPoint, NAMEEntries, NumberOrVariation, OTFCCData } from \"./types\"\nimport { remote } from \"electron\"\nimport { BezierCurve } from \"../../geometry/bezier/curve\"\nimport { lerp } from \"../../utils/lerp\"\n\nlet otfccPath: string\n\nexport function setOtfccPath(path: string) {\n    otfccPath = path\n}\n\nconst novar = (x: NumberOrVariation) => {\n    if (typeof x === \"number\") return x\n    return x[0]\n}\n\nfunction convertOTFCCCoordinates(\n    data: OTFCCData, x: number, y: number\n): {x: number, y: number} {\n    const scaleFactor = 512 / data.OS_2.sCapHeight\n\n    return {\n        x: x * scaleFactor,\n        y: (data.OS_2.sCapHeight - y) * scaleFactor // easier to work with\n    }\n}\n\nexport async function importFontData_otfcc(filePath: string): Promise<OTFCCData> {\n    if (!otfccPath) return\n\n    const stdout = execSync(\n        `\"${join(otfccPath, \"otfccdump\")}\" \"${filePath}\"`,\n        {\n            maxBuffer: 100 * 1024 * 1024\n        }\n    ).toString(\"utf-8\").trim()\n    \n    const data = JSON.parse(stdout)\n\n    return data\n}","export const defaultAppSettings = {\n    theme: \"dark\"\n}\n\nexport const defaultPerFontSettings = {\n    gridEnabled: true,\n    gridMainGap: 64,\n    gridSubdivisions: 4,\n\n    curveSnapEnabled: true,\n    handleSnapEnabled: true,\n    metricsSnapEnabled: true,\n\n    constructionEnabled: true,\n    constructionAngle0: 0,\n    constructionAngle1: 45,\n    constructionAngle2: 90,\n    constructionAngle3: 135,\n}","import { EventEmitter } from \"events\";\nimport { AppSettings, FontSettings } from \"./settings\";\n\nexport function createSettingsProxy<T extends (AppSettings | FontSettings)>(\n    source: Partial<T>,\n    defaults: T,\n    eventTarget: EventEmitter\n): T {\n    return new Proxy<T>(\n        defaults,\n        {\n            get: (o: T, key: keyof T, recv) => {\n                if (key in source) return source[key]\n                return defaults[key]\n            },\n            set: (o: T, key: keyof T, value: T[keyof T], recv): boolean => {\n                source[key] = value\n                eventTarget.emit(\n                    \"settingChanged\", key\n                )\n\n                return true\n            },\n            deleteProperty: (o: T, key: keyof T): boolean => {\n                if (key in source)\n                    delete source[key]\n\n                return true\n            }\n        }\n    )\n}","import { EventEmitter } from \"events\"\nimport { Font } from \"../font/font\"\nimport { defaultAppSettings, defaultPerFontSettings } from \"./defaults\"\nimport { createSettingsProxy } from \"./proxy\"\n\nexport type FontSettings = typeof defaultPerFontSettings\nexport type AppSettings = typeof defaultAppSettings\n\nconst appSettings: Partial<AppSettings> = {}\n\nexport const settingsEvent = new EventEmitter()\nexport const settings = createSettingsProxy(\n    appSettings, defaultAppSettings, settingsEvent\n)\n\nexport function createFontSettings(\n    font: Font, settings: Partial<FontSettings>\n): FontSettings {\n    return createSettingsProxy(\n        settings, defaultPerFontSettings, font\n    )\n}","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./app.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./controls.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./editor.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./main.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./panel.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./welcome.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","import { accelStringToUserFriendly } from \"../utils/accelerator\";\nimport { ToolSubAction } from \"../viewport/tools/tool\";\nimport { Viewport } from \"../viewport/viewport\";\n\nconst subactionContainer = document.querySelector(\"div.subactions\")\n\nexport function updateSubactions(viewport: Viewport, subactionGroups: ToolSubAction[][]) {\n    subactionContainer.innerHTML = \"\"\n\n    for (const group of subactionGroups) {\n        const subactionGroup = document.createElement(\"div\")\n\n        for (const subaction of group) {\n            const button = document.createElement(\"button\")\n            button.title = `${subaction.name}${\n                subaction.accelerator ? ` (${\n                    accelStringToUserFriendly(subaction.accelerator)\n                })` : \"\"\n            }`\n\n            button.addEventListener(\"click\", () => {\n                subaction.handler()\n                viewport.render()\n            })\n\n            button.innerHTML = `\n                <img src=\"res/icons/${subaction.icon}.svg\">\n            `\n\n            subactionGroup.appendChild(button)\n        }\n\n        subactionContainer.appendChild(subactionGroup)\n    }\n}","import { Glyph } from \"../font/glyph\"\nimport { GlyphContext } from \"../viewport/context/glyph\"\nimport { Viewport } from \"../viewport/viewport\"\n\nconst glyphBar = document.querySelector(\"div.glyphBar\") as HTMLDivElement\n\nexport function getGlyphBarGlyphs(allGlyphs: Glyph[]) {\n    const glyphs: Glyph[] = []\n\n    glyphBar.childNodes.forEach(\n        node => {\n            if (node instanceof Text) {\n                glyphs.push(\n                    ...node.textContent.split(\"\").map(\n                        chr => allGlyphs.find(\n                            g => g.codePoint === chr.codePointAt(0)\n                        )\n                    )\n                )\n            } else if (node instanceof HTMLDivElement) {\n                glyphs.push(\n                    allGlyphs.find(g => g.name === node.textContent)\n                )\n            }\n        }\n    )\n\n    return glyphs\n}\n\nexport function appendCharacter(glyph: Glyph) {\n    if (glyph.codePoint >= 32) {\n        glyphBar.append(\n            String.fromCharCode(glyph.codePoint)\n        )\n    } else {\n        const nonTextGlyph = document.createElement(\"div\")\n        nonTextGlyph.className = \"ntglyph\"\n        nonTextGlyph.contentEditable = \"false\"\n\n        nonTextGlyph.innerHTML = `<span>${glyph.name}</span>`\n\n        glyphBar.appendChild(nonTextGlyph)\n    }\n    glyphBar.dispatchEvent(new InputEvent(\"input\"))\n}\n\nexport function prepareGlyphBar(viewport: Viewport) {\n    glyphBar.addEventListener(\"keydown\", (e) => {\n        if (e.code === \"KeyZ\" && e.ctrlKey) {\n            e.preventDefault()\n        }\n    })\n\n    glyphBar.addEventListener(\"input\", () => {\n        if (!(viewport.context instanceof GlyphContext)) return\n\n        const glyphs = getGlyphBarGlyphs(\n            viewport.context.glyph.font.glyphs\n        )\n        if (!glyphs.length) return\n\n        viewport.context.setGlyphs(glyphs)\n        viewport.tool.updateContext(viewport.context)\n        viewport.render()\n    })\n\n    document.querySelector(\"button.prevGlyph\").addEventListener(\n        \"click\", () => {\n            if (!(viewport.context instanceof GlyphContext)) return\n\n            viewport.context.setGlyphs(\n                null, viewport.context.currentIndex === 0 ?\n                      viewport.context.glyphs.length - 1 :\n                      viewport.context.currentIndex - 1\n            )\n            viewport.tool.updateContext(viewport.context)\n            viewport.render()\n        }\n    )\n    document.querySelector(\"button.nextGlyph\").addEventListener(\n        \"click\", () => {\n        if (!(viewport.context instanceof GlyphContext)) return\n\n            viewport.context.setGlyphs(\n                null, viewport.context.currentIndex === viewport.context.glyphs.length - 1 ?\n                      0 :\n                      viewport.context.currentIndex + 1\n            )\n            viewport.tool.updateContext(viewport.context)\n            viewport.render()\n        }\n    )\n}\n","import { Font } from \"../font/font\"\nimport { Glyph } from \"../font/glyph\"\nimport { BezierCurve } from \"../geometry/bezier/curve\"\nimport { appendCharacter } from \"./glyphBar\"\n\nconst glyphListContainer = document.querySelector(\"div.glyphList\")\n\nfunction drawGlyphPreview(glyph: Glyph) {\n    const canvas: HTMLCanvasElement = glyphListContainer.querySelector(\n        `div[data-name=\"${glyph.name}\"] canvas`\n    )\n    if (!canvas) return\n\n    const ctx = canvas.getContext(\"2d\")\n\n    ctx.resetTransform()\n    ctx.clearRect(0, 0, 90, 90)\n    \n    const path = BezierCurve.getPath2D(\n        glyph.finalBeziers\n    )\n\n    const width = (\n        glyph.metrics.rightBearing - glyph.metrics.leftBearing\n    ) * 50 / 512\n\n    ctx.translate((90 - width) / 2, 20)\n    ctx.scale(50 / 512, 50 / 512)\n    ctx.fillStyle = \"#000\"\n    ctx.fill(path)\n}\n\nexport function setActiveGlyph(glyph: Glyph) {\n    const currentActiveGlyph = glyphListContainer.querySelector(\n        \"div.glyph.active\"\n    )\n    if (currentActiveGlyph)\n        currentActiveGlyph.classList.remove(\"active\")\n    \n    document.querySelector(\n        `div[data-name=\"${glyph.name}\"]`\n    ).classList.add(\"active\")\n}\n\nexport function prepareGlyphList(font: Font) {\n    glyphListContainer.innerHTML = \"\"\n\n    font.glyphs.sort(\n        (g1, g2) => g1.comparableCodePoint - g2.comparableCodePoint\n    ).forEach(\n        glyph => {\n            const glyphDiv = document.createElement(\"div\")\n            glyphDiv.className = \"glyph\"\n            glyphDiv.setAttribute(\"data-name\", glyph.name)\n\n            const glyphLabel = document.createElement(\"label\")\n            glyphLabel.textContent = glyph.name\n            glyphDiv.appendChild(glyphLabel)\n\n            const glyphCanvas = document.createElement(\"canvas\")\n            glyphCanvas.width = 90\n            glyphCanvas.height = 90\n            glyphDiv.appendChild(glyphCanvas)\n\n            glyphListContainer.appendChild(glyphDiv)\n\n            glyphDiv.addEventListener(\"dblclick\", () => {\n                appendCharacter(glyph)\n            })\n\n            drawGlyphPreview(glyph)\n        }\n    )\n\n    font.on(\"glyphModified\", (glyph: Glyph) => {\n        drawGlyphPreview(glyph)\n    })\n}","import { currentFont } from \"../app\"\nimport { Font } from \"../font/font\"\nimport { FontSettings } from \"../settings/settings\"\n\nlet preparedFontSettings = false\n\nexport function prepareTabbedPanel() {\n    document.querySelectorAll(\"aside nav button\").forEach(\n        button => {\n            const tabId = button.getAttribute(\"data-tab\")\n\n            button.addEventListener(\"click\", () => {\n                const currentButton = document.querySelector(\"aside nav button.active\")\n                const currentPanel = document.querySelector(\"aside div.panelContents.active\")\n\n                if (currentButton && currentPanel) {\n                    currentButton.classList.remove(\"active\")\n                    currentPanel.classList.remove(\"active\")\n                }\n\n                document.querySelector(\n                    `aside div.panelContents[data-tab=${tabId}]`\n                ).classList.add(\"active\")\n                button.classList.add(\"active\")\n            })\n        }\n    )\n}\n\nexport function prepareFontSettings() {    \n    document.querySelectorAll(\n        \"input[data-font-setting], button[data-font-setting]\"\n    ).forEach(\n        (input: HTMLInputElement | HTMLButtonElement) => {\n            const key: keyof FontSettings = input.getAttribute(\n                \"data-font-setting\"\n            ) as (keyof FontSettings)\n            if (!(key in currentFont.settings)) return\n\n            if (input instanceof HTMLInputElement) {\n                if (input.type === \"checkbox\")\n                    input.checked = !!currentFont.settings[key]\n                else\n                    input.value = currentFont.settings[key].toString()\n            } else if (input instanceof HTMLButtonElement) {\n                input.classList.toggle(\"active\", !!currentFont.settings[key])\n            }\n\n            if (\n                !preparedFontSettings &&\n                input instanceof HTMLInputElement\n            ) {\n                input.addEventListener(\"input\", () => {\n                    if (typeof currentFont.settings[key] === \"number\")\n                        (currentFont.settings[key] as any) = +input.value\n                    else if (typeof currentFont.settings[key] === \"string\")\n                        (currentFont.settings[key] as any) = input.value\n                    else if (typeof currentFont.settings[key] === \"boolean\")\n                        (currentFont.settings[key] as any) = input.checked\n                })\n            } else if (\n                !preparedFontSettings &&\n                input instanceof HTMLButtonElement\n            ) {\n                input.addEventListener(\"click\", () => {\n                    (currentFont.settings[key] as any) = !input.classList.contains(\"active\")\n                })\n            }\n        }\n    )\n    \n    preparedFontSettings = true\n}\n\nexport function addFontSettingsEvents() {\n    currentFont.on(\"settingChanged\", (key: keyof FontSettings) => {\n        const input = document.querySelector(\n            `input[data-font-setting=${key}]`\n        ) as HTMLInputElement\n        const button = document.querySelector(\n            `button[data-font-setting=${key}]`\n        ) as HTMLInputElement\n\n        if (input) {\n            if (input.type === \"checkbox\")\n                input.checked = !!currentFont.settings[key]\n            else\n                input.value = currentFont.settings[key].toString()\n        } else if (button) {\n            button.classList.toggle(\"active\", !!currentFont.settings[key])\n        }\n    })\n}","export default function Accordion(\n    name: string,\n    headerItems: HTMLElement[],\n    content: HTMLElement[]\n): HTMLDivElement {\n    const div = document.createElement(\"div\")\n    div.className = \"accordion\"\n\n    const header = document.createElement(\"header\")\n    header.textContent = name\n    headerItems.forEach(\n        i => header.appendChild(i)\n    )\n    div.appendChild(header)\n\n    const contentDiv = document.createElement(\"div\")\n    contentDiv.className = \"content\"\n    content.forEach(\n        i => contentDiv.appendChild(i)\n    )\n    div.appendChild(contentDiv)\n\n    return div\n}","export default function ButtonGroup(\n    buttons: HTMLButtonElement[]\n): HTMLDivElement {\n    const div = document.createElement(\"div\")\n    div.className = \"buttonGroup\"\n\n    buttons.forEach(\n        b => div.appendChild(b)\n    )\n\n    return div\n}","export default function Checkbox(\n    get: () => boolean,\n    toggle: () => void,\n    update?: (\n        callback: (v: boolean) => void\n    ) => void\n): HTMLInputElement {\n    const checkbox = document.createElement(\"input\")\n    checkbox.type = \"checkbox\"\n\n    checkbox.checked = get()\n    checkbox.addEventListener(\"click\", () => {\n        toggle()\n    })\n\n    if (update) {\n        update((v: boolean) => {\n            checkbox.checked = v\n        })\n    }\n\n    return checkbox\n}","export default function Grid(\n    content: HTMLElement[],\n    numColumns = 2\n): HTMLDivElement {\n    const div = document.createElement(\"div\")\n    div.className = \"grid\"\n    div.style.gridTemplateColumns = `repeat(${numColumns}, 1fr)`\n\n    content.forEach(\n        i => div.appendChild(i)\n    )\n\n    return div\n}","export default function Label(\n    text: string\n): HTMLLabelElement {\n    const label = document.createElement(\"label\")\n\n    label.textContent = text\n    \n    return label\n}","export default function NumberInput(\n    get: () => number,\n    set: (v: number) => void,\n    update?: (\n        callback: (v: number) => void\n    ) => void,\n    min = 0, max = 0, step = 0.01\n): HTMLInputElement {\n    const input = document.createElement(\"input\")\n    input.type = \"number\"\n\n    input.min = min.toString()\n    input.max = max.toString()\n    input.step = step.toString()\n\n    input.value = get().toString()\n    input.addEventListener(\"input\", () => {\n        set(+input.value)\n    })\n\n    if (update) {\n        update((v: number) => {\n            input.value = v.toString()\n        })\n    }\n\n    return input\n}","export default function Row(\n    content: HTMLElement[]\n): HTMLDivElement {\n    const div = document.createElement(\"div\")\n    div.className = \"row\"\n\n    content.forEach(\n        i => div.appendChild(i)\n    )\n\n    return div\n}","export default function TextInput(\n    get: () => string,\n    set: (v: string) => void,\n    update?: (\n        callback: (v: string) => void\n    ) => void\n): HTMLInputElement {\n    const input = document.createElement(\"input\")\n    input.type = \"text\"\n\n    input.value = get()\n    input.addEventListener(\"input\", () => {\n        set(input.value)\n    })\n\n    if (update) {\n        update((v: string) => {\n            input.value = v\n        })\n    }\n\n    return input\n}","export default function ToggleButton(\n    icon: string,\n    get: () => boolean,\n    toggle: () => void,\n    update?: (\n        callback: (v: boolean) => void\n    ) => void\n): HTMLButtonElement {\n    const button = document.createElement(\"button\")\n\n    if (icon) {\n        const img = new Image()\n        img.src = `res/icons/${icon}.svg`\n\n        button.appendChild(img)\n    }\n\n    button.classList.toggle(\"active\", get())\n    button.addEventListener(\"click\", () => {\n        toggle()\n    })\n\n    if (update) {\n        update((v: boolean) => {\n            button.classList.toggle(\"active\", v)\n        })\n    }\n\n    return button\n}\n","import { TouchBarLabel } from \"electron\"\nimport { Font } from \"../../font/font\"\nimport Accordion from \"./controls/accordion\"\nimport ButtonGroup from \"./controls/buttonGroup\"\nimport Checkbox from \"./controls/checkbox\"\nimport Grid from \"./controls/grid\"\nimport Label from \"./controls/label\"\nimport NumberInput from \"./controls/numberInput\"\nimport Row from \"./controls/row\"\nimport TextInput from \"./controls/textInput\"\nimport ToggleButton from \"./controls/toggleButton\"\n\nexport function prepareFontInfoPanel(font: Font) {\n    const panel = document.querySelector(\n        \"div.panelContents[data-tab=font]\"\n    )\n\n    const fontInfoSection = Accordion(\n        \"Font info\", [], [\n            Label(\"Font family:\"),\n            TextInput(\n                () => font.info.fontFamily,\n                (v) => {\n                    font.info.fontFamily = v\n                    document.title = `${v} - FTE`\n                }\n            ),\n            Label(\"Font subfamily:\"),\n            TextInput(\n                () => font.info.fontSubfamily,\n                (v) => font.info.fontSubfamily = v\n            ),\n            Label(\"Version:\"),\n            TextInput(\n                () => font.info.version,\n                (v) => font.info.version = v\n            )\n        ]\n    )\n    const authorInfo = Accordion(\n        \"Author info\", [], [\n            Label(\"Designer:\"),\n            TextInput(\n                () => font.info.designer,\n                (v) => font.info.designer = v\n            ),\n            Label(\"Manufacturer/Foundry:\"),\n            TextInput(\n                () => font.info.manufacturer,\n                (v) => font.info.manufacturer = v\n            )\n        ]\n    )\n\n    panel.innerHTML = \"\"\n    panel.appendChild(fontInfoSection)\n    panel.appendChild(authorInfo)\n}","import { TouchBarLabel } from \"electron\"\nimport { Font } from \"../../font/font\"\nimport Accordion from \"./controls/accordion\"\nimport ButtonGroup from \"./controls/buttonGroup\"\nimport Checkbox from \"./controls/checkbox\"\nimport Grid from \"./controls/grid\"\nimport Label from \"./controls/label\"\nimport NumberInput from \"./controls/numberInput\"\nimport Row from \"./controls/row\"\nimport ToggleButton from \"./controls/toggleButton\"\n\nexport function prepareSnappingPanel(font: Font) {\n    const panel = document.querySelector(\n        \"div.panelContents[data-tab=snapping]\"\n    )\n\n    const snappingSection = Accordion(\n        \"Snapping\", [], [\n            ButtonGroup([\n                ToggleButton(\n                    \"curvesnap\",\n                    () => font.settings.curveSnapEnabled,\n                    () => {\n                        font.settings.curveSnapEnabled = !font.settings.curveSnapEnabled\n                    },\n                    (h) => {\n                        font.on(\"settingChanged\", (k: string) => {\n                            if (k === \"curveSnapEnabled\")\n                                h(font.settings.curveSnapEnabled)\n                        })\n                    }\n                ),\n                ToggleButton(\n                    \"handlesnap\",\n                    () => font.settings.handleSnapEnabled,\n                    () => {\n                        font.settings.handleSnapEnabled = !font.settings.handleSnapEnabled\n                    },\n                    (h) => {\n                        font.on(\"settingChanged\", (k: string) => {\n                            if (k === \"handleSnapEnabled\")\n                                h(font.settings.handleSnapEnabled)\n                        })\n                    }\n                ),\n                ToggleButton(\n                    \"metricsnap\",\n                    () => font.settings.metricsSnapEnabled,\n                    () => {\n                        font.settings.metricsSnapEnabled = !font.settings.metricsSnapEnabled\n                    },\n                    (h) => {\n                        font.on(\"settingChanged\", (k: string) => {\n                            if (k === \"metricsSnapEnabled\")\n                                h(font.settings.metricsSnapEnabled)\n                        })\n                    }\n                )\n            ])\n        ]\n    )\n\n    const gridSection = Accordion(\n        \"Grid\", [\n            Checkbox(\n                () => font.settings.gridEnabled,\n                () => {\n                    font.settings.gridEnabled = !font.settings.gridEnabled\n                },\n                (h) => {\n                    font.on(\"settingChanged\", (k: string) => {\n                        if (k === \"gridEnabled\")\n                            h(font.settings.gridEnabled)\n                    })\n                }\n            )\n        ], [\n            Grid([\n                Row([\n                    Label(\"Size:\"),\n                    NumberInput(\n                        () => font.settings.gridMainGap,\n                        (v: number) => {\n                            font.settings.gridMainGap = v\n                        },\n                        (h) => {\n                            font.on(\"settingChanged\", (k: string) => {\n                                if (k === \"gridEnabled\")\n                                    h(font.settings.gridMainGap)\n                            })\n                        },\n                        1, 1000, 1\n                    )\n                ]),\n                Row([\n                    Label(\"Div:\"),\n                    NumberInput(\n                        () => font.settings.gridSubdivisions,\n                        (v: number) => {\n                            font.settings.gridSubdivisions = v\n                        },\n                        (h) => {\n                            font.on(\"settingChanged\", (k: string) => {\n                                if (k === \"gridEnabled\")\n                                    h(font.settings.gridSubdivisions)\n                            })\n                        },\n                        1, 20, 1\n                    )\n                ])\n            ])\n        ]\n    )\n\n    const constructionSection = Accordion(\n        \"Construction angles\", [\n            Checkbox(\n                () => font.settings.constructionEnabled,\n                () => {\n                    font.settings.constructionEnabled = !font.settings.constructionEnabled\n                },\n                (h) => {\n                    font.on(\"settingChanged\", (k: string) => {\n                        if (k === \"constructionEnabled\")\n                            h(font.settings.constructionEnabled)\n                    })\n                }\n            )\n        ], [\n            Grid([\n                NumberInput(\n                    () => font.settings.constructionAngle0,\n                    (v: number) => {\n                        font.settings.constructionAngle0 = v\n                    },\n                    (h) => {\n                        font.on(\"settingChanged\", (k: string) => {\n                            if (k === \"constructionAngle0\")\n                                h(font.settings.constructionAngle0)\n                        })\n                    },\n                    0, 180, 1\n                ),\n                NumberInput(\n                    () => font.settings.constructionAngle1,\n                    (v: number) => {\n                        font.settings.constructionAngle1 = v\n                    },\n                    (h) => {\n                        font.on(\"settingChanged\", (k: string) => {\n                            if (k === \"constructionAngle1\")\n                                h(font.settings.constructionAngle1)\n                        })\n                    },\n                    0, 180, 1\n                ),\n                NumberInput(\n                    () => font.settings.constructionAngle2,\n                    (v: number) => {\n                        font.settings.constructionAngle2 = v\n                    },\n                    (h) => {\n                        font.on(\"settingChanged\", (k: string) => {\n                            if (k === \"constructionAngle2\")\n                                h(font.settings.constructionAngle2)\n                        })\n                    },\n                    0, 180, 1\n                ),\n                NumberInput(\n                    () => font.settings.constructionAngle3,\n                    (v: number) => {\n                        font.settings.constructionAngle3 = v\n                    },\n                    (h) => {\n                        font.on(\"settingChanged\", (k: string) => {\n                            if (k === \"constructionAngle3\")\n                                h(font.settings.constructionAngle3)\n                        })\n                    },\n                    0, 180, 1\n                )\n            ])\n        ]\n    )\n\n    panel.innerHTML = \"\"\n    panel.appendChild(snappingSection)\n    panel.appendChild(gridSection)\n    panel.appendChild(constructionSection)\n}","import { settings } from \"../settings/settings\"\n\nconst fteThemes = [\n    {\n        theme: \"light\",\n\n        handleSelected: \"#111\",\n        handleFill: \"#fff\",\n        handleMetricFill: \"#444\",\n        handleControlArm: \"#555\",\n        handleControlFill: \"#555\",\n\n        glyphOutline: \"#000\",\n        glyphGapOutline: \"#fff\",\n        glyphFill: \"#888\",\n        glyphOtherFill: \"#000\",\n        glyphMetric: \"#3338\",\n\n        gindicatorActive: \"#aaa\",\n        gindicatorActiveText: \"#555\",\n        gindicator: \"#eee\",\n        gindicatorText: \"#aaa\",\n\n        guideActive: \"#f0f\",\n        guideGrid: \"#3332\",\n        guideGridSubdiv: \"#3331\",\n\n        constructionActive: \"#0f0\"\n    },\n    {\n        theme: \"dark\",\n\n        handleSelected: \"#eee\",\n        handleFill: \"#000\",\n        handleMetricFill: \"#888\",\n        handleControlArm: \"#999\",\n        handleControlFill: \"#999\",\n\n        glyphOutline: \"#fff\",\n        glyphGapOutline: \"#222\",\n        glyphFill: \"#333\",\n        glyphOtherFill: \"#fff\",\n        glyphMetric: \"#aaa8\",\n\n        gindicatorActive: \"#777\",\n        gindicatorActiveText: \"#aaa\",\n        gindicator: \"#333\",\n        gindicatorText: \"#555\",\n\n        guideActive: \"#f0f\",\n        guideGrid: \"#9992\",\n        guideGridSubdiv: \"#9991\",\n\n        constructionActive: \"#0f0\"\n    }\n]\n\nexport function getThemeColor(colorName: string) {\n    const themeName = settings.theme\n    const theme = fteThemes.find(\n        t => t.theme === themeName\n    ) as any\n\n    return theme[colorName]\n}","import { accelStringToUserFriendly } from \"../utils/accelerator\"\nimport { ITool } from \"../viewport/tools/tool\"\n\nexport function setActiveTool(\n    index: number\n) {\n    const toolbar = document.querySelector(\"div.tools\")\n    toolbar.querySelector(\"button.active\").classList.remove(\"active\")\n\n    toolbar.children[index].classList.add(\"active\")\n}\n\nexport function prepareToolbar(\n    tools: ITool[],\n    defaultTool: ITool,\n    callback: (t: ITool) => void\n) {\n    const toolbar = document.querySelector(\"div.tools\")\n    toolbar.innerHTML = \"\"\n\n    tools.forEach(\n        tool => {\n            const button = document.createElement(\"button\")\n\n            button.title = `${tool.name} (${\n                accelStringToUserFriendly(tool.accelerator)\n            })`\n            button.innerHTML = `\n                <img src=\"res/icons/${tool.icon}.svg\">\n            `\n\n            if (tool === defaultTool)\n                button.classList.add(\"active\")\n\n            button.addEventListener(\"click\", () => {\n                toolbar.querySelector(\"button.active\").classList.remove(\n                    \"active\"\n                )\n\n                callback(tool)\n                button.classList.add(\"active\")\n            })\n\n            toolbar.appendChild(button)\n        }\n    )\n}","import { IContext } from \"../viewport/context/context\"\nimport { Viewport } from \"../viewport/viewport\"\n\nexport function setupViewport(context: IContext) {\n    const container = document.querySelector(\"div.viewport\")\n    \n    const prevViewport = container.querySelector(\"canvas\")\n    if (prevViewport) {\n        container.removeChild(prevViewport)\n    }\n\n    const viewport = new Viewport(\n        context, [], null\n    )\n    \n    container.appendChild(viewport.domCanvas)\n    \n    window.addEventListener(\"resize\", () => {\n        viewport.updateViewportSize()\n    })\n\n    return viewport\n}","import { IUndoableAction } from \"./action\"\n\nexport class ArrayAddAction<T> implements IUndoableAction {\n    constructor(\n        private target: T[],\n        private object: T,\n        private index: number\n    ) {}\n\n    undo() {\n        this.target.splice(this.index, 1)\n    }\n\n    redo() {\n        this.target.splice(this.index, 0, this.object)\n    }\n\n    finalize() {}\n\n    get valid() {\n        return this.index !== -1\n    }\n}\n\nexport class ArrayRemoveAction<T> implements IUndoableAction {\n    constructor(\n        private target: T[],\n        private object: T,\n        private index: number\n    ) {}\n\n    undo() {\n        this.target.splice(this.index, 0, this.object)\n    }\n\n    redo() {\n        this.target.splice(this.index, 1)\n    }\n\n    finalize() {}\n\n    get valid() {\n        return this.index !== -1\n    }\n}","import { EventEmitter } from \"events\"\nimport { IUndoableAction } from \"./action\"\n\ntype VCAObjectState = {\n    [key: string]: any\n}\n\nexport class ValueChangeAction implements IUndoableAction {\n    private beforeState: VCAObjectState = {}\n    private afterState: VCAObjectState = {}\n\n    constructor(\n        private target: any,\n        private keys: string[]\n    ) {\n        this.captureState(this.beforeState)\n    }\n\n    private captureState(stateTarget: VCAObjectState) {\n        this.keys.forEach(\n            key => stateTarget[key] = this.target[key]\n        )\n    }\n\n    undo() {\n        Object.assign(this.target, this.beforeState)\n        if (this.target instanceof EventEmitter)\n            this.target.emit(\"modified\")\n    }\n\n    redo() {\n        Object.assign(this.target, this.afterState)\n        if (this.target instanceof EventEmitter)\n            this.target.emit(\"modified\")\n    }\n\n    finalize() {\n        this.captureState(this.afterState)\n    }\n\n    get valid() {\n        return true\n    }\n}","import { IUndoableAction } from \"./actions/action\"\n\n\nexport class UndoContext {\n    public actions: IUndoableAction[] = []\n\n    public name: string = \"Unknown\"\n\n    addAction(...actions: IUndoableAction[]) {\n        this.actions.push(...actions)\n    }\n\n    undo() {\n        for (let i = this.actions.length - 1; i >= 0; i--) {\n            this.actions[i].undo()\n        }\n    }\n\n    redo() {\n        for (let i = 0; i < this.actions.length; i++) {\n            this.actions[i].redo()\n        }\n    }\n\n    finalize(name?: string) {\n        this.actions = this.actions.filter(a => a.valid)\n        this.actions.forEach(a => a.finalize())\n        if (name) this.name = name\n    }\n}","import { UndoContext } from \"./context\"\n\nlet undoContexts: UndoContext[] = []\nlet redoContexts: UndoContext[] = []\n\nexport let undoContext = new UndoContext()\n\nexport function finalizeUndoContext(name?: string) {\n    if (undoContext.actions.length) {\n        undoContext.finalize(name)\n        undoContexts.push(undoContext)\n\n        if (redoContexts.length)\n            redoContexts = []\n    }\n    undoContext = new UndoContext()\n}\n\nexport function canUndo() {\n    return undoContexts.length > 0\n}\n\nexport function canRedo() {\n    return redoContexts.length > 0\n}\n\nexport function undo() {\n    if (!canUndo()) return\n\n    const ctx = undoContexts.pop()\n    redoContexts.unshift(ctx)\n\n    ctx.undo()\n}\n\nexport function redo() {\n    if (!canRedo()) return\n\n    const ctx = redoContexts.shift()\n    undoContexts.push(ctx)\n\n    ctx.redo()\n}","export function accelStringToUserFriendly(str: string) {\n    return str.replace(\"^\", \"Ctrl-\")\n              .replace(\"+\", \"Shift-\")\n              .replace(\"!\", \"Alt-\")\n              .replace(\"Key\", \"\")\n}\n\nexport function accelStringToElectron(str: string) {\n    return str.replace(\"+\", \"Shift+\")\n              .replace(\"^\", \"CmdOrCtrl+\")\n              .replace(\"!\", \"Alt+\")\n              .replace(\"Key\", \"\")\n}","export function lerp(x: number, a: number, b: number) {\n    return a + x * (b - a)\n}\n\nexport function unlerp(X: number, a: number, b: number) {\n    if (a === b) return 0\n    return (X - a) / (b - a)\n}","import { Font } from \"../font/font\";\nimport { BezierCurve } from \"../geometry/bezier/curve\";\n\nconst previewStrings = [\n    \"Quick brown cat\",\n    \"General relativity\",\n    \"01123581321\",\n    \"Typography\",\n    \"Audiovisual\",\n    \"Another one bites the dust\"\n]\n\nexport function createFontPreview(font: Font) {\n    const canvas: HTMLCanvasElement = document.querySelector(\n        \"canvas.previewGenerator\"\n    )\n    const ctx = canvas.getContext(\"2d\")\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n    const testString = previewStrings[\n        Math.floor(previewStrings.length * Math.random())\n    ]\n\n    const glyphs = testString.split(\"\").map(\n        chr => font.glyphs.find(\n            g => g.codePoint === chr.codePointAt(0)\n        )\n    ).filter(g => g)\n\n    ctx.translate(0, 10)\n    ctx.scale(30 / 512, 30 / 512)\n\n    ctx.fillStyle = \"#000\"\n    glyphs.forEach(\n        g => {\n            const path = BezierCurve.getPath2D(\n                g.finalBeziers\n            )\n            ctx.fill(path)\n            ctx.translate(\n                g.metrics.rightBearing - g.metrics.leftBearing,\n                0\n            )\n        }\n    )\n\n    return canvas.toDataURL()\n}","export function wrappedDist(x: number, y: number, max: number) {\n    let extraX = (x > max / 2) ? (x - max) : (x + max)\n\n    return Math.min(\n        Math.abs(x - y), Math.abs(extraX - y)\n    )\n}","import { BezierCurve } from \"../../geometry/bezier/curve\";\nimport { IDrawableHandle } from \"../drawable\";\nimport { IGuide } from \"../guides/guide\";\nimport { Viewport } from \"../viewport\";\nimport { IContext } from \"./context\";\n\nexport class BezierContext implements IContext {\n    public handles: IDrawableHandle[] = []\n    public guides: IGuide[] = []\n    public grids: IGuide[] = []\n\n    constructor(\n        public beziers: BezierCurve[]\n    ) {}\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        // Nothing tbh\n    }\n}","import { Glyph } from \"../../font/glyph\";\nimport { BezierCurve } from \"../../geometry/bezier/curve\";\nimport { setActiveGlyph } from \"../../ui/glyphList\";\nimport { getThemeColor } from \"../../ui/theme\";\nimport { CurveGuide } from \"../guides/curve\";\nimport { GridGuide } from \"../guides/grid\";\nimport { HorizontalGuide, VerticalGuide } from \"../guides/line\";\nimport { FontMetricHandle, FontMetricHandleType } from \"../handles/fontMetric\";\nimport { Viewport } from \"../viewport\";\nimport { BezierContext } from \"./bezier\";\n\nexport class GlyphContext extends BezierContext {\n    private glyphModifiedHandler: () => void\n\n    constructor(\n        public glyphs: Glyph[],\n        public currentIndex: number\n    ) {\n        super(glyphs[currentIndex].beziers)\n\n        this.setupHandlesAndGuides()\n        \n        setActiveGlyph(this.glyph)\n\n        this.glyphModifiedHandler = () => this.updateCurveGuides()\n        this.glyph.on(\"modified\", this.glyphModifiedHandler)\n    }\n\n    get glyph() {\n        return this.glyphs[this.currentIndex]\n    }\n\n    setupHandlesAndGuides() {\n        this.handles = [\n            new FontMetricHandle(this.glyph, FontMetricHandleType.leftBearing),\n            new FontMetricHandle(this.glyph, FontMetricHandleType.rightBearing),\n            new FontMetricHandle(this.glyph, FontMetricHandleType.ascender),\n            new FontMetricHandle(this.glyph, FontMetricHandleType.descender),\n            new FontMetricHandle(this.glyph, FontMetricHandleType.xHeight)\n        ]\n\n        this.grids = [\n            new GridGuide()\n        ]\n        \n        this.guides = [\n            new HorizontalGuide(0),\n            new HorizontalGuide(512),\n            new HorizontalGuide(() => this.glyph.font.metrics.ascender, this.handles[2]),\n            new HorizontalGuide(() => this.glyph.font.metrics.descender, this.handles[3]),\n            new HorizontalGuide(() => this.glyph.font.metrics.xHeight, this.handles[4]),\n            new VerticalGuide(() => this.glyph.metrics.leftBearing, this.handles[0]),\n            new VerticalGuide(() => this.glyph.metrics.rightBearing, this.handles[1])\n        ]\n\n        this.updateCurveGuides()\n    }\n\n    updateCurveGuides() {\n        this.guides = [\n            ...this.guides.slice(0, 7),\n            ...this.beziers.map(b => new CurveGuide(b))\n        ]\n    }\n\n    setGlyphs(glyphs?: Glyph[], currentIndex?: number) {\n        this.glyph.off(\"modified\", this.glyphModifiedHandler)\n\n        if (glyphs)\n            this.glyphs = glyphs\n        \n        if (typeof currentIndex === \"number\")\n            this.currentIndex = currentIndex\n        else if (this.currentIndex >= this.glyphs.length)\n            this.currentIndex = this.glyphs.length - 1\n        \n        this.beziers = this.glyph.beziers\n        this.setupHandlesAndGuides()\n        \n        setActiveGlyph(this.glyph)\n\n        this.glyph.on(\"modified\", this.glyphModifiedHandler)\n    }\n\n    renderNonEditableGlyphs(v: Viewport, ctx: CanvasRenderingContext2D) {\n        let currentOffset = 0\n\n        if (this.currentIndex < this.glyphs.length - 1) {\n            for (let i = this.currentIndex + 1; i < this.glyphs.length; i++) {\n                const prevGlyph = this.glyphs[i - 1]\n                const glyph = this.glyphs[i]\n\n                const offset = prevGlyph.metrics.rightBearing -\n                               glyph.metrics.leftBearing\n\n                const path = BezierCurve.getPath2D(\n                    glyph.finalBeziers\n                )\n                \n                ctx.fillStyle = getThemeColor(\"glyphOtherFill\")\n                ctx.translate(offset, 0)\n                ctx.fill(path)\n\n                this.renderGlyphIndicator(v, ctx, glyph)\n\n                currentOffset += offset\n            }\n        }\n        ctx.translate(-currentOffset, 0)\n        currentOffset = 0\n\n        if (this.currentIndex > 0) {\n            for (let i = this.currentIndex - 1; i >= 0; i--) {\n                const nextGlyph = this.glyphs[i + 1]\n                const glyph = this.glyphs[i]\n\n                const offset = nextGlyph.metrics.leftBearing -\n                               glyph.metrics.rightBearing\n\n                const path = BezierCurve.getPath2D(\n                    glyph.finalBeziers\n                )\n                \n                ctx.fillStyle = getThemeColor(\"glyphOtherFill\")\n                ctx.translate(offset, 0)\n                ctx.fill(path)\n\n                this.renderGlyphIndicator(v, ctx, glyph)\n\n                currentOffset += offset\n\n            }\n        }\n        ctx.translate(-currentOffset, 0)\n        currentOffset = 0\n    }\n\n    renderGlyphIndicator(\n        v: Viewport, ctx: CanvasRenderingContext2D, glyph: Glyph\n    ) {\n        const x = glyph.metrics.leftBearing\n        const w = glyph.metrics.rightBearing - x\n        const y = glyph.font.metrics.ascender - 20 / v.co.scaleFactor\n\n        ctx.fillStyle = (this.glyph === glyph) ?\n                        getThemeColor(\"gindicatorActive\") :\n                        getThemeColor(\"gindicator\")\n        ctx.fillRect(x, y - 8 / v.co.scaleFactor, w, 8 / v.co.scaleFactor)\n\n        ctx.font = `400 ${20 / v.co.scaleFactor}px Inter`\n        ctx.textAlign = \"center\"\n        ctx.fillStyle = (this.glyph === glyph) ?\n                        getThemeColor(\"gindicatorActiveText\") :\n                        getThemeColor(\"gindicatorText\")\n        ctx.fillText(glyph.name, x + w / 2, y - 16 / v.co.scaleFactor)\n    }\n    \n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        this.renderNonEditableGlyphs(v, ctx)\n\n        // Glyph metric lines\n        ctx.strokeStyle = getThemeColor(\"glyphMetric\")\n        ctx.lineWidth = 1 / v.co.scaleFactor\n\n        ctx.beginPath()\n\n        ctx.moveTo(-9999, 512) // 512 is the bottom - baseline\n        ctx.lineTo(9999, 512)\n        \n        ctx.moveTo(-9999, 0) // 0 is the top - cap height\n        ctx.lineTo(9999, 0)\n        ctx.stroke()\n\n        ctx.setLineDash(\n            [10 / v.co.scaleFactor, 10 / v.co.scaleFactor]\n        )\n\n        // x-height\n        ctx.beginPath()\n        ctx.moveTo(-9999, this.glyph.font.metrics.xHeight)\n        ctx.lineTo(9999, this.glyph.font.metrics.xHeight)\n\n        // Ascender\n        ctx.moveTo(-9999, this.glyph.font.metrics.ascender)\n        ctx.lineTo(9999, this.glyph.font.metrics.ascender)\n\n        // Descender\n        ctx.moveTo(-9999, this.glyph.font.metrics.descender)\n        ctx.lineTo(9999, this.glyph.font.metrics.descender)\n\n        ctx.moveTo(this.glyph.metrics.leftBearing, -9999)\n        ctx.lineTo(this.glyph.metrics.leftBearing, 9999)\n\n        ctx.moveTo(this.glyph.metrics.rightBearing, -9999)\n        ctx.lineTo(this.glyph.metrics.rightBearing, 9999)\n\n        ctx.stroke()\n\n        // Glyph\n        const workingPath = BezierCurve.getPath2D(\n            this.glyph.beziers\n        )\n        const finalPath = BezierCurve.getPath2D(\n            this.glyph.finalBeziers\n        )\n\n        ctx.fillStyle = getThemeColor(\"glyphFill\")\n        ctx.fill(finalPath)\n        \n        ctx.setLineDash([])\n        ctx.strokeStyle = getThemeColor(\"glyphGapOutline\")\n        ctx.lineWidth = 4 / v.co.scaleFactor\n        ctx.stroke(workingPath)\n        ctx.strokeStyle = getThemeColor(\"glyphOutline\")\n        ctx.lineWidth = 1 / v.co.scaleFactor\n        ctx.stroke(workingPath)\n\n        this.renderGlyphIndicator(v, ctx, this.glyph)\n    }\n}","import { Point } from \"../geometry/point\"\n\nexport class ViewportCoordinates {\n    public dx = 0\n    public dy = 0\n    public scaleFactor = 1\n\n    // dx, dy in screen coordinates\n    translate(dx: number, dy: number) {\n        this.dx += dx\n        this.dy += dy\n    }\n\n    scale(factor: number, ox: number, oy: number) {\n        const newScale = this.scaleFactor * factor\n\n        this.dx = this.dx + this.scaleFactor * ox - newScale * ox\n        this.dy = this.dy + this.scaleFactor * oy - newScale * oy\n\n        this.scaleFactor = newScale\n    }\n\n    transformCanvas(ctx: CanvasRenderingContext2D) {\n        ctx.translate(this.dx, this.dy)\n        ctx.scale(this.scaleFactor, this.scaleFactor)\n    }\n\n    clientToWorld(x: number, y: number): Point {\n        return new Point(\n            (x - this.dx) / this.scaleFactor,\n            (y - this.dy) / this.scaleFactor\n        )\n    }\n\n    worldToClient(x: number, y: number) {\n        return {\n            x: x * this.scaleFactor + this.dx,\n            y: y * this.scaleFactor + this.dy\n        }\n    }\n\n    moveInClientDx(point: Point, dx: number, dy: number) {\n        const pos = this.worldToClient(point.x, point.y)\n        pos.x += dx\n        pos.y += dy\n\n        const {x, y} = this.clientToWorld(pos.x, pos.y)\n        point.x = x\n        point.y = y\n    }\n}","import { BezierCurve } from \"../../geometry/bezier/curve\"\nimport { Point } from \"../../geometry/point\"\nimport { BezierBasePointHandle } from \"../handles/bezierBasePoint\"\nimport { Viewport } from \"../viewport\"\nimport { IGuide } from \"./guide\"\nimport paper from \"paper\"\nimport { getThemeColor } from \"../../ui/theme\"\nimport { currentFont } from \"../../app\"\n\nexport class CurveGuide implements IGuide {\n    public active = false\n    public worldRender = true\n\n    constructor(\n        public source: BezierCurve\n    ) { }\n\n    nudge(v: Viewport, pos: Point, obj?: any) {\n        if (!currentFont.settings.curveSnapEnabled)\n            return\n            \n        if (\n            obj instanceof BezierBasePointHandle &&\n            obj.point.curve === this.source\n        )\n            return null\n\n        const paperPath = this.source.getPaperPath()\n        const paperPoint = new paper.Point(pos.x, pos.y)\n\n        const nearest = paperPath.getNearestPoint(paperPoint)\n        if (!nearest) {\n            this.active = false\n            return null\n        }\n\n        const clientPos = v.co.worldToClient(pos.x, pos.y)\n        const clientTarget = v.co.worldToClient(\n            nearest.x, nearest.y\n        )\n\n        if (Math.hypot(\n            clientPos.x - clientTarget.x,\n            clientPos.y - clientTarget.y\n        ) < 10) {\n            this.active = true\n\n            return new Point(\n                nearest.x, nearest.y\n            )\n        } else {\n            this.active = false\n        }\n\n        return null\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        const path = BezierCurve.getPath2D([this.source])\n\n        ctx.lineWidth = 1 / v.co.scaleFactor\n        ctx.strokeStyle = getThemeColor(\"guideActive\")\n        ctx.stroke(path)\n    }\n}","import { currentFont } from \"../../app\";\nimport { Point } from \"../../geometry/point\";\nimport { getThemeColor } from \"../../ui/theme\";\nimport { Viewport } from \"../viewport\";\nimport { IGuide } from \"./guide\";\n\nexport class GridGuide implements IGuide {\n    public active = false\n    private lastPoint = new Point(\n        -100000, -100000\n    )\n\n    private get baseGap(): number {\n        return currentFont.settings.gridMainGap\n    }\n\n    private get gap(): number {\n        return currentFont.settings.gridMainGap / currentFont.settings.gridSubdivisions\n    }\n\n    calculateGap(v: Viewport) {\n        let clientGap = this.gap * v.co.scaleFactor\n\n        while (clientGap < 12) {\n            clientGap *= 2\n        }\n\n        return clientGap / v.co.scaleFactor\n    }\n\n    nudge(v: Viewport, pos: Point, obj?: any) {\n        const gap = this.calculateGap(v)\n\n        const target = new Point(\n            Math.round(pos.x / gap) * gap,\n            Math.round(pos.y / gap) * gap\n        )\n        const delta = 8 / v.co.scaleFactor\n\n        this.active = false\n\n        this.lastPoint.x = NaN\n        this.lastPoint.y = NaN\n\n        if (Math.abs(pos.x - target.x) < delta) {\n            this.lastPoint.x = target.x\n            this.active = true\n        }\n        if (Math.abs(pos.y - target.y) < delta) {\n            this.lastPoint.y = target.y\n            this.active = true\n        }\n\n        if (this.active) {\n            return new Point(\n                isNaN(this.lastPoint.x) ? pos.x : target.x,\n                isNaN(this.lastPoint.y) ? pos.y : target.y\n            )\n        }\n\n        return null\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        const gap = this.calculateGap(v)\n\n        const minXY = v.co.clientToWorld(0, 0)\n        const maxXY = v.co.clientToWorld(\n            v.domCanvas.width, v.domCanvas.height\n        )\n\n        minXY.x = Math.round(minXY.x / gap) * gap\n        minXY.y = Math.round(minXY.y / gap) * gap\n        maxXY.x = Math.round(maxXY.x / gap) * gap\n        maxXY.y = Math.round(maxXY.y / gap) * gap\n\n        ctx.lineWidth = 1\n\n        for (let x = minXY.x; x <= maxXY.x; x += gap) {\n            const client = v.co.worldToClient(x, 0)\n\n            ctx.beginPath()\n            ctx.moveTo(Math.round(client.x) + 0.5, -9999)\n            ctx.lineTo(Math.round(client.x) + 0.5, 9999)\n            ctx.strokeStyle = getThemeColor(\"guideGrid\")\n\n            if (Math.abs((x / this.baseGap) % 1) > 0.001)\n                ctx.strokeStyle = getThemeColor(\"guideGridSubdiv\")\n\n            if (\n                this.active && this.lastPoint.x === x\n            )\n                ctx.strokeStyle = getThemeColor(\"guideActive\")\n\n            ctx.stroke()\n        }\n        for (let y = minXY.y; y <= maxXY.y; y += gap) {\n            const client = v.co.worldToClient(0, y)\n\n            ctx.beginPath()\n            ctx.moveTo(-9999, Math.round(client.y) + 0.5)\n            ctx.lineTo(9999, Math.round(client.y) + 0.5)\n            ctx.strokeStyle = getThemeColor(\"guideGrid\")\n\n            if (Math.abs((y / this.baseGap) % 1) > 0.001)\n                ctx.strokeStyle = getThemeColor(\"guideGridSubdiv\")\n\n            if (\n                this.active && this.lastPoint.y === y\n            )\n                ctx.strokeStyle = getThemeColor(\"guideActive\")\n\n            ctx.stroke()\n        }\n        \n    }\n}","import { Point } from \"../../geometry/point\"\nimport { getThemeColor } from \"../../ui/theme\"\nimport { Viewport } from \"../viewport\"\nimport { IGuide } from \"./guide\"\n\nexport class HorizontalGuide implements IGuide {\n    public active = false\n\n    constructor(\n        private valueHandler: number | (() => number),\n        public source?: any\n    ) { }\n\n    get value() {\n        if (this.valueHandler instanceof Function)\n            return this.valueHandler()\n\n        return this.valueHandler\n    }\n\n    nudge(v: Viewport, pos: Point, obj?: any) {\n        if (obj && this.source && obj === this.source) {\n            this.active = false\n            return null\n        }\n\n        const clientPos = v.co.worldToClient(pos.x, pos.y)\n        const clientTarget = v.co.worldToClient(pos.x, this.value)\n\n        if (Math.abs(clientPos.y - clientTarget.y) < 8) {\n            this.active = true\n            return new Point(pos.x, this.value)\n        } else {\n            this.active = false\n        }\n\n        return null\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        const clientPos = v.co.worldToClient(\n            0, this.value\n        )\n        clientPos.y = Math.round(clientPos.y) + 0.5\n\n        ctx.strokeStyle = getThemeColor(\"guideActive\")\n        ctx.lineWidth = 1\n\n        ctx.beginPath()\n        ctx.moveTo(-9999, clientPos.y)\n        ctx.lineTo(9999, clientPos.y)\n        ctx.stroke()\n    }\n}\n\nexport class VerticalGuide implements IGuide {\n    public active = false\n\n    constructor(\n        private valueHandler: number | (() => number),\n        public source?: any\n    ) { }\n\n    get value() {\n        if (this.valueHandler instanceof Function)\n            return this.valueHandler()\n\n        return this.valueHandler\n    }\n\n    nudge(v: Viewport, pos: Point, obj?: any) {\n        if (obj && this.source && obj === this.source) {\n            this.active = false\n            return null\n        }\n\n        const clientPos = v.co.worldToClient(pos.x, pos.y)\n        const clientTarget = v.co.worldToClient(this.value, pos.y)\n\n        if (Math.abs(clientPos.x - clientTarget.x) < 8) {\n            this.active = true\n            return new Point(this.value, pos.y)\n        } else {\n            this.active = false\n        }\n\n        return null\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        const clientPos = v.co.worldToClient(\n            this.value, 0\n        )\n        clientPos.x = Math.round(clientPos.x) + 0.5\n\n        ctx.strokeStyle = getThemeColor(\"guideActive\")\n        ctx.lineWidth = 1\n\n        ctx.beginPath()\n        ctx.moveTo(clientPos.x, -9999)\n        ctx.lineTo(clientPos.x, 9999)\n        ctx.stroke()\n    }\n}\n","import { currentFont } from \"../../app\"\nimport { Point } from \"../../geometry/point\"\nimport { getThemeColor } from \"../../ui/theme\"\nimport { IDrawableHandle } from \"../drawable\"\nimport { Viewport } from \"../viewport\"\nimport { IGuide } from \"./guide\"\n\nexport class PointGuide implements IGuide {\n    public active = false\n\n    constructor(\n        public source: Point\n    ) { }\n\n    nudge(v: Viewport, pos: Point, obj?: any) {\n        if (!currentFont.settings.handleSnapEnabled)\n            return\n            \n        if (\n            obj && this.source &&\n            (\n                obj === this.source ||\n                (\n                    \"position\" in obj &&\n                    obj.position === this.source\n                )\n            )\n        ) {\n            this.active = false\n            return\n        }\n\n        const clientPos = v.co.worldToClient(pos.x, pos.y)\n        const clientTarget = v.co.worldToClient(\n            this.source.x, this.source.y\n        )\n\n        if (Math.hypot(\n            clientPos.x - clientTarget.x,\n            clientPos.y - clientTarget.y\n        ) < 10) {\n            this.active = true\n            return new Point(this.source.x, this.source.y)\n        } else {\n            this.active = false\n            return null\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        const clientPos = v.co.worldToClient(\n            this.source.x, this.source.y\n        )\n        clientPos.x = Math.round(clientPos.x) + 0.5\n        clientPos.y = Math.round(clientPos.y) + 0.5\n\n        ctx.strokeStyle = getThemeColor(\"guideActive\")\n        ctx.lineWidth = 1\n\n        ctx.beginPath()\n        ctx.moveTo(clientPos.x - 16, clientPos.y)\n        ctx.lineTo(clientPos.x + 16, clientPos.y)\n        ctx.moveTo(clientPos.x, clientPos.y - 16)\n        ctx.lineTo(clientPos.x, clientPos.y + 16)\n        ctx.stroke()\n    }\n}\n\nexport class HandleGuide extends PointGuide {\n    constructor(\n        public handle: IDrawableHandle\n    ) {\n        super(handle.position)\n    }\n\n    nudge(v: Viewport, pos: Point, obj?: any) {            \n        if (\n            this.handle.selected ||\n            this.handle === obj\n        ) return null\n        return super.nudge(v, pos, obj)\n    }\n}","import { BezierPoint, BezierPointType } from \"../../geometry/bezier/point\"\nimport { Point } from \"../../geometry/point\"\nimport { UndoContext } from \"../../undo/context\"\nimport { ValueChangeAction } from \"../../undo/actions/value\"\nimport { IDrawableHandle } from \"../drawable\"\nimport { Viewport } from \"../viewport\"\nimport { getThemeColor } from \"../../ui/theme\"\n\nexport class BezierBasePointHandle implements IDrawableHandle {\n    public hitRadius = 10\n    public selected = false\n    public type = \"BezierBasePointHandle\"\n    \n    constructor(\n        public point: BezierPoint\n    ) {}\n\n    get position() {\n        return this.point.base\n    }\n\n    move(\n        v: Viewport, pos: Point, dPos: Point,\n        pivot: IDrawableHandle,\n        e?: MouseEvent\n    ) {\n        this.point.movePoint(this.point.base, dPos)\n    }\n\n    prepareUndo(uc: UndoContext) {\n        uc.addAction(\n            new ValueChangeAction(this.point.base, [\"x\", \"y\"]),\n            new ValueChangeAction(this.point.before, [\"x\", \"y\"]),\n            new ValueChangeAction(this.point.after, [\"x\", \"y\"])\n        )\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        const angle = this.point.after.angle(\n            this.point.base\n        )\n\n        ctx.beginPath()\n        switch (this.point.type) {\n            case BezierPointType.auto:\n                ctx.moveTo(\n                    5 * Math.cos(angle),\n                    5 * Math.sin(angle)\n                )\n                ctx.lineTo(\n                    5 * Math.cos(angle + Math.PI / 2),\n                    5 * Math.sin(angle + Math.PI / 2)\n                )\n                ctx.lineTo(\n                    5 * Math.cos(angle + Math.PI),\n                    5 * Math.sin(angle + Math.PI)\n                )\n                ctx.lineTo(\n                    5 * Math.cos(angle + 3 * Math.PI / 2),\n                    5 * Math.sin(angle + 3 * Math.PI / 2)\n                )\n                break\n            case BezierPointType.sharp:\n                ctx.rect(-4, -4, 8, 8)\n                break\n            default:\n                ctx.arc(0, 0, 5, 0, Math.PI * 2)\n        }\n        ctx.closePath()\n\n        ctx.fillStyle = this.selected ?\n                        getThemeColor(\"handleSelected\") :\n                        getThemeColor(\"handleFill\")\n        ctx.strokeStyle = getThemeColor(\"handleSelected\")\n        ctx.lineWidth = 1\n        ctx.fill()\n        ctx.stroke()\n    }\n}","import { BezierPoint, BezierPointType } from \"../../geometry/bezier/point\"\nimport { Point } from \"../../geometry/point\"\nimport { UndoContext } from \"../../undo/context\"\nimport { ValueChangeAction } from \"../../undo/actions/value\"\nimport { IDrawableHandle } from \"../drawable\"\nimport { Viewport } from \"../viewport\"\nimport { getThemeColor } from \"../../ui/theme\"\n\nexport class BezierControlPointHandle implements IDrawableHandle {\n    public hitRadius = 6\n    public selected = false\n    public type = \"BezierControlPointHandle\"\n    public hidden = false\n    \n    constructor(\n        public point: BezierPoint,\n        private cpoint: Point\n    ) {}\n\n    get position() {\n        return this.cpoint\n    }\n\n    move(\n        v: Viewport, pos: Point, dPos: Point,\n        pivot: IDrawableHandle,\n        e?: MouseEvent\n    ) {\n        // let forceType = null\n        // if (\n        //     this.point.type !== BezierPointType.free &&\n        //     e.altKey\n        // )\n        //     forceType = BezierPointType.free\n\n        this.point.movePoint(this.cpoint, dPos)\n    }\n\n    prepareUndo(uc: UndoContext) {\n        uc.addAction(\n            new ValueChangeAction(this.point.base, [\"x\", \"y\"]),\n            new ValueChangeAction(this.point.before, [\"x\", \"y\"]),\n            new ValueChangeAction(this.point.after, [\"x\", \"y\"])\n        )\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        const basePos = v.co.worldToClient(\n            this.point.base.x, this.point.base.y\n        )\n        const ctrlPos = v.co.worldToClient(\n            this.cpoint.x, this.cpoint.y\n        )\n\n        const distance = Math.hypot(\n            basePos.x - ctrlPos.x,\n            basePos.y - ctrlPos.y\n        )\n        this.hidden = distance <= 8\n        if (this.hidden) return\n        \n        ctx.strokeStyle = getThemeColor(\"handleControlArm\")\n        ctx.lineWidth = 1\n        ctx.beginPath()\n        ctx.moveTo(\n            basePos.x - ctrlPos.x,\n            basePos.y - ctrlPos.y\n        )\n        ctx.lineTo(0, 0)\n        ctx.stroke()\n\n        ctx.fillStyle = this.selected ? \n                        getThemeColor(\"handleSelected\") :\n                        getThemeColor(\"handleControlFill\")\n        ctx.beginPath()\n        ctx.arc(0, 0, 3, 0, 2 * Math.PI)\n        ctx.fill()\n    }\n}","import { Glyph } from \"../../font/glyph\"\nimport { Point } from \"../../geometry/point\"\nimport { UndoContext } from \"../../undo/context\"\nimport { ValueChangeAction } from \"../../undo/actions/value\"\nimport { IDrawableHandle } from \"../drawable\"\nimport { Viewport } from \"../viewport\"\nimport { getThemeColor } from \"../../ui/theme\"\n\nexport enum FontMetricHandleType {\n    leftBearing, rightBearing,\n    ascender, descender, xHeight\n}\n\nenum FontMetricHandleDir {\n    horz, vert\n}\n\nexport class FontMetricHandle implements IDrawableHandle {\n    public hitRadius = 10\n    public selected = false\n    public type = \"FontMetricHandle\"\n\n    private dir = FontMetricHandleDir.horz\n    \n    constructor(\n        private glyph: Glyph,\n        private metric: FontMetricHandleType\n    ) {\n        if (\n            metric === FontMetricHandleType.leftBearing ||\n            metric === FontMetricHandleType.rightBearing\n        )\n            this.dir = FontMetricHandleDir.vert\n    }\n\n    prepareUndo(uc: UndoContext) {\n        let action = null\n\n        switch (this.metric) {\n            case FontMetricHandleType.ascender:\n                action = new ValueChangeAction(this.glyph.font.metrics, [\"ascender\"])\n                break\n            case FontMetricHandleType.descender:\n                action = new ValueChangeAction(this.glyph.font.metrics, [\"descender\"])\n                break\n            case FontMetricHandleType.xHeight:\n                action = new ValueChangeAction(this.glyph.font.metrics, [\"xHeight\"])\n                break\n            \n            case FontMetricHandleType.leftBearing:\n                action = new ValueChangeAction(this.glyph.metrics, [\"leftBearing\"])\n                break\n            case FontMetricHandleType.rightBearing:\n                action = new ValueChangeAction(this.glyph.metrics, [\"rightBearing\"])\n                break\n        }\n\n        if (action) uc.addAction(action)\n    }\n\n    private get value() {\n        switch (this.metric) {\n            case FontMetricHandleType.ascender:\n                return this.glyph.font.metrics.ascender\n            case FontMetricHandleType.descender:\n                return this.glyph.font.metrics.descender\n            case FontMetricHandleType.xHeight:\n                return this.glyph.font.metrics.xHeight\n            \n            case FontMetricHandleType.leftBearing:\n                return this.glyph.metrics.leftBearing\n            case FontMetricHandleType.rightBearing:\n                return this.glyph.metrics.rightBearing\n        }\n\n        return 0\n    }\n\n    private set value(x: number) {\n        switch (this.metric) {\n            case FontMetricHandleType.ascender:\n                this.glyph.font.metrics.ascender = Math.min(x, 0)\n                break\n            case FontMetricHandleType.descender:\n                this.glyph.font.metrics.descender = Math.max(x, 512)\n                break\n            case FontMetricHandleType.xHeight:\n                this.glyph.font.metrics.xHeight = Math.max(Math.min(x, 512), 0)\n                break\n            \n            case FontMetricHandleType.leftBearing:\n                this.glyph.metrics.leftBearing = x\n                break\n            case FontMetricHandleType.rightBearing:\n                this.glyph.metrics.rightBearing = x\n                break\n        }\n\n        this.glyph.emit(\"modified\")\n    }\n\n    get position() {\n        if (this.dir === FontMetricHandleDir.horz)\n            return new Point(-20, this.value)\n        \n        return new Point(this.value, 532)\n    }\n\n    move(\n        v: Viewport, pos: Point, dPos: Point,\n        pivot: IDrawableHandle,\n        e?: MouseEvent\n    ) {\n        if (this.dir === FontMetricHandleDir.horz) {\n            this.value = pos.y\n        } else {\n            this.value = pos.x\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        ctx.beginPath()\n        ctx.arc(0, 0, 5, 0, 2 * Math.PI)\n        ctx.moveTo(0, 0)\n\n        if (this.dir === FontMetricHandleDir.horz)\n            ctx.lineTo(20 * v.co.scaleFactor, 0)\n        else\n            ctx.lineTo(0, -20 * v.co.scaleFactor)\n\n        ctx.fillStyle = this.selected ?\n                        getThemeColor(\"handleSelected\") :\n                        getThemeColor(\"handleMetricFill\")\n        ctx.strokeStyle = getThemeColor(\"handleSelected\")\n        ctx.lineWidth = 1\n        ctx.setLineDash([])\n        ctx.stroke()\n        ctx.fill()\n    }\n}","import { Glyph } from \"../../font/glyph\"\nimport { BezierCurve } from \"../../geometry/bezier/curve\"\nimport { BezierPoint, BezierPointType } from \"../../geometry/bezier/point\"\nimport { Point } from \"../../geometry/point\"\nimport { ArrayAddAction, ArrayRemoveAction } from \"../../undo/actions/array\"\nimport { ValueChangeAction } from \"../../undo/actions/value\"\nimport { finalizeUndoContext, undoContext } from \"../../undo/history\"\nimport { BezierContext } from \"../context/bezier\"\nimport { IContext } from \"../context/context\"\nimport { GlyphContext } from \"../context/glyph\"\nimport { IDrawableHandle } from \"../drawable\"\nimport { IGuide } from \"../guides/guide\"\nimport { PointGuide } from \"../guides/point\"\nimport { BezierBasePointHandle } from \"../handles/bezierBasePoint\"\nimport { BezierControlPointHandle } from \"../handles/bezierControlPoint\"\nimport { Viewport } from \"../viewport\"\nimport { ITool, ToolSubAction, ToolSubActionSection } from \"./tool\"\n\nexport class BezierPenTool implements ITool {\n    public name = \"Pen\"\n    public icon = \"beziertool\"\n    public accelerator = \"KeyB\"\n\n    private currentBezier: BezierCurve = null\n    private finalAdjustmentStage = false\n\n    public handles: IDrawableHandle[] = []\n    public guides: IGuide[] = []\n    public supportsForeignHandles = false\n\n    public subactions: ToolSubActionSection[] = [\n        {\n            name: \"Edit\",\n            subactions: [\n                {\n                    name: \"Delete last point\",\n                    icon: \"deletelastpoint\",\n                    accelerator: \"Delete\",\n                    handler: () => {\n                        if (!this.currentBezier) return\n    \n                        const idx = this.currentBezier.points.length - 1\n                        const point = this.currentBezier.points[\n                            idx\n                        ]\n                        this.currentBezier.points.splice(idx, 1)\n                        undoContext.addAction(\n                            new ArrayRemoveAction(\n                                this.currentBezier.points, point,\n                                idx\n                            )\n                        )\n    \n                        const cpHandles = this.handles.filter(\n                            h => h instanceof BezierControlPointHandle &&\n                                 h.point === point\n                        ) // length always = 2\n    \n                        const hIndex = this.handles.findIndex(\n                            h => h instanceof BezierBasePointHandle &&\n                                 h.point == point\n                        )\n                        this.handles.splice(hIndex, 1)\n    \n                        const cpIndex0 = this.handles.indexOf(cpHandles[0])\n                        this.handles.splice(cpIndex0, 1)\n    \n                        const cpIndex1 = this.handles.indexOf(cpHandles[1])\n                        this.handles.splice(cpIndex1, 1)\n    \n                        \n                        undoContext.addAction(\n                            new ArrayRemoveAction(\n                                this.handles, this.handles[hIndex],\n                                hIndex\n                            ),\n                            new ArrayRemoveAction(\n                                this.handles, this.handles[cpIndex0],\n                                cpIndex0\n                            ),\n                            new ArrayRemoveAction(\n                                this.handles, this.handles[cpIndex1],\n                                cpIndex1\n                            )\n                        )\n    \n                        if (!this.currentBezier.points.length) {\n                            const bIdx = this.glyph.beziers.indexOf(\n                                this.currentBezier\n                            )\n                            this.glyph.beziers.splice(bIdx, 1)\n                            this.currentBezier = null\n    \n                            undoContext.addAction(\n                                new ArrayRemoveAction(\n                                    this.glyph.beziers, this.currentBezier,\n                                    bIdx\n                                )\n                            )\n                        }\n    \n                        finalizeUndoContext(\"Delete last point\")\n                    }\n                }\n            ]\n        }\n    ]\n\n    private glyph: Glyph\n\n    get currentPoint(): BezierPoint {\n        if (!this.currentBezier) return null\n\n        if (this.finalAdjustmentStage)\n            return this.currentBezier.points[0]\n\n        return this.currentBezier.points[\n            this.currentBezier.points.length - 1\n        ]\n    }\n\n    handleMouseEvent(v: Viewport, e: MouseEvent, x: number, y: number) {\n        if (!(v.context instanceof BezierContext)) return\n\n        const pos = v.co.clientToWorld(\n            x, y\n        )\n        const rawPos = new Point()\n        rawPos.copy(pos)\n\n        if (this.currentBezier && this.currentBezier.points.length) {\n            v.restrictAngles(\n                this.currentBezier.points[\n                    this.currentBezier.points.length - 1\n                ].base,\n                pos,\n                e\n            )\n        }\n\n        v.nudgePoint(pos)\n\n        if (\n            e.type === \"mousedown\" && e.buttons & 1\n        ) {\n            if (!this.currentBezier) {\n                this.currentBezier = new BezierCurve(this.glyph)\n                const length = v.context.beziers.push(\n                    this.currentBezier\n                )\n\n                undoContext.addAction(\n                    new ArrayAddAction(\n                        v.context.beziers,\n                        this.currentBezier,\n                        length - 1\n                    )\n                )\n            }\n\n            let nearHandle = v.nearHandle(\n                pos.x, pos.y, \"BezierBasePointHandle\"\n            )\n            if (\n                this.currentBezier && this.currentBezier.points.length\n            ) {\n                const rawNearHandle = v.nearHandle(\n                    rawPos.x, rawPos.y, \"BezierBasePointHandle\"\n                )\n                if (\n                    rawNearHandle &&\n                    nearHandle instanceof BezierBasePointHandle &&\n                    nearHandle.position === this.currentBezier.points[0].base\n                )\n                    nearHandle = rawNearHandle\n            }\n\n            if (\n                nearHandle &&\n                nearHandle instanceof BezierBasePointHandle &&\n                nearHandle.position === this.currentBezier.points[0].base\n            ) {\n                // Forget the curve, but allow last adjustments\n                this.finalAdjustmentStage = true\n                undoContext.addAction(\n                    new ValueChangeAction(\n                        this.currentPoint.base, [\"x\", \"y\"]\n                    ),\n                    new ValueChangeAction(\n                        this.currentPoint.before, [\"x\", \"y\"]\n                    ),\n                    new ValueChangeAction(\n                        this.currentPoint.after, [\"x\", \"y\"]\n                    )\n                )\n            } else {\n                // Add a point\n                const point = new BezierPoint(\n                    new Point(pos.x, pos.y),\n                    new Point(pos.x, pos.y),\n                    new Point(pos.x, pos.y)\n                )\n                this.currentBezier.addPoint(point)\n                undoContext.addAction(\n                    new ArrayAddAction(\n                        this.currentBezier.points,\n                        point,\n                        this.currentBezier.points.length - 1\n                    )\n                )\n\n                const length = this.handles.push(\n                    new BezierControlPointHandle(point, point.before),\n                    new BezierControlPointHandle(point, point.after),\n                    new BezierBasePointHandle(point)\n                )\n                undoContext.addAction(\n                    new ArrayAddAction(\n                        this.handles,\n                        this.handles[length - 3],\n                        length - 3\n                    ),\n                    new ArrayAddAction(\n                        this.handles,\n                        this.handles[length - 2],\n                        length - 2\n                    ),\n                    new ArrayAddAction(\n                        this.handles,\n                        this.handles[length - 1],\n                        length - 1\n                    )\n                )\n            }\n        } else if (\n            e.type === \"mousemove\" && e.buttons & 1 &&\n            this.currentPoint\n        ) {\n            this.currentPoint.after.x = pos.x\n            this.currentPoint.after.y = pos.y\n\n            if (!e.altKey) {\n                this.currentPoint.type = BezierPointType.auto\n                this.currentPoint.before.x = 2 * this.currentPoint.base.x - pos.x\n                this.currentPoint.before.y = 2 * this.currentPoint.base.y - pos.y\n            } else {\n                this.currentPoint.type = BezierPointType.free\n            }\n        } else if (\n            e.type === \"mouseup\"\n        ) {\n            if (this.finalAdjustmentStage) {\n                this.handles = []\n                this.currentBezier.points[0].determineType()\n                this.currentBezier = null\n\n                finalizeUndoContext(\"Close curve\")\n            } else if (this.currentBezier && this.currentBezier.points.length === 1) {\n                finalizeUndoContext(\"Create curve\")\n            } else {\n                this.currentPoint.determineType()\n                finalizeUndoContext(\"Add point\")\n            }\n            this.finalAdjustmentStage = false\n            \n            this.glyph.emit(\"modified\")\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n    }\n\n    updateContext(context: IContext) {\n        if (!(context instanceof GlyphContext)) return\n\n        this.glyph = context.glyph\n\n        this.handles = []\n        this.guides = []\n\n        this.currentBezier = null\n        \n        for (let bezier of context.beziers) {\n            for (let point of bezier.points) {\n                this.guides.push(\n                    new PointGuide(point.base)\n                )\n            }\n        }\n    }\n}","import { Glyph } from \"../../font/glyph\"\nimport { BezierCurve } from \"../../geometry/bezier/curve\"\nimport { BezierPoint } from \"../../geometry/bezier/point\"\nimport { Point } from \"../../geometry/point\"\nimport { ArrayAddAction } from \"../../undo/actions/array\"\nimport { finalizeUndoContext, undoContext } from \"../../undo/history\"\nimport { lerp } from \"../../utils/lerp\"\nimport { BezierContext } from \"../context/bezier\"\nimport { IContext } from \"../context/context\"\nimport { GlyphContext } from \"../context/glyph\"\nimport { IDrawableHandle } from \"../drawable\"\nimport { IGuide } from \"../guides/guide\"\nimport { PointGuide } from \"../guides/point\"\nimport { Viewport } from \"../viewport\"\nimport { ITool, ToolSubAction, ToolSubActionSection } from \"./tool\"\n\n// ~ magic number ~\nconst magic = 4 * (Math.SQRT2 - 1) / 3\n\nexport class EllipseTool implements ITool {\n    public name = \"Ellipse\"\n    public icon = \"ellipsetool\"\n    public accelerator = \"KeyE\"\n\n    public handles: IDrawableHandle[] = []\n    public guides: IGuide[] = []\n    public supportsForeignHandles = false\n\n    public subactions: ToolSubActionSection[] = []\n\n    private startPoint: Point\n\n    private glyph: Glyph\n\n    private currentBezier: BezierCurve\n\n    createEllipse(): BezierCurve {\n        const curve = new BezierCurve(this.glyph)\n\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n\n        return curve\n    }\n\n    updateEllipse(pos: Point, e: MouseEvent) {\n        const origin = new Point(\n            this.startPoint.x, this.startPoint.y\n        )\n        let radius = Math.abs(pos.y - origin.y)\n        let scale = Math.abs(\n            (pos.x - origin.x) / (pos.y - origin.y)\n        )\n\n        if (e.shiftKey) {\n            radius = Math.max(\n                radius, Math.abs(pos.x - origin.x)\n            )\n            scale = 1\n        }\n        if (!e.ctrlKey) {\n            radius /= 2\n            origin.x += radius * scale * Math.sign(pos.x - origin.x)\n            origin.y += radius * Math.sign(pos.y - origin.y)\n        }\n\n        this.currentBezier.points[0].base.x = origin.x\n        this.currentBezier.points[0].base.y = origin.y - radius\n        this.currentBezier.points[0].before.x = origin.x - magic * radius * scale\n        this.currentBezier.points[0].before.y = origin.y - radius\n        this.currentBezier.points[0].after.x = origin.x + magic * radius * scale\n        this.currentBezier.points[0].after.y = origin.y - radius\n\n        this.currentBezier.points[1].base.x = origin.x + radius * scale\n        this.currentBezier.points[1].base.y = origin.y\n        this.currentBezier.points[1].before.x = origin.x + radius * scale\n        this.currentBezier.points[1].before.y = origin.y - magic * radius\n        this.currentBezier.points[1].after.x = origin.x + radius * scale\n        this.currentBezier.points[1].after.y = origin.y + magic * radius\n\n        this.currentBezier.points[2].base.x = origin.x\n        this.currentBezier.points[2].base.y = origin.y + radius\n        this.currentBezier.points[2].before.x = origin.x + magic * radius * scale\n        this.currentBezier.points[2].before.y = origin.y + radius\n        this.currentBezier.points[2].after.x = origin.x - magic * radius * scale\n        this.currentBezier.points[2].after.y = origin.y + radius\n\n        this.currentBezier.points[3].base.x = origin.x - radius * scale\n        this.currentBezier.points[3].base.y = origin.y\n        this.currentBezier.points[3].before.x = origin.x - radius * scale\n        this.currentBezier.points[3].before.y = origin.y + magic * radius\n        this.currentBezier.points[3].after.x = origin.x - radius * scale\n        this.currentBezier.points[3].after.y = origin.y - magic * radius\n    }\n    \n    handleMouseEvent(\n        v: Viewport, e: MouseEvent, x: number, y: number\n    ) {\n        if (!(v.context instanceof BezierContext)) return\n\n        const pos = v.co.clientToWorld(\n            x, y\n        )\n        v.nudgePoint(pos)\n\n        if (\n            e.type === \"mousedown\" && e.buttons & 1\n        ) {\n            this.currentBezier = this.createEllipse()\n            this.startPoint = pos\n\n            this.updateEllipse(pos, e)\n\n            v.context.beziers.push(this.currentBezier)\n            \n            undoContext.addAction(\n                new ArrayAddAction(\n                    v.context.beziers, this.currentBezier,\n                    v.context.beziers.length - 1\n                )\n            )\n        } else if (\n            e.type === \"mousemove\" && e.buttons & 1 &&\n            this.startPoint\n        ) {\n            this.updateEllipse(pos, e)\n        } else if (\n            e.type === \"mouseup\"\n        ) {\n            if (this.currentBezier) {\n                finalizeUndoContext(\"Ellipse\")\n\n                this.currentBezier = null\n                this.startPoint = null\n\n                this.glyph.emit(\"modified\")\n            }\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n    }\n\n    updateContext(context: IContext) {\n        if (!(context instanceof GlyphContext)) return\n\n        this.glyph = context.glyph\n\n        this.handles = []\n        this.guides = []\n        \n        for (let bezier of context.beziers) {\n            for (let point of bezier.points) {\n                this.guides.push(\n                    new PointGuide(point.base)\n                )\n            }\n        }\n    }\n}","import { Glyph } from \"../../font/glyph\";\nimport { BezierCurve } from \"../../geometry/bezier/curve\";\nimport { Point } from \"../../geometry/point\";\nimport { ArrayAddAction, ArrayRemoveAction } from \"../../undo/actions/array\";\nimport { finalizeUndoContext, undoContext } from \"../../undo/history\";\nimport { lerp, unlerp } from \"../../utils/lerp\";\nimport { IContext } from \"../context/context\";\nimport { GlyphContext } from \"../context/glyph\";\nimport { IDrawableHandle } from \"../drawable\";\nimport { CurveGuide } from \"../guides/curve\";\nimport { IGuide } from \"../guides/guide\";\nimport { HandleGuide } from \"../guides/point\";\nimport { BezierBasePointHandle } from \"../handles/bezierBasePoint\";\nimport { BezierControlPointHandle } from \"../handles/bezierControlPoint\";\nimport { Viewport } from \"../viewport\";\nimport { ITool, ToolSubAction, ToolSubActionSection } from \"./tool\";\n\nexport class HandleTool implements ITool {\n    public name = \"Curve edit\"\n    public icon = \"handletool\"\n    public accelerator = \"KeyA\"\n\n    private selecting = false\n    private selectionOrigin: Point\n    private selectionTarget: Point\n\n    private pivotHandle: IDrawableHandle\n\n    public handles: IDrawableHandle[] = []\n    public guides: IGuide[] = []\n    public supportsForeignHandles = true\n\n    private moveStartPoint: Point\n    private moveLastPoint: Point\n\n    private glyph: Glyph\n    private beziers: BezierCurve[] = []\n\n    public subactions: ToolSubActionSection[] = [\n        {\n            name: \"Edit\",\n            subactions: [\n                {\n                    name: \"Delete\",\n                    icon: \"delete\",\n                    accelerator: \"Delete\",\n                    handler: () => {\n                        const selected = this.handles.filter(h => h.selected)\n                        const curves = this.getSelectedCurves()\n    \n                        selected.forEach(\n                            handle => {\n                                if (!(handle instanceof BezierBasePointHandle))\n                                    return\n                                \n                                const point = handle.point\n                                const index = point.curve.points.indexOf(point)\n    \n                                point.curve.points.splice(index, 1)\n    \n                                const cpHandles = this.handles.filter(\n                                    h => h instanceof BezierControlPointHandle &&\n                                         h.point === point\n                                ) // length always = 2\n    \n                                const hIndex = this.handles.indexOf(handle)\n                                this.handles.splice(hIndex, 1)\n    \n                                const cpIndex0 = this.handles.indexOf(cpHandles[0])\n                                this.handles.splice(cpIndex0, 1)\n    \n                                const cpIndex1 = this.handles.indexOf(cpHandles[1])\n                                this.handles.splice(cpIndex1, 1)\n    \n                                \n                                undoContext.addAction(\n                                    new ArrayRemoveAction(\n                                        point.curve.points, point,\n                                        index\n                                    ),\n                                    new ArrayRemoveAction(\n                                        this.handles, handle,\n                                        hIndex\n                                    ),\n                                    new ArrayRemoveAction(\n                                        this.handles, cpHandles[0],\n                                        cpIndex0\n                                    ),\n                                    new ArrayRemoveAction(\n                                        this.handles, cpHandles[1],\n                                        cpIndex1\n                                    )\n                                )\n                            }\n                        )\n    \n                        finalizeUndoContext(\"Delete points\")\n                    }\n                },\n                {\n                    name: \"Reverse direction\",\n                    icon: \"reversecurve\",\n                    accelerator: \"KeyR\",\n                    handler: () => {\n                        this.getSelectedCurves().forEach(\n                            c => c.reverse()\n                        )\n                    }\n                }\n            ]\n        },\n        {\n            name: \"Select\",\n            subactions: [\n                {\n                    name: \"Select all\",\n                    icon: \"allsel\",\n                    accelerator: \"^KeyA\",\n                    handler: () => {\n                        this.handles.forEach(\n                            handle => handle.selected = true\n                        )\n                    }\n                },\n                {\n                    name: \"Deselect all\",\n                    icon: \"removesel\",\n                    accelerator: \"^KeyD\",\n                    handler: () => {\n                        this.handles.forEach(\n                            handle => handle.selected = false\n                        )\n                    }\n                },\n                {\n                    name: \"Invert selection\",\n                    icon: \"invertsel\",\n                    accelerator: \"^KeyI\",\n                    handler: () => {\n                        this.handles.forEach(\n                            handle => handle.selected = !handle.selected\n                        )\n                    }\n                },\n                {\n                    name: \"Select connected\",\n                    icon: \"curvesel\",\n                    accelerator: \"^KeyL\",\n                    handler: () => {\n                        const curves = this.getSelectedCurves()\n    \n                        for (let bezier of curves) {\n                            for (let point of bezier.points) {\n                                const handle = this.handles.find(\n                                    h => h instanceof BezierBasePointHandle &&\n                                         h.point === point\n                                )\n                                if (handle) handle.selected = true\n                            }\n                        }\n                    }\n                }\n            ]\n        },\n        {\n            name: \"Construct\",\n            collapse: true,\n            subactions: [\n                {\n                    name: \"Union\",\n                    icon: \"union\",\n                    accelerator: \"\",\n                    handler: () => {\n                        this.performCSGOperation(\n                            (out, item) => out.unite(item, {\n                                insert: false\n                            })\n                        )\n    \n                        finalizeUndoContext(\"Union\")\n                    }\n                },\n                {\n                    name: \"Difference\",\n                    icon: \"difference\",\n                    accelerator: \"\",\n                    handler: () => {\n                        this.performCSGOperation(\n                            (out, item) => out.subtract(item, {\n                                insert: false\n                            })\n                        )\n    \n                        finalizeUndoContext(\"Difference\")\n                    }\n                },\n                {\n                    name: \"Intersection\",\n                    icon: \"intersection\",\n                    accelerator: \"\",\n                    handler: () => {\n                        this.performCSGOperation(\n                            (out, item) => out.intersect(item, {\n                                insert: false\n                            })\n                        )\n    \n                        finalizeUndoContext(\"Intersection\")\n                    }\n                },\n                {\n                    name: \"Exclusion\",\n                    icon: \"xor\",\n                    accelerator: \"\",\n                    handler: () => {\n                        this.performCSGOperation(\n                            (out, item) => out.exclude(item, {\n                                insert: false\n                            })\n                        )\n    \n                        finalizeUndoContext(\"Exclusion\")\n                    }\n                }\n            ]\n        },\n        {\n            name: \"Transform\",\n            collapse: true,\n            subactions: [\n                {\n                    name: \"Flip X\",\n                    icon: \"flipx\",\n                    accelerator: \"\",\n                    handler: () => {\n                        const selected = this.handles.filter(h => h.selected)\n                        const bbox = this.getHandlesBBox(selected)\n    \n                        this.addHandlesToUndoContext(selected)\n    \n                        selected.forEach(handle => {\n                            handle.position.x = lerp(\n                                1 - unlerp(handle.position.x, bbox.left, bbox.right),\n                                bbox.left, bbox.right\n                            )\n                        })\n    \n                        finalizeUndoContext(\"Flip X\")\n                    }\n                },\n                {\n                    name: \"Flip Y\",\n                    icon: \"flipy\",\n                    accelerator: \"\",\n                    handler: () => {\n                        const selected = this.handles.filter(h => h.selected)\n                        const bbox = this.getHandlesBBox(selected)\n    \n                        this.addHandlesToUndoContext(selected)\n    \n                        selected.forEach(handle => {\n                            handle.position.y = lerp(\n                                1 - unlerp(handle.position.y, bbox.top, bbox.bottom),\n                                bbox.top, bbox.bottom\n                            )\n                        })\n    \n                        finalizeUndoContext(\"Flip Y\")\n                    }\n                }\n            ]\n        },\n        {\n            name: \"Alignment\",\n            collapse: true,\n            subactions: [\n                {\n                    name: \"Align to left\",\n                    icon: \"alignleft\",\n                    accelerator: \"\",\n                    handler: () => {\n                        const selected = this.handles.filter(h => h.selected)\n                        const bbox = this.getHandlesBBox(selected)\n    \n                        this.addHandlesToUndoContext(selected)\n    \n                        selected.forEach(handle => {\n                            handle.position.x = bbox.left\n                        })\n    \n                        finalizeUndoContext(\"Align to left\")\n                    }\n                },\n                {\n                    name: \"Align to right\",\n                    icon: \"alignright\",\n                    accelerator: \"\",\n                    handler: () => {\n                        const selected = this.handles.filter(h => h.selected)\n                        const bbox = this.getHandlesBBox(selected)\n    \n                        this.addHandlesToUndoContext(selected)\n    \n                        selected.forEach(handle => {\n                            handle.position.x = bbox.right\n                        })\n    \n                        finalizeUndoContext(\"Align to right\")\n                    }\n                },\n                {\n                    name: \"Align to top\",\n                    icon: \"aligntop\",\n                    accelerator: \"\",\n                    handler: () => {\n                        const selected = this.handles.filter(h => h.selected)\n                        const bbox = this.getHandlesBBox(selected)\n    \n                        this.addHandlesToUndoContext(selected)\n    \n                        selected.forEach(handle => {\n                            handle.position.y = bbox.top\n                        })\n    \n                        finalizeUndoContext(\"Align to top\")\n                    }\n                },\n                {\n                    name: \"Align to bottom\",\n                    icon: \"alignbottom\",\n                    accelerator: \"\",\n                    handler: () => {\n                        const selected = this.handles.filter(h => h.selected)\n                        const bbox = this.getHandlesBBox(selected)\n    \n                        this.addHandlesToUndoContext(selected)\n    \n                        selected.forEach(handle => {\n                            handle.position.y = bbox.bottom\n                        })\n    \n                        finalizeUndoContext(\"Align to bottom\")\n                    }\n                },\n                {\n                    name: \"Align to center\",\n                    icon: \"alignhcenter\",\n                    accelerator: \"\",\n                    handler: () => {\n                        const selected = this.handles.filter(h => h.selected)\n                        const bbox = this.getHandlesBBox(selected)\n    \n                        this.addHandlesToUndoContext(selected)\n    \n                        selected.forEach(handle => {\n                            handle.position.y = (bbox.top + bbox.bottom) / 2\n                        })\n    \n                        finalizeUndoContext(\"Align to center\")\n                    }\n                },\n                {\n                    name: \"Align to middle\",\n                    icon: \"alignvcenter\",\n                    accelerator: \"\",\n                    handler: () => {\n                        const selected = this.handles.filter(h => h.selected)\n                        const bbox = this.getHandlesBBox(selected)\n    \n                        this.addHandlesToUndoContext(selected)\n    \n                        selected.forEach(handle => {\n                            handle.position.x = (bbox.left + bbox.right) / 2\n                        })\n    \n                        finalizeUndoContext(\"Align to middle\")\n                    }\n                }\n            ]\n        }\n    ]\n\n    private performCSGOperation(\n        operation: (\n            out: paper.PathItem, current: paper.PathItem\n        ) => paper.PathItem\n    ) {\n        const curves = this.getSelectedCurves()\n        if (!curves.length) return\n\n        const targetWinding = curves[0].clockwise\n\n        const paperPaths = curves.map(\n            c => c.getPaperPath()\n        )\n        let out: paper.PathItem = paperPaths[0]\n\n        let insertIdx = Math.min(\n            ...curves.map(c => this.beziers.indexOf(c))\n        )\n\n        for (let i = 1; i < paperPaths.length; i++) {\n            out = operation(out, paperPaths[i])\n        }\n\n        const newCurves = BezierCurve.fromPaperPathItem(out)\n        if (newCurves.length) {\n            const referenceWinding = newCurves[0].clockwise\n\n            newCurves.forEach(\n                c => {\n                    c.glyph = this.glyph\n\n                    if (referenceWinding !== targetWinding)\n                        c.reverse()\n\n                    this.beziers.splice(insertIdx, 0, c)\n                    undoContext.addAction(\n                        new ArrayAddAction(\n                            this.beziers, c, insertIdx\n                        )\n                    )\n\n                    const gIdx = this.guides.length\n                    const guide = new CurveGuide(c)\n                    \n                    this.guides.push(guide)\n                    undoContext.addAction(\n                        new ArrayAddAction(\n                            this.guides, guide, gIdx\n                        )\n                    )\n\n                    c.points.forEach(\n                        p => {\n                            const index = this.handles.length\n\n                            this.handles.push(\n                                new BezierControlPointHandle(\n                                    p, p.before\n                                ),\n                                new BezierControlPointHandle(\n                                    p, p.after\n                                ),\n                                new BezierBasePointHandle(\n                                    p\n                                )\n                            )\n\n                            undoContext.addAction(\n                                new ArrayAddAction(\n                                    this.handles, this.handles[index],\n                                    index\n                                ),\n                                new ArrayAddAction(\n                                    this.handles, this.handles[index + 1],\n                                    index + 1\n                                ),\n                                new ArrayAddAction(\n                                    this.handles, this.handles[index + 2],\n                                    index + 2\n                                )\n                            )\n                        }\n                    )\n\n                    insertIdx++\n                }\n            )\n        }\n\n        curves.forEach(\n            c => {\n                const index = this.beziers.indexOf(c)\n                this.beziers.splice(index, 1)\n\n                undoContext.addAction(\n                    new ArrayRemoveAction(\n                        this.beziers, c, index\n                    )\n                )\n\n                const gIdx = this.guides.findIndex(\n                    g => g instanceof CurveGuide &&\n                         g.source === c\n                )\n                this.guides.splice(gIdx, 1)\n\n                undoContext.addAction(\n                    new ArrayRemoveAction(\n                        this.guides, this.guides[gIdx],\n                        gIdx\n                    )\n                )\n\n                this.handles.filter(\n                    h => (h instanceof BezierBasePointHandle ||\n                         h instanceof BezierControlPointHandle) &&\n                         h.point.curve === c\n                ).forEach(\n                    h => {\n                        const index = this.handles.indexOf(h)\n                        this.handles.splice(index, 1)\n\n                        undoContext.addAction(\n                            new ArrayRemoveAction(\n                                this.handles, h, index\n                            )\n                        )\n                    }\n                )\n            }\n        )\n\n        this.glyph.emit(\"modifier\")\n    }\n\n    private addHandlesToUndoContext(handles: IDrawableHandle[]) {\n        handles.forEach(\n            handle => {\n                if (!(\"prepareUndo\" in handle)) return\n                handle.prepareUndo(undoContext)\n            }\n        )\n    }\n\n    private getHandlesBBox(handles: IDrawableHandle[]): {\n        left: number, top: number,\n        right: number, bottom: number\n    } {\n        const xs = handles.map(h => h.position.x)\n        const ys = handles.map(h => h.position.y)\n\n        return {\n            left: Math.min(...xs),\n            top: Math.min(...ys),\n            right: Math.max(...xs),\n            bottom: Math.max(...ys)\n        }\n    }\n\n    private selectHandleBox(exclusive = true) {\n        const left = Math.min(\n            this.selectionOrigin.x, this.selectionTarget.x\n        )\n        const right = Math.max(\n            this.selectionOrigin.x, this.selectionTarget.x\n        )\n        const top = Math.min(\n            this.selectionOrigin.y, this.selectionTarget.y\n        )\n        const bottom = Math.max(\n            this.selectionOrigin.y, this.selectionTarget.y\n        )\n\n        for (let handle of this.handles) {\n            const selected = handle.position.x >= left &&\n                             handle.position.x < right &&\n                             handle.position.y >= top &&\n                             handle.position.y < bottom\n\n            if (exclusive)\n                handle.selected = selected\n            else\n                handle.selected = selected || handle.selected\n        }\n    }\n\n    private getSelectedCurves(): BezierCurve[] {\n        const curves: BezierCurve[] = []\n        \n        for (let handle of this.handles) {\n            if (\n                !handle.selected ||\n                !(handle instanceof BezierBasePointHandle)\n            )\n                continue\n            \n            if (!curves.includes(handle.point.curve))\n                curves.push(handle.point.curve)\n        }\n\n        return curves\n    }\n\n    handleMouseEvent(v: Viewport, e: MouseEvent, x: number, y: number) {\n        const pos = v.co.clientToWorld(\n            x, y\n        )\n\n        if (this.moveStartPoint) {\n            v.restrictAngles(this.moveStartPoint, pos, e)\n        }\n\n        if (\n            e.type === \"mousedown\" && e.buttons & 1\n        ) {\n            const handle = v.nearHandle(pos.x, pos.y)\n            if (!handle) {\n                this.pivotHandle = null\n                v.selectHandles([], !e.shiftKey)\n\n                this.selecting = true\n                this.selectionOrigin = pos\n                this.selectionTarget = pos\n            } else {\n                this.pivotHandle = handle\n                if (!handle.selected) {\n                    v.selectHandles([handle], !e.shiftKey)\n                }\n\n                this.addHandlesToUndoContext(\n                    v.getSelectedHandles()\n                )\n                \n\n                // First movement - snapping to the cursor\n                // const dPos = pos.getDiff(this.pivotHandle.position)\n                // this.pivotHandle.move(\n                //     v, pos, dPos, this.pivotHandle, e\n                // )\n\n                // for (let handle of this.handles) {\n                //     if (\n                //         handle.selected &&\n                //         handle !== this.pivotHandle &&\n                //         handle.type === this.pivotHandle.type\n                //     )\n                //         handle.move(\n                //             v, pos, dPos, this.pivotHandle, e\n                //         )\n                // }\n\n                this.moveStartPoint = new Point()\n                this.moveStartPoint.copy(this.pivotHandle.position)\n                this.moveLastPoint = pos\n            }\n        } else if (\n            e.type === \"mousemove\" && e.buttons & 1\n        ) {\n            if (this.selecting) {\n                this.selectionTarget = pos\n            } else {\n                if (!this.pivotHandle) return\n\n                const rawX = pos.x, rawY = pos.y\n                v.nudgePoint(pos, this.pivotHandle)\n\n                const inPointDiff = this.moveLastPoint.getDiff(\n                    this.pivotHandle.position\n                )\n\n                const dPos = pos.getDiff(this.moveLastPoint)\n                this.moveLastPoint = pos\n\n                if (rawX !== pos.x || rawY !== pos.y) {\n                    // Center on cursor when snapping happens\n                    pos.x -= inPointDiff.x\n                    pos.y -= inPointDiff.y\n                }\n\n                // Pivot gets moved first\n                this.pivotHandle.move(\n                    v, pos, dPos, this.pivotHandle, e\n                )\n\n                for (let handle of this.handles) {\n                    if (\n                        handle.selected &&\n                        handle !== this.pivotHandle &&\n                        handle.type === this.pivotHandle.type\n                    )\n                        handle.move(\n                            v, pos, dPos, this.pivotHandle, e\n                        )\n                }\n            }\n        } else if (\n            e.type === \"mouseup\"\n        ) {\n            if (this.selecting) {\n                this.selectHandleBox(!e.shiftKey)\n                this.selecting = false\n            } else {\n                v.disableAllGuides()\n\n                if (v.getSelectedHandles().length)\n                    finalizeUndoContext(\"Move points\")\n            }\n\n            this.moveStartPoint = null\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n        if (this.selecting) {\n            ctx.fillStyle = \"#08f3\"\n            ctx.fillRect(\n                this.selectionOrigin.x,\n                this.selectionOrigin.y,\n                this.selectionTarget.x - this.selectionOrigin.x,\n                this.selectionTarget.y - this.selectionOrigin.y\n            )\n        }\n    }\n\n    updateContext(context: IContext) {\n        if (!(context instanceof GlyphContext)) return\n\n        this.glyph = context.glyph\n        this.beziers = context.beziers\n\n        this.handles = []\n        context.beziers.forEach(\n            bezier => {\n                bezier.points.forEach(\n                    p => this.handles.push(\n                        new BezierControlPointHandle(p, p.before),\n                        new BezierControlPointHandle(p, p.after),\n                        new BezierBasePointHandle(p)\n                    )\n                )\n            }\n        )\n\n        this.guides = this.handles.filter(\n            h => h instanceof BezierBasePointHandle\n        ).map(\n            h => new HandleGuide(h)\n        )\n    }\n}","import { Glyph } from \"../../font/glyph\";\nimport { BezierCurve } from \"../../geometry/bezier/curve\";\nimport { BezierPoint } from \"../../geometry/bezier/point\";\nimport { Point } from \"../../geometry/point\";\nimport { ArrayAddAction } from \"../../undo/actions/array\";\nimport { finalizeUndoContext, undoContext } from \"../../undo/history\";\nimport { BezierContext } from \"../context/bezier\";\nimport { IContext } from \"../context/context\";\nimport { GlyphContext } from \"../context/glyph\";\nimport { IDrawableHandle } from \"../drawable\";\nimport { IGuide } from \"../guides/guide\";\nimport { PointGuide } from \"../guides/point\";\nimport { Viewport } from \"../viewport\";\nimport { ITool, ToolSubAction, ToolSubActionSection } from \"./tool\";\n\nexport class RectangleTool implements ITool {\n    public name = \"Rectangle\"\n    public icon = \"rectangletool\"\n    public accelerator = \"KeyS\"\n\n    public handles: IDrawableHandle[] = []\n    public guides: IGuide[] = []\n    public supportsForeignHandles = false\n\n    public subactions: ToolSubActionSection[] = []\n\n    private startPoint: Point\n\n    private glyph: Glyph\n\n    private currentBezier: BezierCurve\n\n    createRect(): BezierCurve {\n        const curve = new BezierCurve(this.glyph)\n\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n        curve.addPoint(\n            new BezierPoint(\n                new Point(0, 0),\n                new Point(0, 0),\n                new Point(0, 0)\n            )\n        )\n\n        curve.points.forEach(p => p.determineType())\n\n        return curve\n    }\n\n    updateRectangle(pos: Point, e: MouseEvent) {\n        const min = new Point(\n            this.startPoint.x, this.startPoint.y\n        )\n        const max = new Point(pos.x, pos.y)\n\n        if (e.shiftKey) {\n            const w = max.x - min.x\n            const h = max.y - min.y\n\n            const size = Math.min(\n                Math.abs(w), Math.abs(h)\n            )\n\n            max.x = Math.sign(w) * size + min.x\n            max.y = Math.sign(h) * size + min.y\n        }\n        if (e.ctrlKey) {\n            min.x = 2 * min.x - max.x\n            min.y = 2 * min.y - max.y\n        }\n\n        this.currentBezier.points[0].base.x = min.x\n        this.currentBezier.points[0].base.y = min.y\n        this.currentBezier.points[0].before.x = min.x\n        this.currentBezier.points[0].before.y = min.y\n        this.currentBezier.points[0].after.x = min.x\n        this.currentBezier.points[0].after.y = min.y\n\n        this.currentBezier.points[1].base.x = max.x\n        this.currentBezier.points[1].base.y = min.y\n        this.currentBezier.points[1].before.x = max.x\n        this.currentBezier.points[1].before.y = min.y\n        this.currentBezier.points[1].after.x = max.x\n        this.currentBezier.points[1].after.y = min.y\n\n        this.currentBezier.points[2].base.x = max.x\n        this.currentBezier.points[2].base.y = max.y\n        this.currentBezier.points[2].before.x = max.x\n        this.currentBezier.points[2].before.y = max.y\n        this.currentBezier.points[2].after.x = max.x\n        this.currentBezier.points[2].after.y = max.y\n\n        this.currentBezier.points[3].base.x = min.x\n        this.currentBezier.points[3].base.y = max.y\n        this.currentBezier.points[3].before.x = min.x\n        this.currentBezier.points[3].before.y = max.y\n        this.currentBezier.points[3].after.x = min.x\n        this.currentBezier.points[3].after.y = max.y\n    }\n\n    handleMouseEvent(\n        v: Viewport, e: MouseEvent, x: number, y: number\n    ) {\n        if (!(v.context instanceof BezierContext)) return\n\n        const pos = v.co.clientToWorld(\n            x, y\n        )\n        v.nudgePoint(pos)\n\n        if (\n            e.type === \"mousedown\" && e.buttons & 1\n        ) {\n            this.currentBezier = this.createRect()\n            this.startPoint = pos\n\n            this.updateRectangle(pos, e)\n\n            v.context.beziers.push(this.currentBezier)\n            \n            undoContext.addAction(\n                new ArrayAddAction(\n                    v.context.beziers, this.currentBezier,\n                    v.context.beziers.length - 1\n                )\n            )\n        } else if (\n            e.type === \"mousemove\" && e.buttons & 1 &&\n            this.startPoint\n        ) {\n            this.updateRectangle(pos, e)\n        } else if (\n            e.type === \"mouseup\"\n        ) {\n            if (this.currentBezier) {\n                finalizeUndoContext(\"Rectangle\")\n\n                this.currentBezier = null\n                this.startPoint = null\n\n                this.glyph.emit(\"modified\")\n            }\n        }\n    }\n\n    render(v: Viewport, ctx: CanvasRenderingContext2D) {\n    }\n\n    updateContext(context: IContext) {\n        if (!(context instanceof GlyphContext)) return\n\n        this.glyph = context.glyph\n\n        this.handles = []\n        this.guides = []\n        \n        for (let bezier of context.beziers) {\n            for (let point of bezier.points) {\n                this.guides.push(\n                    new PointGuide(point.base)\n                )\n            }\n        }\n    }\n}","import { throws } from \"assert\"\nimport { Point } from \"../geometry/point\"\nimport { IContext } from \"./context/context\"\nimport { ViewportCoordinates } from \"./coordinates\"\nimport { IDrawableHandle } from \"./drawable\"\nimport { CurveGuide } from \"./guides/curve\"\nimport { GridGuide } from \"./guides/grid\"\nimport { IGuide } from \"./guides/guide\"\nimport { HorizontalGuide, VerticalGuide } from \"./guides/line\"\nimport { PointGuide } from \"./guides/point\"\nimport { ITool } from \"./tools/tool\"\nimport { MenuItem, MenuItemConstructorOptions, remote } from \"electron\"\nimport { accelStringToElectron } from \"../utils/accelerator\"\nimport { currentFont } from \"../app\"\nimport { wrappedDist } from \"../utils/wrappedDist\"\nimport { getThemeColor } from \"../ui/theme\"\n\nexport class Viewport {\n    public domCanvas = document.createElement(\"canvas\")\n    private ctx = this.domCanvas.getContext(\"2d\")\n\n    public co = new ViewportCoordinates()\n\n    private isConstructing = false\n    private constructionAngle = 0\n    private constructionReference = new Point()\n\n    constructor(\n        public context: IContext,\n        public handles: IDrawableHandle[],\n        public tool: ITool\n    ) {\n        this.setupCanvasEvents()\n    }\n\n    dispatchMouseEvent(e: MouseEvent) {\n        const box = this.domCanvas.getBoundingClientRect()\n        if (!this.tool) return\n\n        this.tool.handleMouseEvent(\n            this, e,\n            e.clientX - box.left, e.clientY - box.top\n        )\n        this.render()\n    }\n\n    private setupCanvasEvents() {\n        this.domCanvas.addEventListener(\"click\", (e) => {\n        })\n\n        this.domCanvas.addEventListener(\"mousedown\", (e) => {\n            this.dispatchMouseEvent(e)\n        })\n\n        this.domCanvas.addEventListener(\"contextmenu\", () => {\n            const menuItems: MenuItemConstructorOptions[] = []\n            \n            this.tool.subactions.forEach(\n                (section, i) => {\n                    if (section.collapse) {\n                        menuItems.push({\n                            type: \"submenu\",\n                            label: section.name,\n                            submenu: section.subactions.map(\n                                a => {\n                                    return {\n                                        label: a.name,\n                                        click: () => a.handler(),\n                                        accelerator: accelStringToElectron(a.accelerator)\n                                    }\n                                }\n                            )\n                        })\n                    } else {\n                        menuItems.push(\n                            ...section.subactions.map(\n                                a => {\n                                    return {\n                                        label: a.name,\n                                        click: () => a.handler(),\n                                        accelerator: accelStringToElectron(a.accelerator)\n                                    }\n                                }\n                            )\n                        )\n                    }\n\n                    if (i < this.tool.subactions.length - 1) {\n                        menuItems.push({\n                            type: \"separator\"\n                        })\n                    }\n                }\n            )\n\n            const menu = remote.Menu.buildFromTemplate(menuItems)\n\n            menu.popup()\n        })\n\n        this.domCanvas.addEventListener(\"mouseup\", (e) => {\n            this.dispatchMouseEvent(e)\n        })\n\n        this.domCanvas.addEventListener(\"mousemove\", (e) => {\n            if (e.buttons & 4) { // Middle Button\n                this.co.translate(e.movementX, e.movementY)\n                this.render()\n            } else {\n                this.dispatchMouseEvent(e)\n            }\n        })\n\n        this.domCanvas.addEventListener(\"wheel\", (e) => {\n            if (e.buttons & 4 || e.ctrlKey) { // Middle Button\n                const box = this.domCanvas.getBoundingClientRect()\n                const pos = this.co.clientToWorld(\n                    e.clientX - box.left, e.clientY - box.top\n                )\n\n                this.co.scale(\n                    1.2 ** Math.sign(-e.deltaY),\n                    pos.x, pos.y\n                )\n                this.render()\n            } else {\n                if (e.shiftKey && !e.deltaX) {\n                    this.co.translate(\n                        -e.deltaY, 0\n                    )\n                } else {\n                    this.co.translate(\n                        -e.deltaX, -e.deltaY\n                    )\n                }\n                this.render()\n            }\n        })\n    }\n\n    nearHandle(\n        x: number, y: number,\n        type?: string\n    ): IDrawableHandle {\n        const handles = [\n            ...this.context.handles,\n            ...this.tool.handles\n        ]\n\n        for (let i = handles.length - 1; i >= 0; i--) {\n            const handle = handles[i]\n\n            if (type && handle.type !== type || handle.hidden)\n                continue\n\n            const dist = Math.hypot(\n                handle.position.x - x,\n                handle.position.y - y\n            )\n\n            if (dist < handle.hitRadius / this.co.scaleFactor)\n                return handle\n        }\n\n        return null\n    }\n\n    selectHandles(\n        select: IDrawableHandle[],\n        exclusive = true\n    ) {\n        const handles = [\n            ...this.context.handles,\n            ...this.tool.handles\n        ]\n\n        if (exclusive) {\n            for (let handle of handles) {\n                handle.selected = false\n            }\n        }\n\n        for (let handle of select) {\n            handle.selected = true\n        }\n    }\n\n    getSelectedHandles() {\n        const handles = [\n            ...this.context.handles,\n            ...this.tool.handles\n        ]\n\n        return handles.filter(h => h.selected)\n    }\n\n    purgeHandles() {\n        this.handles = []\n    }\n\n    updateViewportSize(autoCenter = true) {\n        const parent = this.domCanvas.parentElement\n        if (!parent) return\n\n        const rect = parent.getBoundingClientRect()\n\n        if (autoCenter) {\n            this.co.translate(\n                (rect.width - this.domCanvas.width) / 2,\n                (rect.height - this.domCanvas.height) / 2\n            )\n        }\n        this.domCanvas.width = rect.width\n        this.domCanvas.height = rect.height\n\n        this.render()\n    }\n\n    drawHandles(handles: IDrawableHandle[]) {\n        for (let handle of handles) {\n            const clientPos = this.co.worldToClient(\n                handle.position.x, handle.position.y\n            )\n\n            this.ctx.resetTransform()\n            this.ctx.translate(\n                Math.round(clientPos.x) + 0.5,\n                Math.round(clientPos.y) + 0.5\n            )\n\n            handle.render(this, this.ctx)\n        }\n    }\n\n    nudgeToGuides(pos: Point, obj: any, guides: IGuide[], strict = true) {\n        const nudgedPoints: Point[] = []\n        \n        guides.forEach(\n            g => {\n                const point = g.nudge(this, pos, obj)\n                if (point && pos.distance(point) && strict)\n                    nudgedPoints.push(point)\n                else if (point && !strict)\n                    pos.copy(point)\n            }\n        )\n\n        if (nudgedPoints.length && strict) {\n            const distances = nudgedPoints.map(p => p.distance(pos))\n            const minDist = Math.min(...distances)\n            const minIndex = distances.indexOf(minDist)\n\n            pos.copy(nudgedPoints[minIndex])\n        }\n    }\n\n    nudgePoint(pos: Point, obj?: any) {\n        const guides = [\n            ...this.context.guides,\n            ...this.tool.guides\n        ]\n\n        this.nudgeToGuides(\n            pos, obj,\n            guides.filter(g => g instanceof CurveGuide)\n        )\n\n        if (currentFont.settings.gridEnabled)\n            this.nudgeToGuides(pos, obj, this.context.grids)\n\n        this.nudgeToGuides(\n            pos, obj,\n            guides.filter(\n                g => g instanceof HorizontalGuide ||\n                     g instanceof VerticalGuide\n            ),\n            false\n        )\n        this.nudgeToGuides(\n            pos, obj,\n            guides.filter(g => g instanceof PointGuide)\n        )\n    }\n\n    restrictAngles(start: Point, pos: Point, e: MouseEvent) {\n        const angles = [\n            currentFont.settings.constructionAngle0,\n            currentFont.settings.constructionAngle1,\n            currentFont.settings.constructionAngle2,\n            currentFont.settings.constructionAngle3\n        ]\n        const r = pos.distance(start)\n        const angle = pos.angle(start)\n\n        this.isConstructing = false\n\n        if (\n            e.shiftKey &&\n            currentFont.settings.constructionEnabled\n        ) {\n            let add180 = false\n            let nrmAngle = angle * (180 / Math.PI)\n            if (nrmAngle < 0) {\n                nrmAngle = 180 + nrmAngle\n                add180 = true\n            }\n\n            const angleDists = angles.map(\n                a => wrappedDist(nrmAngle, a, 180)\n            )\n            const minIndex = angleDists.indexOf(\n                Math.min(...angleDists)\n            )\n\n            let selectedAngle = angles[minIndex]\n            if (\n                Math.abs(\n                    angle * (180 / Math.PI) - selectedAngle\n                ) > 90\n            ) {\n                selectedAngle += 180\n            }\n            const finalAngle = selectedAngle * (Math.PI / 180)\n\n            pos.x = start.x + r * Math.cos(finalAngle)\n            pos.y = start.y + r * Math.sin(finalAngle)\n\n            this.isConstructing = true\n            this.constructionAngle = finalAngle\n            this.constructionReference.copy(start)\n        }\n    }\n\n    disableAllGuides() {\n        this.context.grids.forEach(\n            g => g.active = false\n        )\n        this.context.guides.forEach(\n            g => g.active = false\n        )\n        this.tool.guides.forEach(\n            g => g.active = false\n        )\n        this.isConstructing = false\n    }\n\n    render() {\n        this.ctx.resetTransform()\n        this.ctx.clearRect(\n            0, 0, this.domCanvas.width, this.domCanvas.height\n        )\n\n        this.co.transformCanvas(this.ctx)\n\n        this.context.render(this, this.ctx)\n        \n        this.ctx.resetTransform()\n        \n        \n        if (currentFont.settings.gridEnabled)\n            this.context.grids.forEach(\n                g => g.render(this, this.ctx)\n            )\n\n        Array(\n            ...this.context.guides,\n            ...this.tool.guides\n        ).forEach(\n            guide => {\n                if (guide.active || guide instanceof GridGuide) {\n                    this.ctx.resetTransform()\n                    if (guide.worldRender)\n                        this.co.transformCanvas(this.ctx)\n                        \n                    guide.render(this, this.ctx)\n                }\n            }\n        )\n\n        this.ctx.resetTransform()\n        if (this.isConstructing) {\n            const clientConstr = this.co.worldToClient(\n                this.constructionReference.x, this.constructionReference.y\n            )\n\n            this.ctx.strokeStyle = getThemeColor(\"constructionActive\")\n            this.ctx.lineWidth = 1\n\n            this.ctx.beginPath()\n            this.ctx.moveTo(\n                clientConstr.x - 1000 * Math.cos(this.constructionAngle),\n                clientConstr.y - 1000 * Math.sin(this.constructionAngle)\n            )\n            this.ctx.lineTo(\n                clientConstr.x + 1000 * Math.cos(this.constructionAngle),\n                clientConstr.y + 1000 * Math.sin(this.constructionAngle)\n            )\n            this.ctx.stroke()\n        }\n\n        if (this.tool && this.tool.supportsForeignHandles) {\n            this.drawHandles(this.context.handles)\n            this.drawHandles(this.handles)\n        }\n        if (this.tool) {\n            this.drawHandles(this.tool.handles)\n        }\n\n        this.ctx.resetTransform()\n        this.co.transformCanvas(this.ctx)\n        if (this.tool)\n            this.tool.render(this, this.ctx)\n    }\n\n    setTool(tool: ITool) {\n        this.tool = tool\n        this.tool.updateContext(this.context)\n        this.disableAllGuides()\n        this.render()\n    }\n}","module.exports = require(\"child_process\");","module.exports = require(\"electron\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"opentype.js\");","module.exports = require(\"paper\");","module.exports = require(\"path\");","module.exports = require(\"smart-buffer\");","module.exports = require(\"zlib\");"],"sourceRoot":""}